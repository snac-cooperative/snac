!function(e,t){for(var a in t)e[a]=t[a]}(window,function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}({3:function(e,t,a){"use strict";a.r(t),a.d(t,"somethingHasBeenEdited",(function(){return n})),a.d(t,"setEditedFlag",(function(){return i})),a.d(t,"undoSet",(function(){return r})),a.d(t,"defaults",(function(){return o})),a.d(t,"displayErrorMessage",(function(){return l})),a.d(t,"addDateEntry",(function(){return s})),a.d(t,"addDateRangeEntry",(function(){return c})),a.d(t,"addSCMEntry",(function(){return _})),a.d(t,"makeEditable",(function(){return u})),a.d(t,"makeUneditable",(function(){return v})),a.d(t,"makeSCMUneditable",(function(){return g})),a.d(t,"setRepeatedDataDeleted",(function(){return h})),a.d(t,"newAddressLine",(function(){return C})),a.d(t,"newNameEntryComponent",(function(){return Z})),a.d(t,"updateNameEntryHeading",(function(){return E})),a.d(t,"newNameEntryRule",(function(){return I})),a.d(t,"updateDate",(function(){return w})),a.d(t,"chooseSuggestedGeoPlace",(function(){return A})),a.d(t,"magicDefaultFill",(function(){return N}));
/**
 * Edit Scripts
 *
 * Scripts used in the edit page
 *
 * @author Robbie Hott
 * @license https://opensource.org/licenses/BSD-3-Clause BSD 3-Clause
 * @copyright 2015 the Rector and Visitors of the University of Virginia, and
 *            the Regents of the University of California
 */
var n=!1;function i(e){1==e?$("#save_and_continue").addClass("save-active"):$("#save_and_continue").removeClass("save-active"),n=e}var r=new Array,o={language:{id:130,term:"eng"},script:{id:586,term:"Latn"}};function l(e,t){var a="";a=void 0===e?"an unknown problem occurred":"string"==typeof e?e:e.message?e.message:e.type?e.type:"an unknown problem occurred",$("#error-message").html("<h4>Oops</h4><p>"+a+'</p><p class="text-right"><button type="button" class="btn btn-warning" aria-label="Close" onClick="$(\'#error-message\').slideUp()">Stay Here</button> <a href="'+snacUrl+'/dashboard" type="button" class="btn btn-danger">Go to Dashboard</a></p>'),setTimeout((function(){$("#error-message").slideDown()}),500),console.log(t)}function s(e,t){var a=parseInt($("#next_date_"+e+"_"+t+"_j").text());i(!0);var n=$("#sub_date_template").clone().html().replace(/ZZ/g,t).replace(/XX/g,a).replace(/SHORT/g,e);return $("#add_date_"+e+"_"+t+"_div").after(n),$("#next_date_"+e+"_"+t+"_j").text(a+1),k(e+"_date"+a,t),R(e+"_date_"+a,t),u(e+"_date_"+a,t),!1}function c(e,t){var a=parseInt($("#next_date_"+e+"_"+t+"_j").text());i(!0);var n=$("#sub_dateRange_template").clone().html().replace(/ZZ/g,t).replace(/XX/g,a).replace(/SHORT/g,e);return $("#add_date_"+e+"_"+t+"_div").after(n),$("#next_date_"+e+"_"+t+"_j").text(a+1),k(e+"_date"+a,t),R(e+"_date_"+a,t),u(e+"_date_"+a,t),!1}function _(e,t){var a=parseInt($("#next_scm_"+e+"_"+t+"_j").text()),n=a+"_"+t;i(!0);var r=$("#scm_template").clone().html().replace(/ZZ/g,t).replace(/YY/g,a).replace(/SHORT/g,e);return $("#add_scm_"+e+"_"+t+"_div").after(r),$("#next_scm_"+e+"_"+t+"_j").text(a+1),function(e,t,a){$("#scm_"+e+"_editbutton_"+a+"_"+t).on("click",(function(){f(e,t,a)})),$("#scm_"+e+"_deletebutton_"+a+"_"+t).on("click",(function(){y(e,t,a)}))}(e,t,a),R("scm_"+e,n),f(e,t,a),!1}var d=null;function u(e,t){return"update"!=$("#"+e+"_operation_"+t).val()&&("delete"==$("#"+e+"_operation_"+t).val()&&x(e,t),$("#"+e+"_editbutton_"+t).removeClass("list-group-item-info").addClass("list-group-item-warning"),$("#"+e+"_editbutton_"+t).html('<span class="fa fa-2x fa-undo"></span><br>Undo'),$("#"+e+"_editbutton_"+t).off("click").on("click",(function(){!function(e,t){v(e,t),$("#"+e+"_datapart_"+t).replaceWith(r[e+"-"+t]),R(e,t),$("#"+e+"_datapart_"+t+" input[type='checkbox']").each((function(){$(this).bootstrapToggle()}))}(e,t)})),$("#"+e+"_deletebutton_"+t).removeClass("list-group-item-danger").addClass("disabled"),$("#"+e+"_deletebutton_"+t).off("click").on("click",(function(){return!1})),$("#"+e+"_panel_"+t).removeClass("panel-default").addClass("alert-info").addClass("edited-component"),p(e,t))}function p(e,t){if("update"==$("#"+e+"_operation_"+t).val())return!1;var a,n;r[e+"-"+t]=$("#"+e+"_datapart_"+t).clone(),a=e,n=t,$("#"+a+"_datapart_"+n+" div[id^='text_"+a+"']").each((function(){var e=$(this);if(e.attr("id").endsWith("_"+n)&&!e.attr("id").endsWith("ZZ")){var t=e.attr("id").replace(/^text_/,"").replace(a+"_",""),i=new RegExp("_"+n+"$","g"),r=t.replace(i,""),o=$("#"+a+"_"+r+"_"+n).val(),l=0,s="";$("#"+a+"_"+r+"_size_"+n).exists()&&(s=" size='"+(l=parseInt($("#"+a+"_"+r+"_size_"+n).val()))+"' ");var c="";$("#"+a+"_"+r+"_placeholder_"+n).exists()&&(c=$("#"+a+"_"+r+"_placeholder_"+n).val());var _="";$("#"+a+"_"+r+"_onKeyUp_"+n).exists()&&(_=$("#"+a+"_"+r+"_onKeyUp_"+n).val());var d="";""!=_&&(d=" onKeyUp='"+_+"' ");var u="<input id='"+a+"_"+r+"_"+n+"' name='"+a+"_"+r+"_"+n+"' class='form-control' type='text' value=\""+o+'"'+s+d+'placeholder="'+c+'"/>';0!=l&&(u+='<input type="hidden" id="'+a+"_"+r+"_size_"+n+'" value="'+l+'"/>'),""!=c&&(u+='<input type="hidden" id="'+a+"_"+r+"_placeholder_"+n+'" value="'+c+'"/>'),""!=_&&(u+='<input type="hidden" id="'+a+"_"+r+"_onKeyUp_"+n+'" value="'+_+'"/>'),e.html(u)}})),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='textarea_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace(/^textarea_/,"").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_"+t).val(),l="<textarea id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"' class='form-control' style='width: 100%;'>"+o+"</textarea>";a.html(l)}}))}(e,t),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='checkbox_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace(/^checkbox_/,"").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_"+t).val(),l="";$("#"+e+"_"+r+"_placeholderOn_"+t).exists()&&(l=$("#"+e+"_"+r+"_placeholderOn_"+t).val());var s="";$("#"+e+"_"+r+"_placeholderOff_"+t).exists()&&(s=$("#"+e+"_"+r+"_placeholderOff_"+t).val());var c="<input id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"' class='form-control' type='checkbox' value=\"checked\"data-on=\""+l+'" data-off="'+s+'"';"checked"==o&&(c+=" checked"),c+="/>",""!=l&&(c+='<input type="hidden" id="'+e+"_"+r+"_placeholderOn_"+t+'" value="'+l+'"/>'),""!=s&&(c+='<input type="hidden" id="'+e+"_"+r+"_placeholderOff_"+t+'" value="'+s+'"/>'),a.html(c),$("#"+e+"_"+r+"_"+t).bootstrapToggle()}}))}(e,t);var o="_"+t;$("#"+e+"_datapart_"+t+" button[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith(o)&&!e.attr("id").endsWith("ZZ")&&e.removeAttr("disabled").removeClass("snac-hidden")})),$("#"+e+"_datapart_"+t+" a.label").each((function(){$(this).removeClass("snac-hidden")})),$("#"+e+"_datapart_"+t+" input[type='checkbox']").each((function(){var e=$(this);e.attr("id").endsWith(o)&&!e.attr("id").endsWith("ZZ")&&e.bootstrapToggle("enable")})),$("#"+e+"_datapart_"+t+" textarea[id^='"+e+"_']").each((function(){var t=$(this);if(t.attr("id").endsWith(o)&&!t.attr("id").endsWith("ZZ")){var a=t.attr("id").replace(e,"");-1==a.indexOf("_text_")&&-1==a.indexOf("_source_")||(t.get(0).CodeMirror=CodeMirror.fromTextArea(t.get(0),{lineNumbers:!0,lineWrapping:!0,viewportMargin:1/0,mode:{name:"xml"}}))}}));var l=!1;return $("#"+e+"_datapart_"+t+" select[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith(o)&&!e.attr("id").endsWith("ZZ")&&(l=!0)})),l||(function(e,t){$("#"+e+"_datapart_"+t+" div[id^='select_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("select_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_id_"+t).val(),l=$("#"+e+"_"+r+"_term_"+t).val(),s=$("#"+e+"_"+r+"_vocabtype_"+t).val(),c=$("#"+e+"_"+r+"_minlength_"+t).val(),_="Select";$("#"+e+"_"+r+"_placeholder_"+t).exists()&&(_=$("#"+e+"_"+r+"_placeholder_"+t).val());var d="";$("#"+e+"_"+r+"_defaultOptions_"+t).exists()&&(d=$("#"+e+"_"+r+"_defaultOptions_"+t).val()),a.html("<select id='"+e+"_"+r+"_id_"+t+"' name='"+e+"_"+r+"_id_"+t+"' class='form-control' data-placeholder='"+_+"'><option></option><option value=\""+o+'" selected>'+l+"</option>"+d+'</select><input type="hidden" id="'+e+"_"+r+"_vocabtype_"+t+'" name="'+e+"_"+r+"_vocabtype_"+t+'" value="'+s+'"/><input type="hidden" id="'+e+"_"+r+"_minlength_"+t+'" name="'+e+"_"+r+"_minlength_"+t+'" value="'+c+'"/>'),"citation"==r?scm_source_select_replace($("#"+e+"_"+r+"_id_"+t),"_"+t):vocab_select_replace($("#"+e+"_"+r+"_id_"+t),"_"+t,s,c)}}))}(e,t),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='selectGeo_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("selectGeo_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_id_"+t).val(),l=$("#"+e+"_"+r+"_term_"+t).val(),s="",c=" selected";"true"==$("#"+e+"_confirmed_"+t).val()||(s=" selected",c=""),a.html("<select id='"+e+"_"+r+"_id_"+t+"' name='"+e+"_"+r+"_id_"+t+"' class='form-control' data-placeholder='Select Geo Place Term'><option"+s+'></option><option value="'+o+'"'+c+">"+l+"</option></select>"),geovocab_select_replace($("#"+e+"_"+r+"_id_"+t),"_"+t)}}))}(e,t),function(e,t){$("div[id^='date_"+e+"']").each((function(){var a,n=$(this);if(n.attr("id").endsWith("_"+t)&&!n.attr("id").endsWith("ZZ")){var i=n.attr("id").replace("date_","").replace(e+"_",""),r=new RegExp("_"+t+"$","g"),o=i.replace(r,""),l=$("#"+e+"_"+o+"_"+t).val(),s=3==(a=l.split("-")).length?{year:parseInt(a[0]),month:parseInt(a[1]),day:parseInt(a[2])}:2==a.length?{year:parseInt(a[0]),month:parseInt(a[1]),day:""}:1==a.length&&""!=a[0]?{year:parseInt(a[0]),month:"",day:""}:{year:"",month:"",day:""},c="<input type='text' size='4' style='width:20%;display:inline;' placeholder='YYYY' id='"+e+"_"+o+"_year_"+t+"' class='form-control' value='"+s.year+"'>";c+="<span class='form-control-static'> - </span>",c+="<select id='"+e+"_"+o+"_month_"+t+"' class='form-control' data-placeholder='Month' style='width: 57%; margin-bottom: 5px; display: inline-block;'><option></option>";["January","February","March","April","May","June","July","August","September","October","November","December"].forEach((function(e,t){var a=t+1;c+=a==s.month?'<option value="'+a+'" selected>'+e+"</option>":'<option value="'+a+'">'+e+"</option>"})),c+="<select> ",c+="<span class='form-control-static'> - </span>",c+="<input type='text' style='width:14%;display:inline;' size='2' placeholder='DD' id='"+e+"_"+o+"_day_"+t+"' class='form-control' value='"+s.day+"'> ",c+="<input type='hidden' id='"+e+"_"+o+"_"+t+"' name='"+e+"_"+o+"_"+t+"' value='"+l+"'>",n.html(c),$("#"+e+"_"+o+"_month_"+t).select2({width:"57%",allowClear:!0,theme:"bootstrap",placeholder:"Month"})}}))}(e,t)),$("#"+e+"_datapart_"+t+" span.move-handle").each((function(){$(this).removeClass("snac-hidden")})),$("#"+e+"_reorderable_"+t).sortable({items:".reorderable",opacity:.5,update:function(a,n){var i=$("#"+e+"_reorderable_"+t).sortable("toArray");console.log(i),i.forEach((function(e,t){$("#"+e+" input.order-index").val(t)})),"nameEntry"==e&&E(t)}}),"constellationRelation"==e&&$("#"+e+"_type_id_"+t).change((function(){W(e,t,$("#"+e+"_type_id_"+t+" option:selected").text())})),"resourceRelation"==e&&$("#"+e+"_role_id_"+t).change((function(){W(e,t,$("#"+e+"_role_id_"+t+" option:selected").text())})),"place"==e&&(null!=$("#"+e+"_geoplace_id_"+t).val()&&""!=$("#"+e+"_geoplace_id_"+t).val()&&j(e,t,$("#"+e+"_geoplace_id_"+t).val()),$("#"+e+"_geoplace_id_"+t).change((function(){j(e,t,$("#"+e+"_geoplace_id_"+t).val())}))),"nameEntry"!==e||"700"!==$("#entityType").val()||"Name"!==$("#nameEntry_component_0_panel_"+t).find("select:first").text()||$("#nameEntry_panel_"+t).find(".name-parser").length||0!==$("#nameEntry_component_1_panel_"+t).length||$("#nameEntry_component_add_"+t).after('<button class="btn btn-primary name-parser" id="nameEntry_parse_'+t+'" style="margin-left:5px;"> <i class="fa fa-magic" aria-hidden="true"></i> Parse </button>'),""!=$("#"+e+"_id_"+t).val()?$("#"+e+"_operation_"+t).val("update"):$("#"+e+"_operation_"+t).val("insert"),i(!0),!1}function m(e,t){var a="_"+t;$("#"+e+"_datapart_"+t+" span.move-handle").each((function(){$(this).addClass("snac-hidden")})),$("#"+e+"_reorderable_"+t).hasClass("ui-sortable")&&$("#"+e+"_reorderable_"+t).sortable("destroy"),$("#"+e+"_datapart_"+t+" textarea[id^='"+e+"_']").each((function(){var e=$(this);!e.attr("id").endsWith(a)||e.attr("id").endsWith("ZZ")||-1==e.attr("id").indexOf("_text_")&&-1==e.attr("id").indexOf("_source_")||e.get(0).CodeMirror&&e.get(0).CodeMirror.toTextArea()})),$("#"+e+"_datapart_"+t+" button[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith(a)&&!e.attr("id").endsWith("ZZ")&&e.attr("disabled","true").addClass("snac-hidden")})),$("#"+e+"_datapart_"+t+" a.label").each((function(){$(this).addClass("snac-hidden")})),$("#"+e+"_datapart_"+t+" input[type='checkbox']").each((function(){var e=$(this);e.attr("id").endsWith(a)&&!e.attr("id").endsWith("ZZ")&&e.bootstrapToggle("disable")})),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='text_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace(/^text_/,"").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_"+t).val(),l=0;$("#"+e+"_"+r+"_size_"+t).exists()&&(l=parseInt($("#"+e+"_"+r+"_size_"+t).val()));var s="";$("#"+e+"_"+r+"_placeholder_"+t).exists()&&(s=$("#"+e+"_"+r+"_placeholder_"+t).val());var c="";$("#"+e+"_"+r+"_onKeyUp_"+t).exists()&&(c=$("#"+e+"_"+r+"_onKeyUp_"+t).val());var _="<input id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"' type='hidden' value=\""+o+'"/>';_+="<p class='form-control-static'>"+o+"</p>",0!=l&&(_+='<input type="hidden" id="'+e+"_"+r+"_size_"+t+'" value="'+l+'"/>'),""!=s&&(_+='<input type="hidden" id="'+e+"_"+r+"_placeholder_"+t+'" value="'+s+'"/>'),""!=c&&(_+='<input type="hidden" id="'+e+"_"+r+"_onKeyUp_"+t+'" value="'+c+'"/>'),a.html(_)}}))}(e,t),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='textarea_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace(/^textarea_/,"").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_"+t).val(),l="<textarea style='display:none;' id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"'>"+o+"</textarea>";l+="<div class='form-control-static'>"+o+"</div>",a.html(l)}}))}(e,t),function(e,t){$("#"+e+"_datapart_"+t+" div[id^='checkbox_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace(/^checkbox_/,"").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_"+t).val(),l=$("#"+e+"_"+r+"_"+t).prop("checked"),s="";$("#"+e+"_"+r+"_placeholderOn_"+t).exists()&&(s=$("#"+e+"_"+r+"_placeholderOn_"+t).val());var c="";$("#"+e+"_"+r+"_placeholderOff_"+t).exists()&&(c=$("#"+e+"_"+r+"_placeholderOff_"+t).val());var _="<input id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"' type='hidden' value=\"";l&&(_+="checked"),_+='"/>',_+="<p class='form-control-static'>",l?_+=""!=s?s:o:""!=c&&(_+=c),_+="</p>",""!=s&&(_+='<input type="hidden" id="'+e+"_"+r+"_placeholderOn_"+t+'" value="'+s+'"/>'),""!=c&&(_+='<input type="hidden" id="'+e+"_"+r+"_placeholderOff_"+t+'" value="'+c+'"/>'),$("#"+e+"_"+r+"_"+t).bootstrapToggle("destroy"),a.html(_)}}))}(e,t);var n=!1;$("#"+e+"_datapart_"+t+" select[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith(a)&&!e.attr("id").endsWith("ZZ")&&(n=!0)})),n&&(function(e,t){$("div[id^='select_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("select_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_id_"+t).val(),l=$("#"+e+"_"+r+"_id_"+t+" option:selected").text(),s=$("#"+e+"_"+r+"_vocabtype_"+t).val(),c=$("#"+e+"_"+r+"_minlength_"+t).val(),_="",d="";"name_component"==s&&(_="name-component-type",d=" :"),a.html('<input type="hidden" id="'+e+"_"+r+"_id_"+t+'" name="'+e+"_"+r+"_id_"+t+'" value="'+o+'"/><input type="hidden" id="'+e+"_"+r+"_term_"+t+'" name="'+e+"_"+r+"_term_"+t+'" value="'+l+'"/><input type="hidden" id="'+e+"_"+r+"_vocabtype_"+t+'" name="'+e+"_"+r+"_vocabtype_"+t+'" value="'+s+'"/><input type="hidden" id="'+e+"_"+r+"_minlength_"+t+'" name="'+e+"_"+r+"_minlength_"+t+'" value="'+c+'"/><p class="form-control-static '+_+'">'+l+d+"</p>")}}))}(e,t),function(e,t){$("div[id^='selectGeo_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("selectGeo_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,""),o=$("#"+e+"_"+r+"_id_"+t).val(),l=$("#"+e+"_"+r+"_id_"+t+" option:selected").text();a.html('<input type="hidden" id="'+e+"_"+r+"_id_"+t+'" name="'+e+"_"+r+"_id_"+t+'" value="'+o+'"/><input type="hidden" id="'+e+"_"+r+"_term_"+t+'" name="'+e+"_"+r+"_term_"+t+'" value="'+l+'"/>')}}))}(e,t),function(e,t){$("div[id^='date_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("date_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,"");w(e,t);var o=$("#"+e+"_"+r+"_"+t).val(),l="<p class='form-control-static'>"+o+"</p>";l+="<input type='hidden' id='"+e+"_"+r+"_"+t+"' name='"+e+"_"+r+"_"+t+"' value='"+o+"'>",a.html(l)}}))}(e,t)),$("#"+e+"_datapart_"+t+" input[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith("_operation"+a)&&!e.attr("id").endsWith("ZZ")&&e.val("")})),$("#"+e+"_panel_"+t).addClass("panel-default").removeClass("alert-info").removeClass("edited-component")}function v(e,t){return m(e,t),$("#"+e+"_editbutton_"+t).addClass("list-group-item-info").removeClass("list-group-item-warning"),$("#"+e+"_editbutton_"+t).html('<span class="fa fa-2x fa-pencil-square-o"></span><br>Edit'),$("#"+e+"_editbutton_"+t).off("click").on("click",(function(){u(e,t)})),$("#"+e+"_deletebutton_"+t).addClass("list-group-item-danger").removeClass("disabled"),$("#"+e+"_deletebutton_"+t).off("click").on("click",(function(){x(e,t)})),!1}function f(e,t,a){var n=a+"_"+t,i="scm_"+e;return"update"!=$("#"+i+"_operation_"+n).val()&&("delete"==$("#"+i+"_operation_"+n).val()&&y(e,t,a),$("#"+i+"_editbutton_"+n).removeClass("list-group-item-info").addClass("list-group-item-warning"),$("#"+i+"_editbutton_"+n).html('<span class="fa fa-undo"></span>'),$("#"+i+"_editbutton_"+n).off("click").on("click",(function(){!function(e,t,a){var n=a+"_"+t;g(e,t,a),$("#scm_"+e+"_datapart_"+n).replaceWith(r["scm_"+e+"-"+n]),R("scm_"+e,n)}(e,t,a)})),$("#"+i+"_deletebutton_"+n).removeClass("list-group-item-danger").addClass("disabled"),$("#"+i+"_deletebutton_"+n).off("click").on("click",(function(){return!1})),$("#"+i+"_panel_"+n).removeClass("panel-default").addClass("alert-info").addClass("edited-component"),p(i,n))}function g(e,t,a){var n=a+"_"+t;return m("scm_"+e,n),$("#scm_"+e+"_editbutton_"+n).addClass("list-group-item-info").removeClass("list-group-item-warning"),$("#scm_"+e+"_editbutton_"+n).html('<span class="fa fa-pencil-square-o"></span>'),$("#scm_"+e+"_editbutton_"+n).off("click").on("click",(function(){f(e,t,a)})),$("#scm_"+e+"_deletebutton_"+n).addClass("list-group-item-danger").removeClass("disabled"),$("#scm_"+e+"_deletebutton_"+n).off("click").on("click",(function(){y(e,t,a)})),!1}function h(e,t){return"delete"!=$("#"+e+"_operation_"+t).val()?($("#"+e+"_remove_"+t).removeClass("btn-danger").addClass("btn-warning"),$("#"+e+"_remove_"+t).html('<i class="fa fa-undo" aria-hidden="true"></i>')):($("#"+e+"_remove_"+t).removeClass("btn-warning").addClass("btn-danger"),$("#"+e+"_remove_"+t).html('<span class="glyphicon glyphicon-minus-sign"></span>')),b(e,t)}function x(e,t){return"delete"!=$("#"+e+"_operation_"+t).val()?($("#"+e+"_deletebutton_"+t).removeClass("list-group-item-danger").addClass("list-group-item-warning"),$("#"+e+"_deletebutton_"+t).html('<span class="fa fa-2x fa-undo"></span><br>Undo'),$("#"+e+"_editbutton_"+t).removeClass("list-group-item-info").addClass("disabled"),$("#"+e+"_editbutton_"+t).off("click").on("click",(function(){return!1})),$("#"+e+"_datebutton_"+t).removeClass("list-group-item-success").addClass("disabled").prop("disabled",!0),$("#"+e+"_scmbutton_"+t).removeClass("list-group-item-success").addClass("disabled").prop("disabled",!0)):($("#"+e+"_deletebutton_"+t).removeClass("list-group-item-warning").addClass("list-group-item-danger"),$("#"+e+"_deletebutton_"+t).html('<span class="fa fa-2x fa-trash-o"></span><br>Trash'),$("#"+e+"_editbutton_"+t).addClass("list-group-item-info").removeClass("disabled"),$("#"+e+"_editbutton_"+t).off("click").on("click",(function(){u(e,t)})),$("#"+e+"_datebutton_"+t).addClass("list-group-item-success").removeClass("disabled").prop("disabled",!1),$("#"+e+"_scmbutton_"+t).addClass("list-group-item-success").removeClass("disabled").prop("disabled",!1)),b(e,t)}function b(e,t){if("delete"!=$("#"+e+"_operation_"+t).val())$("#"+e+"_panel_"+t).removeClass("panel-default").addClass("alert-danger").addClass("deleted-component"),$("#"+e+"_operation_"+t).val("delete");else{$("#"+e+"_panel_"+t).removeClass("alert-danger").addClass("panel-default").removeClass("deleted-component");var a=!1;$("select[id^='"+e+"_']").each((function(){var e=$(this);e.attr("id").endsWith("_"+t)&&!e.attr("id").endsWith("ZZ")&&(a=!0)})),a?""!=$("#"+e+"_id_"+t).val()?$("#"+e+"_operation_"+t).val("update"):$("#"+e+"_operation_"+t).val("insert"):$("#"+e+"_operation_"+t).val("")}return i(!0),!1}function y(e,t,a){var n=a+"_"+t;return"delete"!=$("#scm_"+e+"_operation_"+n).val()?($("#scm_"+e+"_deletebutton_"+n).removeClass("list-group-item-danger").addClass("list-group-item-warning"),$("#scm_"+e+"_deletebutton_"+n).html('<span class="fa fa-undo"></span>'),$("#scm_"+e+"_editbutton_"+n).removeClass("list-group-item-info").addClass("disabled"),$("#scm_"+e+"_editbutton_"+n).off("click").on("click",(function(){return!1}))):($("#scm_"+e+"_deletebutton_"+n).removeClass("list-group-item-warning").addClass("list-group-item-danger"),$("#scm_"+e+"_deletebutton_"+n).html('<span class="fa fa-trash-o"></span>'),$("#scm_"+e+"_editbutton_"+n).addClass("list-group-item-info").removeClass("disabled"),$("#scm_"+e+"_editbutton_"+n).off("click").on("click",(function(){f(e,t,a)}))),b("scm_"+e,n)}function k(e,t){$("#"+e+"_editbutton_"+t).on("click",(function(){u(e,t)})),$("#"+e+"_deletebutton_"+t).on("click",(function(){x(e,t)}))}function R(e,t){$((function(){$("#"+e+"_panel_"+t+' [data-toggle="tooltip"]').tooltip()})),$((function(){$("#"+e+"_panel_"+t+' [data-toggle="popover"]').popover({trigger:"hover",container:"body"})}))}function C(e){var t=1;$("#place_address_next_j_"+e).exists()&&(t=parseInt($("#place_address_next_j_"+e).text())),console.log("Creating new address line for place "+e+" with id: "+t),i(!0);var a=$("#addressline_template").clone().html().replace(/ZZ/g,e).replace(/YY/g,t);return $("#place_address_add_div_"+e).before(a),$("#place_address_"+t+"_operation_1").val("insert"),p("place_address_"+t,e),vocab_select_replace($("#place_address_"+t+"_type_id_"+e),"_"+e,"address_part",0),$("#place_address_next_j_"+e).text(++t),!1}function Z(e){!function(e){$("#nameEntry_datapart_"+e).find(".name-parser").remove()}(e);var t=1;$("#nameEntry_component_next_j_"+e).exists()&&(t=parseInt($("#nameEntry_component_next_j_"+e).text())),console.log("Creating new name entry component for nameEntry "+e+" with id: "+t),"700"!==$("#entityType").val()||0!=t||$("#nameEntry_panel_"+e).find(".name-parser").length||0!==$("#nameEntry_component_1_panel_"+e).length||$("#nameEntry_component_add_"+e).after('<button class="btn btn-primary name-parser" id="nameEntry_parse_'+e+'" style="margin-left:5px;"> <i class="fa fa-magic" aria-hidden="true"></i> Parse </button>'),i(!0);var a=$("#component_template").clone().html().replace(/ZZ/g,e).replace(/YY/g,t);return $("#nameEntry_component_add_div_"+e).before(a),$("#nameEntry_component_"+t+"_operation_1").val("insert"),p("nameEntry_component_"+t,e),vocab_select_replace($("#nameEntry_component_"+t+"_type_id_"+e),"_"+e,"name_component",0),$("#nameEntry_component_next_j_"+e).text(++t),!1}function E(e){var t="",a=[];$("#nameEntry_panel_"+e+" div[id^='nameEntry_component_']").each((function(){var t=$(this);if(!t.hasClass("deleted-component")&&t.attr("id").endsWith("_panel_"+e)&&!t.attr("id").endsWith("ZZ")){var n=t.attr("id").replace("nameEntry_component_","").replace("_panel_"+e,""),i=$("#nameEntry_component_"+n+"_type_id_"+e+" option:selected").text(),r=$("#nameEntry_component_"+n+"_text_"+e).val();a.push([i,r])}}));var n=$("#entityType option:selected").text();t=combineNameHeading(a,n),$("#nameEntry_heading_"+e).text(t.trim()),$("#nameEntry_original_"+e).val(t.trim())}function I(e){var t=1;$("#nameEntry_rule_next_j_"+e).exists()&&(t=parseInt($("#nameEntry_rule_next_j_"+e).text())),console.log("Creating new name entry rule for nameEntry "+e+" with id: "+t),i(!0);var a=$("#rule_template").clone().html().replace(/ZZ/g,e).replace(/YY/g,t);return $("#nameEntry_rule_add_div_"+e).before(a),$("#nameEntry_rule_"+t+"_operation_1").val("insert"),R("nameEntry_rule_"+t,e),p("nameEntry_rule_"+t,e),$("#nameEntry_rule_next_j_"+e).text(++t),!1}function D(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}function w(e,t){$("div[id^='date_"+e+"']").each((function(){var a=$(this);if(a.attr("id").endsWith("_"+t)&&!a.attr("id").endsWith("ZZ")){var n=a.attr("id").replace("date_","").replace(e+"_",""),i=new RegExp("_"+t+"$","g"),r=n.replace(i,"");if($("#"+e+"_"+r+"_year_"+t).exists()){var o=$("#"+e+"_"+r+"_year_"+t).val(),l=$("#"+e+"_"+r+"_day_"+t).val(),s=$("#"+e+"_"+r+"_month_"+t+" option:selected").val(),c="";""!=o&&(c+=D(o,4),""!=s&&(c+="-"+D(s,2),""!=l&&(c+="-"+D(l,2)))),$("#"+e+"_"+r+"_"+t).val(c)}}}))}function T(e=""){var t="";""!=e&&(t="#"+e+" "),$(t+"a[id*='editbutton']").each((function(){var e=$(this),t=e.attr("id").split("_");if(3==t.length){var a=t[0],n=t[2];e.on("click",(function(){u(a,n)}))}else if(5==t.length&&"scm"==t[0]){a=t[1],n=t[4];var i=t[3];e.on("click",(function(){f(a,n,i)}))}else if(5==t.length){a=t[0]+"_"+t[1]+"_"+t[2],n=t[4];e.on("click",(function(){u(a,n)}))}})),$(t+"a[id*='deletebutton']").each((function(){var e=$(this),t=e.attr("id").split("_");if(3==t.length){var a=t[0],n=t[2];e.on("click",(function(){x(a,n)}))}else if(5==t.length&&"scm"==t[0]){a=t[1],n=t[4];var i=t[3];e.on("click",(function(){y(a,n,i)}))}else if(5==t.length){a=t[0]+"_"+t[1]+"_"+t[2],n=t[4];e.on("click",(function(){x(a,n)}))}}))}function O(e=""){var t="";""!=e&&(t="#"+e+" "),$((function(){$(t+'[data-toggle="tooltip"]').tooltip()})),$((function(){$(t+'[data-toggle="popover"]').popover({trigger:"hover",container:"body"})}))}function W(e,t,a){$("#"+e+"_relationPictureArrow_"+t).text(a)}function U(e,t,a){$("#"+e+"_relationPictureTitle_"+t).text(a)}d=null;function S(){$("input[id^='place_geoplace_id_']").each((function(){var e=$(this);null!=e.val()&&""!=e.val()&&$.get(snacUrl+"/vocabulary/read?type=geoPlace&id="+e.val(),null,(function(e){e.term&&(d||(d=new Array),d.push(e.term))}))}))}function A(e,t,a){var n=$("#"+e);n.select2("destroy"),n.val(a),geovocab_select_replace(n,"_"+t),j("place",t,a)}function j(e,t,a){var n=null;return geoPlaceSearchResults||d?(geoPlaceSearchResults&&geoPlaceSearchResults.forEach((function(e){e.id==a&&(n=e)})),!n&&d&&d.forEach((function(e){e.id==a&&(n=e)})),n?($("#"+e+"_confirmed_"+t).val("true"),$("#"+e+"_geoterm_text_"+t).text(n.name),$("#"+e+"_geoterm_caption_"+t).text(n.administrationCode+", "+n.countryCode),void(n.latitude&&n.longitude?($("#"+e+"_geoterm_maplink_"+t).prop("onclick",null).off("click"),$("#"+e+"_geoterm_maplink_"+t).on("click",(function(){return openGeoPlaceViewer(n.id),!1})),$("#"+e+"_geoterm_maplink_"+t).removeClass("disabled")):($("#"+e+"_geoterm_maplink_"+t).addClass("disabled"),$("#"+e+"_geoterm_maplink_"+t).prop("onclick",null).off("click")))):($("#"+e+"_confirmed_"+t).val("false"),$("#"+e+"_geoterm_maplink_"+t).addClass("disabled"),$("#"+e+"_geoterm_maplink_"+t).off("click"),void(""!=$("#"+e+"_original_"+t).val()?($("#"+e+"_geoterm_text_"+t).html("<em>Unconfirmed</em>"),$("#"+e+"_geoterm_caption_"+t).text("Recorded as: "+$("#"+e+"_original_"+t).val())):($("#"+e+"_geoterm_text_"+t).text("--"),$("#"+e+"_geoterm_caption_"+t).text("GeoPlace term not specified"))))):($("#"+e+"_confirmed_"+t).val("false"),$("#"+e+"_geoterm_text_"+t).html("<em>Unconfirmed</em>"),$("#"+e+"_geoterm_maplink_"+t).addClass("disabled"),$("#"+e+"_geoterm_maplink_"+t).prop("onclick",null).off("click"),void(""!=$("#"+e+"_original_"+t).val()?$("#"+e+"_geoterm_caption_"+t).text("Recorded as: "+$("#"+e+"_original_"+t).val()):$("#"+e+"_geoterm_caption_"+t).text()))}function N(e,t){if(void 0!==typeof o[t]){var a={id:o[t].id,text:o[t].term};if($("#"+e).find("option[value='"+a.id+"']").length)$("#"+e).val(a.id).trigger("change");else{var n=new Option(a.text,a.id,!1,!0);$("#"+e).append(n).trigger("change")}}}function G(e,t,a,n){var i=t.attr("id").split("_")[2];t.find(".reorderable").replaceWith('<div style="margin-left:10%; font-size: 14x; font-style:italic; color: #777777;"> Name: '+a+"</div>");for(var r={},o=0;o<n.length;o++)r[n[o].text]=n[o].id;for(var l in e)if("NameAdditions"==l){l="NameAddition";for(var s=0;s<e.NameAdditions.length;s++){Z(i);var c=new Option(l,r[l],!1,!0);$partType=t.find("select:last"),$partType.append(c).trigger("change"),$textbox=t.find("input[type='text']:last"),$textbox.val(e.NameAdditions[s]),$partType.append(c).trigger("change")}}else if(e[l]&&r[l]){Z(i);c=new Option(l,r[l],!1,!0);$partType=t.find("select:last"),$partType.append(c).trigger("change"),$textbox=t.find("input[type='text']:last"),$textbox.val(e[l]),$partType.append(c).trigger("change")}$("#nameEntry_datapart_"+i).find(".name-parser").remove(),E(i)}$(document).ready((function(){S(),$("#nameEntries").on("click",".name-parser",(function(e){e.preventDefault(),function(e){$("#name-parser-options").text("");var t,a=$(e.target).closest(".name-components"),n=(a.find("select:last"),a.find('input[type="text"]:last').val()),i=$("#entityType").text().trim();$("#name-parser-type").text((t=i)[0].toUpperCase()+t.slice(1)),$("#name-parser-original").text(n);var r=(new NameParser).guessPerson(n),o="",l=0;r.forEach((function(e){for(var t in e)e[t]&&0!=e[t].length&&(o+="<li><span style='font-weight: bold;'>"+t+"</span>: "+e[t]+"</li>");$("#name-parser-options").append("<div class='radio'><label class='radio form-inline' for='name-parser-option-"+l+"'><input type='radio' name='parsed-names' id='name-parser-option-"+l+"'><ul class='list-unstyled'>"+o+"</ul></label> </div>"),$("#name-parser-options").find("input[type='radio']:last").data("parsed-name",e),o="",l++})),$("#name-parser-options").find("input[type='radio']:first").prop("checked",!0),$("#parser-accept-btn").unbind("click"),$("#parser-accept-btn").on("click",(function(){var e=$('#name-parser input[type="radio"]:checked').data("parsed-name");$.get(snacUrl+"/vocabulary/?type=name_component&entity_type=700").done((function(t){G(e,a,n,t.results)}))}))}(e),$("#name-parser").modal("toggle")})),$("#name-parser").on("shown.bs.modal",(function(){$("#parser-accept-btn").focus()})),"insert"==$("#operation").val()&&i(!0),T(),$("#entityType").exists()&&$("#entityType").change((function(){i(!0),null!=$("#constellationid").val()&&""!=$("#constellationid").val()&&$("#operation").val("update")}));var e=1;$("#next_nameEntry_i").exists()&&(e=parseInt($("#next_nameEntry_i").text())),console.log("Next NameEntry ID: "+e),$("#btn_add_nameEntry").exists()&&$("#btn_add_nameEntry").click((function(){i(!0);var t=$("#nameEntry_template").clone().html().replace(/ZZ/g,e);return $("#add_nameEntry_div").after(t),k("nameEntry",e),R("nameEntry",e),u("nameEntry",e),e+=1,!1}));var t=1,a=!1;$("#genderstab").exists()&&$("#genderstab").click((function(){a||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=genders",null,(function(e){a=!0,$("#genders").html(e),T("genders"),$("#next_gender_i").exists()&&(t=parseInt($("#next_gender_i").text())),console.log("Next Gender ID: "+t),$("#btn_add_gender").exists()&&$("#btn_add_gender").click((function(){i(!0);var e=$("#gender_template").clone().html().replace(/ZZ/g,t);return $("#add_gender_div").after(e),k("gender",t),R("gender",t),u("gender",t),t+=1,!1})),O("genders")}))}));var n=1,r=!1;$("#existstab").exists()&&$("#existstab").click((function(){r||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=dates",null,(function(e){r=!0,$("#dates").html(e),T("dates"),$("#next_exist_i").exists()&&(n=parseInt($("#next_exist_i").text())),console.log("Next Exist Date ID: "+n),$("#btn_add_exist_date").exists()&&$("#btn_add_exist_date").click((function(){i(!0);var e=$("#exist_date_template").clone().html().replace(/ZZ/g,n);return $("#add_exist_div").after(e),k("exist",n),R("exist",n),u("exist",n),n+=1,!1})),$("#btn_add_exist_dateRange").exists()&&$("#btn_add_exist_dateRange").click((function(){i(!0);var e=$("#exist_dateRange_template").clone().html().replace(/ZZ/g,n);return $("#add_exist_div").after(e),k("exist",n),R("exist",n),u("exist",n),n+=1,!1})),O("dates")}))}));var o=1,l=!1;$("#sameAstab").exists()&&$("#sameAstab").click((function(){l||($.get(snacUrl+"/vocabulary?type=record_type&q=SameAs",null,(function(e){sameAsTermId=e.results[0].id,$("#sameAs_type_id_ZZ").val(sameAsTermId)})),$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=sameAs",null,(function(e){l=!0,$("#sameAs").html(e),T("sameAs"),$("#next_sameAs_i").exists()&&(o=parseInt($("#next_sameAs_i").text())),console.log("Next sameAs ID: "+o),$("#btn_add_sameAs").exists()&&$("#btn_add_sameAs").click((function(){i(!0);var e=$("#sameAs_template").clone().html().replace(/ZZ/g,o);return $("#add_sameAs_div").after(e),k("sameAs",o),R("sameAs",o),u("sameAs",o),o+=1,!1})),O("sameAs")})))}));var s=1,c=!1;$("#entityIDtab").exists()&&$("#entityIDtab").click((function(){c||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=entityID",null,(function(e){c=!0,$("#entityID").html(e),T("entityID"),$("#next_entityID_i").exists()&&(s=parseInt($("#next_entityID_i").text())),console.log("Next entityID ID: "+s),$("#btn_add_entityID").exists()&&$("#btn_add_entityID").click((function(){i(!0);var e=$("#entityID_template").clone().html().replace(/ZZ/g,s);return $("#add_entityID_div").after(e),k("entityID",s),R("entityID",s),u("entityID",s),s+=1,!1})),O("entityID")}))}));var _=1,d=!1;$("#sourcestab").exists()&&$("#sourcestab").click((function(){d||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=sources",null,(function(e){d=!0,$("#sources").html(e),T("sources"),$("#next_source_i").exists()&&(_=parseInt($("#next_source_i").text())),console.log("Next source ID: "+_),$("#btn_add_source").exists()&&$("#btn_add_source").click((function(){i(!0);var e=$("#source_template").clone().html().replace(/ZZ/g,_);return $("#add_source_div").after(e),k("source",_),R("source",_),u("source",_),_+=1,!1})),O("sources")}))}));var p=1,m=!1;$("#resourceRelationstab").exists()&&$("#resourceRelationstab").click((function(){m||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=resourceRelations",null,(function(e){m=!0,$("#resourceRelations").html(e),T("resourceRelations"),$("#next_resourceRelation_i").exists()&&(p=parseInt($("#next_resourceRelation_i").text())),console.log("Next resourceRelation ID: "+p),$("#btn_create_resourceRelation").exists()&&$("#btn_create_resourceRelation").click((function(){var e=$("input[name=resourceChoice]:checked","#resource_search_form").val();if(null!=e&&null!=resourceResults&&"new"!=e){i(!0);var t=$("#resourceRelation_template").clone().html().replace(/ZZ/g,p);return $("#add_resourceRelation_div").after(t),void 0!==resourceResults[e].id&&$("#resourceRelation_resourceid_"+p).val(resourceResults[e].id),void 0!==resourceResults[e].version&&$("#resourceRelation_resourceversion_"+p).val(resourceResults[e].version),void 0!==resourceResults[e].link&&$("#resourceRelation_linkText_"+p).html("<a target='_blank' href='"+resourceResults[e].link+"'>"+resourceResults[e].link+"</a> <a class='label label-info' target='_blank' href='"+resourceResults[e].link+"'>View</a>"),void 0!==resourceResults[e].displayEntry&&$("#resourceRelation_displayEntryText_"+p).text(resourceResults[e].displayEntry),void 0!==resourceResults[e].title&&($("#resourceRelation_titleText_"+p).text(resourceResults[e].title),U("resourceRelation",p,resourceResults[e].title)),void 0!==resourceResults[e].abstract&&$("#resourceRelation_abstractText_"+p).text(resourceResults[e].abstract),void 0!==resourceResults[e].extent&&$("#resourceRelation_extentText_"+p).text(resourceResults[e].extent),void 0!==resourceResults[e].documentType&&void 0!==resourceResults[e].documentType.term&&$("#resourceRelation_documentTypeText_"+p).text(resourceResults[e].documentType.term),$("#resourceRelation_linkText_"+p).after("<a class='control-label-subtext' target='_blank' href='"+snacUrl+"/vocab_administrator/resources/"+resourceResults[e].id+"'>View in SNAC</a>"),k("resourceRelation",p),R("resourceRelation",p),u("resourceRelation",p),p+=1,$("#resource-results-box").html(""),!0}return!1})),$("#btn_open_create_resource").exists()&&$("#btn_open_create_resource").click((function(){$("#resourceSearchPane").modal("hide"),setTimeout((function(){$("#resourceCreatePane").modal("show")}),500);var e=$("#resource_template").clone().html().replace(/ZZ/g,0);$("#resource-create-box").html(e);var t=$("#resource_create_form");-1==$("#resource-searchbox").val().indexOf("http")?t.find("#resource-title").val($("#resource-searchbox").val()):t.find("#resource-url").val($("#resource-searchbox").val()),t.find('[data-toggle="popover"]').popover({trigger:"hover",container:"body"}),loadVocabSelectOptions(t.find("#resource-type-select"),"document_type","Resource Type"),vocab_select_replace(t.find("#resource-repo"),"","holding",3),t.find("#new-resource-language-btn").on("click",newResourceLanguage),t.find("#magic-resource-language-btn").on("click",magicNewResourceLanguage),$("#search-results-box").on("click","a.list-group-item",selectHoldingRepository);var a=null;return t.find("#searchbox").keyup((function(){clearTimeout(a),a=setTimeout((function(){setSearchPosition(0),searchAndUpdate()}),500)})),$("#resource-results-box").html(""),!1})),$("#btn_create_resource").exists()&&$("#resource_create_form").on("submit",(function(){if(""!=$("#resource_create_form #resource-url").val()||confirm("Are you sure you want to save without an HREF?"))return $("#resource_create_form input, textarea").each((function(){$(this).val($.trim($(this).val()))})),setDeletedResourceLanguageOperations($("#resource_create_form")),$.post(snacUrl+"/save_resource",$("#resource_create_form").serialize(),(function(e){if(void 0!==e.result&&"false"!==e.result){i(!0);var t=$("#resourceRelation_template").clone().html().replace(/ZZ/g,p);return $("#add_resourceRelation_div").after(t),void 0!==e.resource.id&&$("#resourceRelation_resourceid_"+p).val(e.resource.id),void 0!==e.resource.version&&$("#resourceRelation_resourceversion_"+p).val(e.resource.version),void 0!==e.resource.link&&$("#resourceRelation_linkText_"+p).html("<a target='_blank' href='"+e.resource.link+"'>"+e.resource.link+"</a> <a class='label label-info' target='_blank' href='"+e.resource.link+"'>View</a>"),void 0!==e.resource.displayEntry&&$("#resourceRelation_displayEntryText_"+p).text(e.resource.displayEntry),void 0!==e.resource.title&&($("#resourceRelation_titleText_"+p).text(e.resource.title),U("resourceRelation",p,e.resource.title)),void 0!==e.resource.abstract&&$("#resourceRelation_abstractText_"+p).text(e.resource.abstract),void 0!==e.resource.extent&&$("#resourceRelation_extentText_"+p).text(e.resource.extent),void 0!==e.resource.documentType&&void 0!==e.resource.documentType.term&&$("#resourceRelation_documentTypeText_"+p).text(e.resource.documentType.term),$("#resourceRelation_linkText_"+p).after("<a class='control-label-subtext' target='_blank' href='"+snacUrl+"/vocab_administrator/resources/"+e.resource.id+"'>View in SNAC</a>"),k("resourceRelation",p),R("resourceRelation",p),u("resourceRelation",p),p+=1,$("#resourceCreatePane").modal("hide"),$("#resource-create-box").html(""),!0}return console.log(e),!1})),!1})),O("resourceRelations")}))}));var v=1,f=!1;$("#constellationRelationstab").exists()&&$("#constellationRelationstab").click((function(){f||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=constellationRelations",null,(function(e){f=!0,$("#constellationRelations").html(e),T("constellationRelations"),$("#next_constellationRelation_i").exists()&&(v=parseInt($("#next_constellationRelation_i").text())),console.log("Next constellationRelation ID: "+v),$("#btn_create_constellationRelation").exists()&&$("#btn_create_constellationRelation").click((function(){var e=$("input[name=relationChoice]:checked","#relation_search_form").val();if(null!=e){i(!0);var t=$("#constellationRelation_template").clone().html().replace(/ZZ/g,v);return $("#add_constellationRelation_div").after(t),$("#constellationRelation_targetID_"+v).val(e),$("#constellationRelation_content_"+v).val($("#relationChoice_nameEntry_"+e).val()),$("#constellationRelation_targetArkID_"+v).val($("#relationChoice_arkID_"+e).val()),$("#constellationRelation_targetEntityType_"+v).val($("#relationChoice_entityType_"+e).val()),function(e,t,a){var n="";"person"==a?n='<i class="fa fa-user" aria-hidden="true"></i><br/>':"corporateBody"==a?n='<i class="fa fa-building" aria-hidden="true"></i><br/>':"family"==a&&(n='<i class="fa fa-users" aria-hidden="true"></i><br/>'),$("#"+e+"_relationPictureIcon_"+t).html(n)}("constellationRelation",v,$("#relationChoice_entityTypeText_"+e).val()),U("constellationRelation",v,$("#relationChoice_nameEntry_"+e).val()),$("#constellationRelation_contentText_"+v).text($("#relationChoice_nameEntry_"+e).val()),$("#constellationRelation_targetArkIDText_"+v).text($("#relationChoice_arkID_"+e).val()),k("constellationRelation",v),R("constellationRelation",v),u("constellationRelation",v),v+=1,!0}return!1})),O("constellationRelations")}))}));var g=1,h=!1;$("#languagesUsedtab").exists()&&$("#languagesUsedtab").click((function(){h||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=languagesUsed",null,(function(e){h=!0,$("#languagesUsed").html(e),T("languagesUsed"),$("#next_language_i").exists()&&(g=parseInt($("#next_language_i").text())),console.log("Next language ID: "+g),$("#btn_add_language").exists()&&$("#btn_add_language").click((function(){i(!0);var e=$("#language_template").clone().html().replace(/ZZ/g,g);return $("#add_language_div").after(e),k("language",g),R("language",g),u("language",g),g+=1,!1})),O("languagesUsed")}))}));var x=1,b=!1;$("#subjectstab").exists()&&$("#subjectstab").click((function(){b||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=subjects",null,(function(e){b=!0,$("#subjects").html(e),T("subjects"),$("#next_subject_i").exists()&&(x=parseInt($("#next_subject_i").text())),console.log("Next subject ID: "+x),$("#btn_add_subject").exists()&&$("#btn_add_subject").click((function(){i(!0);var e=$("#subject_template").clone().html().replace(/ZZ/g,x);return $("#add_subject_div").after(e),k("subject",x),R("subject",x),u("subject",x),x+=1,!1})),O("subjects")}))}));var y=1,C=!1;$("#nationalitiestab").exists()&&$("#nationalitiestab").click((function(){C||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=nationalities",null,(function(e){C=!0,$("#nationalities").html(e),T("nationalities"),$("#next_nationality_i").exists()&&(y=parseInt($("#next_nationality_i").text())),console.log("Next nationality ID: "+y),$("#btn_add_nationality").exists()&&$("#btn_add_nationality").click((function(){i(!0);var e=$("#nationality_template").clone().html().replace(/ZZ/g,y);return $("#add_nationality_div").after(e),k("nationality",y),R("nationality",y),u("nationality",y),y+=1,!1})),O("nationalities")}))}));var Z=1,E=!1;$("#functionstab").exists()&&$("#functionstab").click((function(){E||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=functions",null,(function(e){E=!0,$("#functions").html(e),T("functions"),$("#next_function_i").exists()&&(Z=parseInt($("#next_function_i").text())),console.log("Next function ID: "+Z),$("#btn_add_function").exists()&&$("#btn_add_function").click((function(){i(!0);var e=$("#function_template").clone().html().replace(/ZZ/g,Z);return $("#add_function_div").after(e),k("function",Z),R("function",Z),u("function",Z),Z+=1,!1})),O("functions")}))}));var I=1,D=!1;$("#occupationstab").exists()&&$("#occupationstab").click((function(){D||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=occupations",null,(function(e){D=!0,$("#occupations").html(e),T("occupations"),$("#next_occupation_i").exists()&&(I=parseInt($("#next_occupation_i").text())),console.log("Next occupation ID: "+I),$("#btn_add_occupation").exists()&&$("#btn_add_occupation").click((function(){i(!0);var e=$("#occupation_template").clone().html().replace(/ZZ/g,I);return $("#add_occupation_div").after(e),k("occupation",I),R("occupation",I),u("occupation",I),I+=1,!1})),O("occupations")}))}));var w=1,W=!1;$("#legalStatusestab").exists()&&$("#legalStatusestab").click((function(){W||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=legalStatuses",null,(function(e){W=!0,$("#legalStatuses").html(e),T("legalStatuses"),$("#next_legalStatus_i").exists()&&(w=parseInt($("#next_legalStatus_i").text())),console.log("Next legalStatus ID: "+w),$("#btn_add_legalStatus").exists()&&$("#btn_add_legalStatus").click((function(){i(!0);var e=$("#legalStatus_template").clone().html().replace(/ZZ/g,w);return $("#add_legalStatus_div").after(e),k("legalStatus",w),R("legalStatus",w),u("legalStatus",w),w+=1,!1})),O("legalStatuses")}))}));var A=1,j=!1;$("#placestab").exists()&&$("#placestab").click((function(){j||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=places",null,(function(e){j=!0,$("#places").html(e),S(),T("places"),$("#next_place_i").exists()&&(A=parseInt($("#next_place_i").text())),console.log("Next place ID: "+A),$("#btn_add_place").exists()&&$("#btn_add_place").click((function(){i(!0);var e=$("#place_template").clone().html().replace(/ZZ/g,A);return $("#add_place_div").after(e),k("place",A),R("place",A),u("place",A),A+=1,!1})),O("places")}))}));var N=1,H=!1;$("#conventionDeclarationstab").exists()&&$("#conventionDeclarationstab").click((function(){H||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=conventionDeclarations",null,(function(e){H=!0,$("#conventionDeclarations").html(e),T("conventionDeclarations"),$("#next_conventionDeclaration_i").exists()&&(N=parseInt($("#next_conventionDeclaration_i").text())),console.log("Next conventionDeclaration ID: "+N),$("#btn_add_conventionDeclaration").exists()&&$("#btn_add_conventionDeclaration").click((function(){i(!0);var e=$("#conventionDeclaration_template").clone().html().replace(/ZZ/g,N);return $("#add_conventionDeclaration_div").after(e),k("conventionDeclaration",N),R("conventionDeclaration",N),u("conventionDeclaration",N),N+=1,!1})),O("conventionDeclarations")}))}));var P=1,M=!1;$("#generalContextstab").exists()&&$("#generalContextstab").click((function(){M||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=generalContexts",null,(function(e){M=!0,$("#generalContexts").html(e),T("generalContexts"),$("#next_generalContext_i").exists()&&(P=parseInt($("#next_generalContext_i").text())),console.log("Next generalContext ID: "+P),$("#btn_add_generalContext").exists()&&$("#btn_add_generalContext").click((function(){i(!0);var e=$("#generalContext_template").clone().html().replace(/ZZ/g,P);return $("#add_generalContext_div").after(e),k("generalContext",P),R("generalContext",P),u("generalContext",P),P+=1,!1})),O("generalContexts")}))}));var Y=1,z=!1;$("#structureOrGenealogiestab").exists()&&$("#structureOrGenealogiestab").click((function(){z||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=structureOrGenealogies",null,(function(e){z=!0,$("#structureOrGenealogies").html(e),T("structureOrGenealogies"),$("#next_structureOrGenealogy_i").exists()&&(Y=parseInt($("#next_structureOrGenealogy_i").text())),console.log("Next structureOrGenealogy ID: "+Y),$("#btn_add_structureOrGenealogy").exists()&&$("#btn_add_structureOrGenealogy").click((function(){i(!0);var e=$("#structureOrGenealogy_template").clone().html().replace(/ZZ/g,Y);return $("#add_structureOrGenealogy_div").after(e),k("structureOrGenealogy",Y),R("structureOrGenealogy",Y),u("structureOrGenealogy",Y),Y+=1,!1})),O("structureOrGenealogies")}))}));var K=1,V=!1;$("#mandatestab").exists()&&$("#mandatestab").click((function(){V||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=mandates",null,(function(e){V=!0,$("#mandates").html(e),T("mandates"),$("#next_mandate_i").exists()&&(K=parseInt($("#next_mandate_i").text())),console.log("Next mandate ID: "+K),$("#btn_add_mandate").exists()&&$("#btn_add_mandate").click((function(){i(!0);var e=$("#mandate_template").clone().html().replace(/ZZ/g,K);return $("#add_mandate_div").after(e),k("mandate",K),R("mandate",K),u("mandate",K),K+=1,!1})),O("mandates")}))}));var L=1,F=!1;$("#biogHiststab").exists()&&$("#biogHiststab").click((function(){F||$.get(snacUrl+"/edit_part/"+$("#constellationid").val()+"/"+$("#version").val()+"?part=biogHists",null,(function(e){F=!0,$("#biogHists").html(e),T("biogHists"),$("#next_biogHist_i").exists()&&(L=parseInt($("#next_biogHist_i").text())),console.log("Next biogHist ID: "+L),$("#btn_add_biogHist").exists()&&$("#btn_add_biogHist").click((function(){i(!0);var e=$("#biogHist_template").clone().html().replace(/ZZ/g,L);return $("#add_biogHist_div").after(e),k("biogHist",L),R("biogHist",L),u("biogHist",L),L+=1,!1})),O("biogHists")}))})),O(),$("#info-dropdown").click((function(e){$(this).parent().toggleClass("open"),e.stopPropagation()}))}))}}));
//# sourceMappingURL=edit_scripts.js.map