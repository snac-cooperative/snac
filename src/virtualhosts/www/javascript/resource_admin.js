!function(e,n){for(var t in n)e[t]=n[t]}(window,function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";
/**
 * Resource Admin Actions
 *
 * Contains code that handles Resource creation and editing
 *
 * @author Joseph Glass
 * @license https://opensource.org/licenses/BSD-3-Clause BSD 3-Clause
 * @copyright 2015 the Rector and Visitors of the University of Virginia, and
 *            the Regents of the University of California
 */
function r(e){e.preventDefault();var n=$(e.target);if(""!=n.find("#resource-url").val()||confirm("Are you sure you want to save without an HREF?"))return $("#notification-message").slideDown().html("<p>Saving Resource... Please wait.</p>"),n.find("input, textarea").each((function(){$(this).val($.trim($(this).val()))})),a(n),$.post(snacUrl+"/save_resource",n.serialize()).done((function(e){if(createdResource=e,void 0===e.resource)return $("#error-message").slideDown(),!1;$("#notification-message").slideUp(),$("#success-message").slideDown(),setTimeout((function(){window.location=snacUrl+"/vocab_administrator/resources/"+e.resource.id}),1e3)})).fail((function(){$("#error-message").slideDown()})),!1}function a(e){var n=e.find("#resource-languages .component-deleted").has("input[id]"),t=e.find("#resource-languages .component-deleted.new-language");l(n,"delete"),l(t,"")}function o(){if(confirm("Are you sure you want to cancel?"))return $("#notification-message").html("<p>Cancelling...</p>"),$("#notification-message").slideDown(),setTimeout((function(){window.location.href=snacUrl+"/vocab_administrator"}),1e3),!1}function u(e){e.preventDefault();var n=$("#resource-language-template").find(".language").clone(),t=$("#resource-language-template").data(),r="language_"+t.languageCount;return n.attr("id",r),n.find(".operation").val("insert"),n.addClass("new-language"),n.find("input, select").attr("name",(function(e,n){return n.replace("YY",t.languageCount)})),console.log("Adding new resource language with id: ",r),n.toggle(),$(".add-resource-language:last").before(n),d(n),t.languageCount++,n}function i(e){e.preventDefault();var n=$(e.currentTarget);n.toggleClass("btn-danger btn-warning"),n.find(":only-child").toggleClass("fa-minus-circle fa-undo"),n.closest(".language").toggleClass("alert-danger component-deleted")}function l(e,n){e.find(".operation").each((function(){$(this).val(n)}))}function s(e){e.find("input, select, textarea").on("change",(function(e){$(e.target).addClass("edited-field"),$(e.target).closest(".language").length&&l($(e.target).closest(".language"),"update")}))}function c(e,n){e.select2({ajax:{url:snacUrl+"/vocabulary?type="+n,dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,n){return{results:e.results}},cache:!0},width:"100%",minimumInputLength:0,allowClear:!0,theme:"bootstrap",placeholder:"Select"})}function d(e){c(e.find("select:first"),"language_code"),c(e.find("select:last"),"script_code")}function g(e){var n=u(e),t=new Option(defaults.language.term,defaults.language.id,!1,!0),r=new Option(defaults.script.term,defaults.script.id,!1,!0);n.find("select:first").append(t).trigger("change"),n.find("select:last").append(r).trigger("change")}function f(e){e.preventDefault();var n=e.target.innerHTML,t=e.target.href.split("/").pop(),r=new Option(n,t,!1,!0);$(".resource-repo:last").append(r).trigger("change"),$("#search_form").slideToggle(),$("#search-results-box").html(""),$("#searchbox").val("")}t.r(n),t.d(n,"saveResource",(function(){return r})),t.d(n,"setDeletedResourceLanguageOperations",(function(){return a})),t.d(n,"cancelResource",(function(){return o})),t.d(n,"newResourceLanguage",(function(){return u})),t.d(n,"deleteOrUndoLanguage",(function(){return i})),t.d(n,"markEditedResourceFields",(function(){return s})),t.d(n,"enableLanguageSelect",(function(){return d})),t.d(n,"magicNewResourceLanguage",(function(){return g})),t.d(n,"selectHoldingRepository",(function(){return f}))}]));
//# sourceMappingURL=resource_admin.js.map