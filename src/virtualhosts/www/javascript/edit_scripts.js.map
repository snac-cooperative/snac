{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/virtualhosts/www/javascript/src/edit_scripts.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","somethingHasBeenEdited","setEditedFlag","val","$","addClass","removeClass","undoSet","Array","defaults","language","id","term","script","displayErrorMessage","err","data","errorMsg","message","type","html","snacUrl","setTimeout","slideDown","console","log","addDateEntry","short","j","parseInt","text","clone","replace","after","turnOnButtons","turnOnTooltips","makeEditable","addDateRangeEntry","addSCMEntry","shortName","on","makeSCMEditable","setSCMDeleted","turnOnSCMButtons","geoPlaceLoadResults","setDeleted","off","makeUneditable","replaceWith","each","this","bootstrapToggle","undoEdit","subMakeEditable","idStr","cont","attr","endsWith","divStr","regex","RegExp","size","sizeStr","exists","placeholder","onKeyUp","onKeyUpStr","textToTextArea","placeholderOn","placeholderOff","textToCheckbox","idstr","obj","removeAttr","indexOf","CodeMirror","fromTextArea","lineNumbers","lineWrapping","viewportMargin","Infinity","sawSelect","vocabtype","minlength","options","scm_source_select_replace","vocab_select_replace","textToSelect","firstOptionSelect","secondOptionSelect","geovocab_select_replace","textToGeoPlaceSelect","pieces","dateStr","dateParts","split","length","year","month","day","forEach","mInt","select2","width","allowClear","theme","textToDate","sortable","items","opacity","update","event","ui","neworder","orderedID","index","updateNameEntryHeading","change","updatePictureArrow","updatePlaceHeading","find","subMakeUneditable","hasClass","toTextArea","inputToText","textAreaToText","checked","prop","checkboxToText","additionalStyle","postText","selectToText","geoPlaceSelectToText","updateDate","dateToText","scmShortName","makeSCMUneditable","undoSCMEdit","setRepeatedDataDeleted","subSetDeleted","tooltip","popover","trigger","container","newAddressLine","nextid","before","newNameEntryComponent","remove","removeParserButton","components","partText","push","entityType","combineNameHeading","trim","newNameEntryRule","pad","num","turnOnEditDeleteButtons","part","divID","turnOnTooltipsForTab","newValue","updatePictureTitle","loadGeoPlaceResultCache","chooseSuggestedGeoPlace","selectID","place","geoPlaceSearchResults","result","administrationCode","countryCode","latitude","longitude","openGeoPlaceViewer","magicDefaultFill","vocabType","undefined","newOption","Option","append","acceptParsedName","selectedName","$nameComponents","nameComponentIDs","nameComponentMap","k","option","$partType","$textbox","document","ready","preventDefault","e","word","target","closest","toUpperCase","slice","guesses","NameParser","guessPerson","parsedOption","counter","guess","unbind","done","results","parseName","modal","focus","nameEntryid","click","genderid","genderOpen","existid","existOpen","sameAsid","sameAsOpen","sameAsTermId","entityIDid","entityIDOpen","sourceid","sourceOpen","resourceRelationid","resourceRelationOpen","rid","resourceResults","version","link","displayEntry","title","abstract","extent","documentType","$resourceForm","loadVocabSelectOptions","newResourceLanguage","magicNewResourceLanguage","selectHoldingRepository","timeoutID","keyup","clearTimeout","setSearchPosition","searchAndUpdate","confirm","setDeletedResourceLanguageOperations","post","serialize","resource","constellationRelationid","constellationRelationOpen","cid","updatePictureIcon","languageid","languageOpen","subjectid","subjectOpen","nationalityid","nationalityOpen","functionid","functionOpen","occupationid","occupationOpen","legalStatusid","legalStatusOpen","placeid","placeOpen","conventionDeclarationid","conventionDeclarationOpen","generalContextid","generalContextOpen","structureOrGenealogyid","structureOrGenealogyOpen","mandateid","mandateOpen","biogHistid","biogHistOpen","parent","toggleClass","stopPropagation"],"mappings":"4DACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,iCClFrD;;;;;;;;;;;AAWA,IAGWC,GAAyB,EAE7B,SAASC,EAAcC,GACf,GAAPA,EACDC,EAAE,sBAAsBC,SAAS,eAEjCD,EAAE,sBAAsBE,YAAY,eAEvCL,EAAyBE,EAKtB,IAAII,EAAU,IAAIC,MAEdC,EAAW,CAClBC,SAAU,CACNC,GAAI,IACJC,KAAM,OAEVC,OAAQ,CACJF,GAAI,IACJC,KAAM,SAaP,SAASE,EAAoBC,EAAKC,GACrC,IAAIC,EAAW,GAEXA,OADe,IAARF,EACI,8BACU,iBAARA,EACFA,EACNA,EAAIG,QACEH,EAAIG,QACVH,EAAII,KACEJ,EAAII,KAEJ,8BAEff,EAAE,kBAAkBgB,KAAK,mBAAmBH,EAAnB,oKAKHI,QALG,4EASzBC,YAAW,WACPlB,EAAE,kBAAkBmB,cACrB,KAGHC,QAAQC,IAAIT,GAYT,SAASU,EAAaC,EAAO1D,GAEnC,IAAI2D,EAAIC,SAASzB,EAAE,cAAcuB,EAAM,IAAI1D,EAAE,MAAM6D,QAEhD5B,GAAc,GAEjB,IACOkB,EADIhB,EAAE,sBAAsB2B,QAChBX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOJ,GAAGI,QAAQ,SAAUL,GAM7E,OALAvB,EAAE,aAAauB,EAAM,IAAI1D,EAAE,QAAQgE,MAAMb,GACzChB,EAAE,cAAcuB,EAAM,IAAI1D,EAAE,MAAM6D,KAAKF,EAAI,GAC3CM,EAAcP,EAAM,QAAQC,EAAG3D,GAC/BkE,EAAeR,EAAM,SAASC,EAAG3D,GACjCmE,EAAaT,EAAQ,SAASC,EAAG3D,IAC1B,EAYJ,SAASoE,EAAkBV,EAAO1D,GAExC,IAAI2D,EAAIC,SAASzB,EAAE,cAAcuB,EAAM,IAAI1D,EAAE,MAAM6D,QAEhD5B,GAAc,GAEjB,IACOkB,EADIhB,EAAE,2BAA2B2B,QACrBX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOJ,GAAGI,QAAQ,SAAUL,GAM7E,OALAvB,EAAE,aAAauB,EAAM,IAAI1D,EAAE,QAAQgE,MAAMb,GACzChB,EAAE,cAAcuB,EAAM,IAAI1D,EAAE,MAAM6D,KAAKF,EAAI,GAC3CM,EAAcP,EAAM,QAAQC,EAAG3D,GAC/BkE,EAAeR,EAAM,SAASC,EAAG3D,GACjCmE,EAAaT,EAAQ,SAASC,EAAG3D,IAC1B,EAYJ,SAASqE,EAAYX,EAAO1D,GAElC,IAAI2D,EAAIC,SAASzB,EAAE,aAAauB,EAAM,IAAI1D,EAAE,MAAM6D,QAC9CnB,EAAKiB,EAAI,IAAM3D,EAChBiC,GAAc,GAEjB,IACOkB,EADIhB,EAAE,iBAAiB2B,QACXX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOJ,GAAGI,QAAQ,SAAUL,GAM7E,OALAvB,EAAE,YAAYuB,EAAM,IAAI1D,EAAE,QAAQgE,MAAMb,GACxChB,EAAE,aAAauB,EAAM,IAAI1D,EAAE,MAAM6D,KAAKF,EAAI,GA2/B9C,SAA0BW,EAAWtE,EAAG2D,GAGpCxB,EAAE,QAAQmC,EAAU,eAAeX,EAAE,IAAI3D,GAAGuE,GAAG,SAAS,WACpDC,EAAgBF,EAAWtE,EAAG2D,MAIlCxB,EAAE,QAAQmC,EAAU,iBAAiBX,EAAE,IAAI3D,GAAGuE,GAAG,SAAS,WACtDE,EAAcH,EAAWtE,EAAG2D,MAngChCe,CAAiBhB,EAAO1D,EAAG2D,GAC3BO,EAAe,OAAOR,EAAOhB,GAC7B8B,EAAgBd,EAAO1D,EAAG2D,IACnB,EAsYX,IAAIgB,EAAsB,KAiEnB,SAASR,EAAaT,EAAO1D,GAEhC,MAAgD,UAA5CmC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,QAGS,UAA5CC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,OACnC0C,EAAWlB,EAAO1D,GAEtBmC,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGqC,YAAY,wBAAwBD,SAAS,2BACjFD,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGmD,KAAK,kDACzChB,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAG6E,IAAI,SAASN,GAAG,SAAS,YApcjE,SAAkBb,EAAO1D,GACxB8E,EAAepB,EAAO1D,GAGtBmC,EAAE,IAAMuB,EAAQ,aAAe1D,GAAG+E,YAAYzC,EAAQoB,EAAM,IAAI1D,IAC7DkE,EAAeR,EAAM1D,GACrBmC,EAAE,IAAMuB,EAAQ,aAAe1D,EAAI,2BAA2BgF,MAAK,WACrD7C,EAAE8C,MACRC,qBA6bPC,CAASzB,EAAO1D,MAEjBmC,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAGqC,YAAY,0BAA0BD,SAAS,YACrFD,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAG6E,IAAI,SAASN,GAAG,SAAS,WAC3D,OAAO,KAGXpC,EAAE,IAAMuB,EAAQ,UAAY1D,GAAGqC,YAAY,iBAAiBD,SAAS,cAAcA,SAAS,oBAErFgD,EAAgB1B,EAAO1D,IAalC,SAASoF,EAAgB1B,EAAO1D,GAE5B,GAAgD,UAA5CmC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,MACnC,OAAO,EAtSf,IAAqBoC,EAAWe,EAyS5B/C,EAAQoB,EAAQ,IAAM1D,GAAKmC,EAAE,IAAIuB,EAAM,aAAe1D,GAAG8D,QAzSxCQ,EA4SLZ,EA5SgB2B,EA4STrF,EA3SnBmC,EAAE,IAAImC,EAAU,aAAee,EAAQ,kBAAkBf,EAAU,MAAMU,MAAK,WAC1E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,SAAU,IAAIA,QAAQO,EAAY,IAAK,IAExEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAC5C0D,EAAO,EACPC,EAAU,GACV1D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOS,WAEzCD,EAAU,WADVD,EAAOhC,SAASzB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOnD,QAC7B,MAEhC,IAAI6D,EAAc,GACd5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOS,WAChDC,EAAc5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOnD,OAGlE,IAAI8D,EAAU,GACV7D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,YAAY8E,GAAOS,WAC5CE,EAAU7D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,YAAY8E,GAAOnD,OAE1D,IAAI+D,EAAa,GACF,IAAXD,IACAC,EAAa,aAAaD,EAAQ,MAGtC,IAAI7C,EAAO,cAAcmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAC5E8E,EAAM,8CAA+CpE,EAAO,IAAK4E,EAAUI,EAC3E,gBAAiBF,EAAY,MACzB,GAARH,IACIzC,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,SAAS8E,EAA3D,YACOO,EAAK,OAET,IAAfG,IACA5C,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,gBAAgB8E,EAAlE,YACGU,EAAY,OAEZ,IAAXC,IACA7C,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,YAAY8E,EAA9D,YACGW,EAAQ,OAGvBV,EAAKnC,KAAKA,OAwDtB,SAAwBmB,EAAWe,GAC/BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,sBAAsBf,EAAU,MAAMU,MAAK,WAC9E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAE5CiB,EAAO,iBAAiBmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAC/E8E,EAAM,+CAAgDpE,EAAO,cAErEqE,EAAKnC,KAAKA,OAyLlB+C,CAAexC,EAAO1D,GA/Y1B,SAAwBsE,EAAWe,GAC/BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,sBAAsBf,EAAU,MAAMU,MAAK,WAC9E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAC5CiE,EAAgB,GAChBhE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,kBAAkB8E,GAAOS,WAClDK,EAAgBhE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,kBAAkB8E,GAAOnD,OAEtE,IAAIkE,EAAiB,GACjBjE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOS,WACnDM,EAAiBjE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOnD,OAGxE,IAAIiB,EAAO,cAAcmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAC5E8E,EADG,qEAEUc,EAAc,eAAiBC,EAAe,IACtD,WAATnF,IACAkC,GAAQ,YACZA,GAAQ,KACa,IAAjBgD,IACAhD,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,kBAAkB8E,EAApE,YACGc,EAAc,OAEP,IAAlBC,IACAjD,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,mBAAmB8E,EAArE,YACGe,EAAe,OAG9Bd,EAAKnC,KAAKA,GACVhB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOH,sBA6W5CmB,CAAe3C,EAAO1D,GAEtB,IAAIsG,EAAQ,IAAMtG,EAGlBmC,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,gBAAgB0D,EAAM,OAAOsB,MAAK,WAC7D,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,OAC1De,EAAIC,WAAW,YAAYnE,YAAY,kBAI/CF,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,YAAYgF,MAAK,WAC5C7C,EAAE8C,MAAM5C,YAAY,kBAIxBF,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,2BAA2BgF,MAAK,WAC3D,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,OAC1De,EAAIrB,gBAAgB,aAK5B/C,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,kBAAkB0D,EAAM,OAAOsB,MAAK,WAC/D,IAAIuB,EAAMpE,EAAE8C,MACZ,GAAGsB,EAAIhB,KAAK,MAAMC,SAASc,KACnBC,EAAIhB,KAAK,MAAMC,SAAS,MAAO,CAEnC,IAAIH,EAAQkB,EAAIhB,KAAK,MAAMxB,QAAQL,EAAO,KACV,GAA5B2B,EAAMoB,QAAQ,YAAiD,GAA9BpB,EAAMoB,QAAQ,cAC/CF,EAAI1F,IAAI,GAAG6F,WAAaA,WAAWC,aAAaJ,EAAI1F,IAAI,GAAI,CAC1D+F,aAAa,EACbC,cAAc,EACdC,eAAgBC,IAChB5F,KAAM,CAACZ,KAAM,cAK3B,IAAIyG,GAAY,EAmFhB,OAlFA7E,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,gBAAgB0D,EAAM,OAAOsB,MAAK,WAC7D,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,QAC1DwB,GAAY,MAIfA,IAzeT,SAAsB1C,EAAWe,GAC7BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,oBAAoBf,EAAU,MAAMU,MAAK,WAC5E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,UAAW,IAAIA,QAAQO,EAAY,IAAK,IAEzEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BhD,EAAKP,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAOnD,MAC5CS,EAAOR,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOnD,MAChD+E,EAAY9E,EAAE,IAAImC,EAAU,IAAI/D,EAAK,cAAc8E,GAAOnD,MAC1DgF,EAAY/E,EAAE,IAAImC,EAAU,IAAI/D,EAAK,cAAc8E,GAAOnD,MAC1D6D,EAAc,SACd5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOS,WAChDC,EAAc5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOnD,OAElE,IAAIiF,EAAU,GACVhF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOS,WACnDqB,EAAUhF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOnD,OAGjEoD,EAAKnC,KAAK,eAAemB,EAAU,IAAI/D,EAAK,OAAO8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,OAAO8E,EAAM,4CAA4CU,EAAtI,sCAEiBrD,EAAG,cAAeC,EAAK,YAAawE,EAFrD,qCAI6B7C,EAAU,IAAI/D,EAAK,cAAc8E,EAJ9D,WAKYf,EAAU,IAAI/D,EAAK,cAAc8E,EAAM,YAAc4B,EALjE,+BAM6B3C,EAAU,IAAI/D,EAAK,cAAc8E,EAN9D,WAOYf,EAAU,IAAI/D,EAAK,cAAc8E,EAAM,YAAc6B,EAAU,OAEzE,YAAR3G,EACA6G,0BAA0BjF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAQ,IAAIA,GAEtEgC,qBAAqBlF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAQ,IAAIA,EAAO4B,EAAWC,OAwc3FI,CAAa5D,EAAO1D,GA7J5B,SAA8BsE,EAAWe,GACrClD,EAAE,IAAImC,EAAU,aAAee,EAAQ,uBAAuBf,EAAU,MAAMU,MAAK,WAC/E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BhD,EAAKP,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAOnD,MAC5CS,EAAOR,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOnD,MAIhDqF,EAAoB,GACpBC,EAAqB,YAFuC,QAAhDrF,EAAE,IAAImC,EAAU,cAAgBe,GAAOnD,QAInDqF,EAAoB,YACpBC,EAAqB,IAGzBlC,EAAKnC,KAAK,eAAemB,EAAU,IAAI/D,EAAK,OAAO8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,OAAO8E,EAApF,0EACQkC,EADR,4BAEiB7E,EAAG,IAAK8E,EAAmB,IAAI7E,EAFhD,sBAKV8E,wBAAwBtF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAQ,IAAIA,OAoIxEqC,CAAqBhE,EAAO1D,GAoqBpC,SAAoBsE,EAAWe,GAC3BlD,EAAE,iBAAiBmC,EAAU,MAAMU,MAAK,WACpC,IAtCD2C,EAsCKrC,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,QAAS,IAAIA,QAAQO,EAAY,IAAK,IAEvEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BkC,EAAUzF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAE9C2F,EA9CQ,IADjBF,EA+C+BC,EA/CXE,MAAM,MACnBC,OACD,CACHC,KAAOpE,SAAS+D,EAAO,IACvBM,MAAQrE,SAAS+D,EAAO,IACxBO,IAAMtE,SAAS+D,EAAO,KAEH,GAAjBA,EAAOI,OACN,CACHC,KAAOpE,SAAS+D,EAAO,IACvBM,MAAQrE,SAAS+D,EAAO,IACxBO,IAAM,IAEa,GAAjBP,EAAOI,QAA4B,IAAbJ,EAAO,GAC5B,CACHK,KAAOpE,SAAS+D,EAAO,IACvBM,MAAQ,GACRC,IAAM,IAED,CACRF,KAAO,GAAIC,MAAQ,GAAIC,IAAM,IA6BpB/E,EAAO,wFAAwFmB,EAAU,IAAI/D,EAAK,SAAS8E,EAAM,iCAAiCwC,EAAUG,KAAK,KACrL7E,GAAQ,+CACRA,GAAQ,eAAemB,EAAU,IAAI/D,EAAK,UAAU8E,EAA5C,mIAEK,CAAC,UAAW,WAAY,QAAS,QAAS,MACvC,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAEvE8C,SAAQ,SAASlH,EAAOM,GAC3B,IAAI6G,EAAO7G,EAAM,EAGb4B,GADAiF,GAAQP,EAAUI,MACV,kBAAmBG,EAAK,cAAenH,EAAM,YAE7C,kBAAmBmH,EAAK,KAAMnH,EAAM,eAEpDkC,GAAQ,YACRA,GAAQ,+CACRA,GAAQ,sFAAsFmB,EAAU,IAAI/D,EAAK,QAAQ8E,EAAM,iCAAiCwC,EAAUK,IAAI,MAC9K/E,GAAQ,4BAA4BmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,YAAYuC,EAAQ,KAC7HtC,EAAKnC,KAAKA,GAEVhB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,UAAU8E,GAAOgD,QAAQ,CAC1CC,MAAO,MACPC,YAAY,EACZC,MAAO,YACPzC,YAAa,cAzsBzB0C,CAAW/E,EAAO1D,IAOtBmC,EAAE,IAAIuB,EAAM,aAAe1D,EAAI,qBAAqBgF,MAAK,WACrD7C,EAAE8C,MAAM5C,YAAY,kBAExBF,EAAG,IAAIuB,EAAM,gBAAgB1D,GAAI0I,SAAS,CACpCC,MAAc,eACdC,QAAc,GACdC,OAAc,SAAUC,EAAOC,GAC3B,IAAIC,EAAW7G,EAAG,IAAIuB,EAAM,gBAAgB1D,GAAI0I,SAAS,WACzDnF,QAAQC,IAAIwF,GACZA,EAASb,SAAQ,SAASc,EAAWC,GAC/B/G,EAAE,IAAI8G,EAAY,sBAAsB/G,IAAIgH,MAErC,aAATxF,GACEyF,EAAuBnJ,MAK1B,yBAAT0D,GAEAvB,EAAE,IAAIuB,EAAM,YAAY1D,GAAGoJ,QAAO,WAC9BC,EAAmB3F,EAAO1D,EACtBmC,EAAE,IAAIuB,EAAM,YAAY1D,EAAE,oBAAoB6D,WAI7C,oBAATH,GAEAvB,EAAE,IAAIuB,EAAM,YAAY1D,GAAGoJ,QAAO,WAC9BC,EAAmB3F,EAAO1D,EACtBmC,EAAE,IAAIuB,EAAM,YAAY1D,EAAE,oBAAoB6D,WAI7C,SAATH,IAE4C,MAAxCvB,EAAE,IAAIuB,EAAM,gBAAgB1D,GAAGkC,OAAyD,IAAxCC,EAAE,IAAIuB,EAAM,gBAAgB1D,GAAGkC,OAC/EoH,EAAmB5F,EAAO1D,EAAGmC,EAAE,IAAIuB,EAAM,gBAAgB1D,GAAGkC,OAGhEC,EAAE,IAAIuB,EAAM,gBAAgB1D,GAAGoJ,QAAO,WAClCE,EAAmB5F,EAAO1D,EACtBmC,EAAE,IAAIuB,EAAM,gBAAgB1D,GAAGkC,WAK7B,cAAVwB,GAAqD,QAA3BvB,EAAE,eAAeD,OAC6B,SAAvEC,EAAE,gCAAkCnC,GAAGuJ,KAAK,gBAAgB1F,QAC3D1B,EAAE,oBAAsBnC,GAAGuJ,KAAK,gBAAgBxB,QACI,IAAlD5F,EAAE,gCAAkCnC,GAAG+H,QAC3C5F,EAAE,4BAA8BnC,GAAGgE,MAAM,mEAAqEhE,EAC1G,8FAIiC,IAArCmC,EAAE,IAAMuB,EAAQ,OAAS1D,GAAGkC,MAC/BC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,UAEvCC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,UAGxCD,GAAc,IAGP,EAaX,SAASuH,EAAkBlF,EAAWtE,GAGlC,IAAIsG,EAAQ,IAAMtG,EAIlBmC,EAAE,IAAImC,EAAU,aAAetE,EAAI,qBAAqBgF,MAAK,WACzD7C,EAAE8C,MAAM7C,SAAS,kBAEjBD,EAAG,IAAImC,EAAU,gBAAgBtE,GAAIyJ,SAAS,gBAC9CtH,EAAG,IAAImC,EAAU,gBAAgBtE,GAAI0I,SAAS,WAGlDvG,EAAE,IAAImC,EAAU,aAAetE,EAAI,kBAAkBsE,EAAU,OAAOU,MAAK,WACvE,IAAIuB,EAAMpE,EAAE8C,OACTsB,EAAIhB,KAAK,MAAMC,SAASc,IACnBC,EAAIhB,KAAK,MAAMC,SAAS,QACa,GAArCe,EAAIhB,KAAK,MAAMkB,QAAQ,YAA0D,GAAvCF,EAAIhB,KAAK,MAAMkB,QAAQ,aAEjEF,EAAI1F,IAAI,GAAG6F,YACXH,EAAI1F,IAAI,GAAG6F,WAAWgD,gBAOlCvH,EAAE,IAAImC,EAAU,aAAetE,EAAI,gBAAgBsE,EAAU,OAAOU,MAAK,WACrE,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,OAC1De,EAAIhB,KAAK,WAAY,QAAQnD,SAAS,kBAK9CD,EAAE,IAAImC,EAAU,aAAetE,EAAI,YAAYgF,MAAK,WAChD7C,EAAE8C,MAAM7C,SAAS,kBAIrBD,EAAE,IAAImC,EAAU,aAAetE,EAAI,2BAA2BgF,MAAK,WAC/D,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,OAC1De,EAAIrB,gBAAgB,cA7ahC,SAAqBZ,EAAWe,GAC5BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,kBAAkBf,EAAU,MAAMU,MAAK,WAC1E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,SAAU,IAAIA,QAAQO,EAAY,IAAK,IAExEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAC5C0D,EAAO,EACPzD,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOS,WACzCF,EAAOhC,SAASzB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOnD,QAE7D,IAAI6D,EAAc,GACd5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOS,WAChDC,EAAc5D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,gBAAgB8E,GAAOnD,OAElE,IAAI8D,EAAU,GACV7D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,YAAY8E,GAAOS,WAC5CE,EAAU7D,EAAE,IAAImC,EAAU,IAAI/D,EAAK,YAAY8E,GAAOnD,OAG1D,IAAIiB,EAAO,cAAcmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAC5E8E,EAAM,2BAA4BpE,EAAO,MACjDkC,GAAQ,kCAAoClC,EAAQ,OACxC,GAAR2E,IACIzC,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,SAAS8E,EAA3D,YACOO,EAAK,OAET,IAAfG,IACA5C,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,gBAAgB8E,EAAlE,YACGU,EAAY,OAEZ,IAAXC,IACA7C,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,YAAY8E,EAA9D,YACGW,EAAQ,OAGvBV,EAAKnC,KAAKA,OA0YlBwG,CAAYrF,EAAWtE,GA7W3B,SAAwBsE,EAAWe,GAC/BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,sBAAsBf,EAAU,MAAMU,MAAK,WAC9E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAI5CiB,EAAO,uCAAuCmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IACrG8E,EAAM,KAAMpE,EAAO,cAC3BkC,GAAQ,oCAAsClC,EAAQ,SAEtDqE,EAAKnC,KAAKA,OA6VlByG,CAAetF,EAAWtE,GA/hB9B,SAAwBsE,EAAWe,GAC/BlD,EAAE,IAAImC,EAAU,aAAee,EAAQ,sBAAsBf,EAAU,MAAMU,MAAK,WAC9E,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BzE,EAAQkB,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAC5C2H,EAAU1H,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOyE,KAAK,WACnD3D,EAAgB,GAChBhE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,kBAAkB8E,GAAOS,WAClDK,EAAgBhE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,kBAAkB8E,GAAOnD,OAEtE,IAAIkE,EAAiB,GACjBjE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOS,WACnDM,EAAiBjE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,mBAAmB8E,GAAOnD,OAIxE,IAAIiB,EAAO,cAAcmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAC5E8E,EAAM,2BACVwE,IACA1G,GAAQ,WACZA,GAAO,MAEPA,GAAQ,kCACJ0G,EAEG1G,GADkB,IAAjBgD,EACOA,EAEAlF,EAEW,IAAlBmF,IACDjD,GAAQiD,GAEfjD,GAAQ,OACa,IAAjBgD,IACAhD,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,kBAAkB8E,EAApE,YACGc,EAAc,OAEP,IAAlBC,IACAjD,GAAQ,4BAA+BmB,EAAU,IAAI/D,EAAK,mBAAmB8E,EAArE,YACGe,EAAe,OAG9BjE,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOH,gBAAgB,WACpDI,EAAKnC,KAAKA,OAgflB4G,CAAezF,EAAWtE,GAE1B,IAAIgH,GAAY,EAChB7E,EAAE,IAAImC,EAAU,aAAetE,EAAI,gBAAgBsE,EAAU,OAAOU,MAAK,WACrE,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAASc,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,QAC1DwB,GAAY,MAIhBA,IAtVR,SAAsB1C,EAAWe,GAC7BlD,EAAE,mBAAmBmC,EAAU,MAAMU,MAAK,WACtC,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,UAAW,IAAIA,QAAQO,EAAY,IAAK,IAEzEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BhD,EAAKP,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAOnD,MAC5CS,EAAOR,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,EAAO,oBAAoBxB,OAClEoD,EAAY9E,EAAE,IAAImC,EAAU,IAAI/D,EAAK,cAAc8E,GAAOnD,MAC1DgF,EAAY/E,EAAE,IAAImC,EAAU,IAAI/D,EAAK,cAAc8E,GAAOnD,MAE1D8H,EAAkB,GAClBC,EAAW,GACE,kBAAbhD,IACA+C,EAAkB,sBAClBC,EAAW,MAGf3E,EAAKnC,KAAK,4BAA+BmB,EAAU,IAAI/D,EAAK,OAAO8E,EAAzD,WACQf,EAAU,IAAI/D,EAAK,OAAO8E,EAAM,YAAc3C,EADtD,+BAE6B4B,EAAU,IAAI/D,EAAK,SAAS8E,EAFzD,WAGQf,EAAU,IAAI/D,EAAK,SAAS8E,EAAM,YAAc1C,EAHxD,+BAI6B2B,EAAU,IAAI/D,EAAK,cAAc8E,EAJ9D,WAKYf,EAAU,IAAI/D,EAAK,cAAc8E,EAAM,YAAc4B,EALjE,+BAM6B3C,EAAU,IAAI/D,EAAK,cAAc8E,EAN9D,WAOYf,EAAU,IAAI/D,EAAK,cAAc8E,EAAM,YAAc6B,EAPjE,oCAQoC8C,EAAgB,KAAMrH,EAAKsH,EAAS,YA0TtFC,CAAa5F,EAAWtE,GAjRhC,SAA8BsE,EAAWe,GACrClD,EAAE,sBAAsBmC,EAAU,MAAMU,MAAK,WACzC,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,aAAc,IAAIA,QAAQO,EAAY,IAAK,IAE5EoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAC7BhD,EAAKP,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,GAAOnD,MAC5CS,EAAOR,EAAE,IAAImC,EAAU,IAAI/D,EAAK,OAAO8E,EAAO,oBAAoBxB,OAEtEyB,EAAKnC,KAAK,4BAA+BmB,EAAU,IAAI/D,EAAK,OAAO8E,EAAzD,WACQf,EAAU,IAAI/D,EAAK,OAAO8E,EAAM,YAAc3C,EADtD,+BAE6B4B,EAAU,IAAI/D,EAAK,SAAS8E,EAFzD,WAGQf,EAAU,IAAI/D,EAAK,SAAS8E,EAAM,YAAc1C,EAAK,WAmQ3EwH,CAAqB7F,EAAWtE,GAsoBxC,SAAoBsE,EAAWe,GAC3BlD,EAAE,iBAAiBmC,EAAU,MAAMU,MAAK,WACpC,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,QAAS,IAAIA,QAAQO,EAAY,IAAK,IAEvEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAEjC0E,EAAW9F,EAAWe,GAGtB,IAAIuC,EAAUzF,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,MAE9CiB,EAAO,kCAAkCyE,EAAQ,OACrDzE,GAAQ,4BAA4BmB,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,WAAWf,EAAU,IAAI/D,EAAK,IAAI8E,EAAM,YAAYuC,EAAQ,KAC7HtC,EAAKnC,KAAKA,OAtpBdkH,CAAW/F,EAAUtE,IAMzBmC,EAAE,IAAImC,EAAU,aAAetE,EAAI,eAAesE,EAAU,OAAOU,MAAK,WACpE,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAAS,aAAec,KAAWC,EAAIhB,KAAK,MAAMC,SAAS,OACzEe,EAAIrE,IAAI,OAInBC,EAAE,IAAMmC,EAAY,UAAYtE,GAAGoC,SAAS,iBAAiBC,YAAY,cAAcA,YAAY,oBAgB7F,SAASyC,EAAeR,EAAWtE,GAmBtC,OAfAwJ,EAAkBlF,EAAWtE,GAG7BmC,EAAE,IAAMmC,EAAY,eAAiBtE,GAAGoC,SAAS,wBAAwBC,YAAY,2BACrFF,EAAE,IAAMmC,EAAY,eAAiBtE,GAAGmD,KAAK,6DAC7ChB,EAAE,IAAMmC,EAAY,eAAiBtE,GAAG6E,IAAI,SAASN,GAAG,SAAS,WAChEJ,EAAaG,EAAWtE,MAIzBmC,EAAE,IAAMmC,EAAY,iBAAmBtE,GAAGoC,SAAS,0BAA0BC,YAAY,YACzFF,EAAE,IAAMmC,EAAY,iBAAmBtE,GAAG6E,IAAI,SAASN,GAAG,SAAS,WAChEK,EAAWN,EAAWtE,OAGlB,EAcX,SAASwE,EAAgBF,EAAWtE,EAAG2D,GACtC,IAAIjB,EAAKiB,EAAI,IAAM3D,EACZsK,EAAe,OAAShG,EAG5B,MAAwD,UAApDnC,EAAE,IAAMmI,EAAe,cAAgB5H,GAAIR,QAGS,UAApDC,EAAE,IAAMmI,EAAe,cAAgB5H,GAAIR,OAC3CuC,EAAcH,EAAWtE,EAAG2D,GAEhCxB,EAAE,IAAMmI,EAAe,eAAiB5H,GAAIL,YAAY,wBAAwBD,SAAS,2BACzFD,EAAE,IAAMmI,EAAe,eAAiB5H,GAAIS,KAAK,oCACjDhB,EAAE,IAAMmI,EAAe,eAAiB5H,GAAImC,IAAI,SAASN,GAAG,SAAS,YAluBzE,SAAqBb,EAAO1D,EAAG2D,GAC9B,IAAIjB,EAAKiB,EAAI,IAAM3D,EACnBuK,EAAkB7G,EAAO1D,EAAG2D,GAG5BxB,EAAE,QAAUuB,EAAQ,aAAehB,GAAIqC,YAAYzC,EAAQ,OAAOoB,EAAM,IAAIhB,IACzEwB,EAAe,OAAOR,EAAOhB,GA6tB5B8H,CAAYlG,EAAWtE,EAAG2D,MAE3BxB,EAAE,IAAMmI,EAAe,iBAAmB5H,GAAIL,YAAY,0BAA0BD,SAAS,YAC7FD,EAAE,IAAMmI,EAAe,iBAAmB5H,GAAImC,IAAI,SAASN,GAAG,SAAS,WACnE,OAAO,KAGXpC,EAAE,IAAMmI,EAAe,UAAY5H,GAAIL,YAAY,iBAAiBD,SAAS,cAAcA,SAAS,oBAE7FgD,EAAgBkF,EAAc5H,IAclC,SAAS6H,EAAkBjG,EAAWtE,EAAG2D,GAG5C,IAAI2C,EAAQ3C,EAAI,IAAM3D,EAiBtB,OAfAwJ,EAAkB,OAAOlF,EAAWgC,GAGpCnE,EAAE,QAAUmC,EAAY,eAAiBgC,GAAOlE,SAAS,wBAAwBC,YAAY,2BAC7FF,EAAE,QAAUmC,EAAY,eAAiBgC,GAAOnD,KAAK,+CACrDhB,EAAE,QAAUmC,EAAY,eAAiBgC,GAAOzB,IAAI,SAASN,GAAG,SAAS,WACxEC,EAAgBF,EAAWtE,EAAG2D,MAI/BxB,EAAE,QAAUmC,EAAY,iBAAmBgC,GAAOlE,SAAS,0BAA0BC,YAAY,YACjGF,EAAE,QAAUmC,EAAY,iBAAmBgC,GAAOzB,IAAI,SAASN,GAAG,SAAS,WACxEE,EAAcH,EAAWtE,EAAG2D,OAGxB,EAWJ,SAAS8G,EAAuBnG,EAAWtE,GAS9C,MARoD,UAAhDmC,EAAE,IAAMmC,EAAY,cAAgBtE,GAAGkC,OACvCC,EAAE,IAAMmC,EAAY,WAAatE,GAAGqC,YAAY,cAAcD,SAAS,eACvED,EAAE,IAAMmC,EAAY,WAAatE,GAAGmD,KAAK,mDAEzChB,EAAE,IAAMmC,EAAY,WAAatE,GAAGqC,YAAY,eAAeD,SAAS,cACxED,EAAE,IAAMmC,EAAY,WAAatE,GAAGmD,KAAK,yDAGtCuH,EAAcpG,EAAWtE,GAWpC,SAAS4E,EAAWlB,EAAO1D,GAqCvB,MApCgD,UAA5CmC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,OAEnCC,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAGqC,YAAY,0BAA0BD,SAAS,2BACrFD,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAGmD,KAAK,kDAG3ChB,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGqC,YAAY,wBAAwBD,SAAS,YACjFD,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAG6E,IAAI,SAASN,GAAG,SAAS,WAC1D,OAAO,KAIVpC,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGqC,YAAY,2BAA2BD,SAAS,YAAY0H,KAAK,YAAY,GAGjH3H,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGqC,YAAY,2BAA2BD,SAAS,YAAY0H,KAAK,YAAY,KAIhH3H,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAGqC,YAAY,2BAA2BD,SAAS,0BACtFD,EAAE,IAAMuB,EAAQ,iBAAmB1D,GAAGmD,KAAK,sDAG3ChB,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGoC,SAAS,wBAAwBC,YAAY,YACjFF,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAG6E,IAAI,SAASN,GAAG,SAAS,WAC1DJ,EAAaT,EAAO1D,MAIvBmC,EAAE,IAAMuB,EAAQ,eAAiB1D,GAAGoC,SAAS,2BAA2BC,YAAY,YAAYyH,KAAK,YAAY,GAGjH3H,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGoC,SAAS,2BAA2BC,YAAY,YAAYyH,KAAK,YAAY,IAI7GY,EAAchH,EAAO1D,GAYhC,SAAS0K,EAAchH,EAAO1D,GAC1B,GAAgD,UAA5CmC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,MAEtCC,EAAE,IAAMuB,EAAQ,UAAY1D,GAAGqC,YAAY,iBAAiBD,SAAS,gBAAgBA,SAAS,qBAE3FD,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,cACpC,CAENC,EAAE,IAAMuB,EAAQ,UAAY1D,GAAGqC,YAAY,gBAAgBD,SAAS,iBAAiBC,YAAY,qBAG9F,IAAI2E,GAAY,EAChB7E,EAAE,eAAeuB,EAAM,OAAOsB,MAAK,WAC/B,IAAIuB,EAAMpE,EAAE8C,MACTsB,EAAIhB,KAAK,MAAMC,SAAS,IAAMxF,KAAQuG,EAAIhB,KAAK,MAAMC,SAAS,QAC7DwB,GAAY,MAGhBA,EACsC,IAArC7E,EAAE,IAAMuB,EAAQ,OAAS1D,GAAGkC,MAC/BC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,UAEvCC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,UAExCC,EAAE,IAAMuB,EAAQ,cAAgB1D,GAAGkC,IAAI,IAS5C,OAHAD,GAAc,IAGP,EAYX,SAASwC,EAAcf,EAAO1D,EAAG2D,GAChC,IAAIjB,EAAKiB,EAAI,IAAM3D,EAyBhB,MAxBqD,UAAjDmC,EAAE,QAAUuB,EAAQ,cAAgBhB,GAAIR,OAExCC,EAAE,QAAUuB,EAAQ,iBAAmBhB,GAAIL,YAAY,0BAA0BD,SAAS,2BAC1FD,EAAE,QAAUuB,EAAQ,iBAAmBhB,GAAIS,KAAK,oCAGhDhB,EAAE,QAAUuB,EAAQ,eAAiBhB,GAAIL,YAAY,wBAAwBD,SAAS,YACtFD,EAAE,QAAUuB,EAAQ,eAAiBhB,GAAImC,IAAI,SAASN,GAAG,SAAS,WAC/D,OAAO,OAKVpC,EAAE,QAAUuB,EAAQ,iBAAmBhB,GAAIL,YAAY,2BAA2BD,SAAS,0BAC3FD,EAAE,QAAUuB,EAAQ,iBAAmBhB,GAAIS,KAAK,uCAGhDhB,EAAE,QAAUuB,EAAQ,eAAiBhB,GAAIN,SAAS,wBAAwBC,YAAY,YACtFF,EAAE,QAAUuB,EAAQ,eAAiBhB,GAAImC,IAAI,SAASN,GAAG,SAAS,WAC/DC,EAAgBd,EAAO1D,EAAG2D,OAK1B+G,EAAc,OAAOhH,EAAOhB,GASvC,SAASuB,EAAcK,EAAWtE,GAG9BmC,EAAE,IAAImC,EAAU,eAAetE,GAAGuE,GAAG,SAAS,WAC1CJ,EAAaG,EAAWtE,MAI5BmC,EAAE,IAAImC,EAAU,iBAAiBtE,GAAGuE,GAAG,SAAS,WAC5CK,EAAWN,EAAWtE,MAI9B,SAASkE,EAAeI,EAAWtE,GAE/BmC,GAAE,WACIA,EAAE,IAAImC,EAAU,UAAWtE,EAAG,4BAA4B2K,aAIhExI,GAAE,WACIA,EAAE,IAAImC,EAAU,UAAWtE,EAAG,4BAA4B4K,QAAQ,CAC5DC,QAAS,QACTC,UAAW,YAmCpB,SAASC,EAAe/K,GAC9B,IAAIgL,EAAS,EACT7I,EAAE,yBAAyBnC,GAAG8F,WAC9BkF,EAASpH,SAASzB,EAAE,yBAAyBnC,GAAG6D,SAEpDN,QAAQC,IAAI,uCAAyCxD,EAAI,aAAegL,GACrE/I,GAAc,GAEd,IACIkB,EADOhB,EAAE,yBAAyB2B,QACtBX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOiH,GAWxD,OAVA7I,EAAE,0BAA0BnC,GAAGiL,OAAO9H,GAEtChB,EAAE,kBAAoB6I,EAApB,gBAAgD9I,IAAI,UACtDkD,EAAgB,iBAAmB4F,EAAQhL,GAE3CqH,qBAAqBlF,EAAE,kBAAkB6I,EAAO,YAAYhL,GAAI,IAAIA,EAAG,eAAgB,GAGvFmC,EAAE,yBAAyBnC,GAAG6D,OAAOmH,IAE9B,EAyCJ,SAASE,EAAsBlL,IAinBtC,SAA4BA,GACxBmC,EAAE,uBAAyBnC,GAAGuJ,KAAK,gBAAgB4B,SAjnBnDC,CAAmBpL,GACtB,IAAIgL,EAAS,EACT7I,EAAE,+BAA+BnC,GAAG8F,WACpCkF,EAASpH,SAASzB,EAAE,+BAA+BnC,GAAG6D,SAE1DN,QAAQC,IAAI,mDAAqDxD,EAAI,aAAegL,GAGjD,QAA3B7I,EAAE,eAAeD,OAA+B,GAAV8I,GACrC7I,EAAE,oBAAsBnC,GAAGuJ,KAAK,gBAAgBxB,QACI,IAAlD5F,EAAE,gCAAkCnC,GAAG+H,QAC3C5F,EAAE,4BAA8BnC,GAAGgE,MAAM,mEAAqEhE,EAC1G,8FAGRiC,GAAc,GAGd,IACIkB,EADOhB,EAAE,uBAAuB2B,QACpBX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOiH,GAWxD,OAVA7I,EAAE,gCAAgCnC,GAAGiL,OAAO9H,GAE5ChB,EAAE,wBAA0B6I,EAA1B,gBAAsD9I,IAAI,UAC5DkD,EAAgB,uBAAyB4F,EAAQhL,GAEjDqH,qBAAqBlF,EAAE,wBAAwB6I,EAAO,YAAYhL,GAAI,IAAIA,EAAG,iBAAkB,GAG/FmC,EAAE,+BAA+BnC,GAAG6D,OAAOmH,IAEpC,EAGJ,SAAS7B,EAAuBnJ,GACnC,IAAI6D,EAAO,GACPwH,EAAa,GAEjBlJ,EAAE,oBAAoBnC,EAAE,oCAAoCgF,MAAK,WAC7D,IAAIuB,EAAMpE,EAAE8C,MACZ,IAAKsB,EAAIkD,SAAS,sBAAwBlD,EAAIhB,KAAK,MAAMC,SAAS,UAAYxF,KAClEuG,EAAIhB,KAAK,MAAMC,SAAS,MAAO,CACvC,IAAI7B,EAAI4C,EAAIhB,KAAK,MAAMxB,QAAQ,uBAAwB,IAAIA,QAAQ,UAAU/D,EAAG,IAC5EkD,EAAOf,EAAE,wBAAwBwB,EAAE,YAAY3D,EAAE,oBAAoB6D,OACrEyH,EAAWnJ,EAAE,wBAAwBwB,EAAE,SAAS3D,GAAGkC,MAEvDmJ,EAAWE,KAAK,CAACrI,EAAMoI,QAI/B,IAAIE,EAAarJ,EAAE,+BAA+B0B,OAClDA,EAAO4H,mBAAmBJ,EAAYG,GAGtCrJ,EAAE,sBAAsBnC,GAAG6D,KAAKA,EAAK6H,QACrCvJ,EAAE,uBAAuBnC,GAAGkC,IAAI2B,EAAK6H,QAYlC,SAASC,EAAiB3L,GAChC,IAAIgL,EAAS,EACT7I,EAAE,0BAA0BnC,GAAG8F,WAC/BkF,EAASpH,SAASzB,EAAE,0BAA0BnC,GAAG6D,SAErDN,QAAQC,IAAI,8CAAgDxD,EAAI,aAAegL,GAC5E/I,GAAc,GAEd,IACIkB,EADOhB,EAAE,kBAAkB2B,QACfX,OAAOY,QAAQ,MAAO/D,GAAG+D,QAAQ,MAAOiH,GAUxD,OATA7I,EAAE,2BAA2BnC,GAAGiL,OAAO9H,GAEvChB,EAAE,mBAAqB6I,EAArB,gBAAiD9I,IAAI,UACvDgC,EAAe,kBAAoB8G,EAAQhL,GAC3CoF,EAAgB,kBAAoB4F,EAAQhL,GAG5CmC,EAAE,0BAA0BnC,GAAG6D,OAAOmH,IAE/B,EAkGX,SAASY,EAAIC,EAAKjG,GAEd,IADA,IAAI7D,EAAI8J,EAAI,GACL9J,EAAEgG,OAASnC,GAAM7D,EAAI,IAAMA,EAClC,OAAOA,EAeJ,SAASqI,EAAW9F,EAAWe,GAClClD,EAAE,iBAAiBmC,EAAU,MAAMU,MAAK,WACpC,IAAIM,EAAOnD,EAAE8C,MACb,GAAGK,EAAKC,KAAK,MAAMC,SAAS,IAAIH,KAAWC,EAAKC,KAAK,MAAMC,SAAS,MAAO,CAEvE,IAAIC,EAASH,EAAKC,KAAK,MAAMxB,QAAQ,QAAS,IAAIA,QAAQO,EAAY,IAAK,IAEvEoB,EAAQ,IAAIC,OAAO,IAAKN,EAAM,IAAK,KACnC9E,EAAOkF,EAAO1B,QAAQ2B,EAAO,IAEjC,GAAIvD,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOS,SAAU,CACnD,IAAIkC,EAAO7F,EAAE,IAAImC,EAAU,IAAI/D,EAAK,SAAS8E,GAAOnD,MAChDgG,EAAM/F,EAAE,IAAImC,EAAU,IAAI/D,EAAK,QAAQ8E,GAAOnD,MAC9C+F,EAAQ9F,EAAE,IAAImC,EAAU,IAAI/D,EAAK,UAAU8E,EAAO,oBAAoBnD,MAEtE0F,EAAU,GACF,IAARI,IACAJ,GAAWgE,EAAI5D,EAAM,GACR,IAATC,IACAL,GAAW,IAAMgE,EAAI3D,EAAM,GAChB,IAAPC,IACAN,GAAW,IAAMgE,EAAI1D,EAAI,MAKrC/F,EAAE,IAAImC,EAAU,IAAI/D,EAAK,IAAI8E,GAAOnD,IAAI0F,QA2FxD,SAASkE,EAAwBC,EAAK,IAClC,IAAIC,EAAQ,GACA,IAARD,IACAC,EAAQ,IAAMD,EAAO,KAEzB5J,EAAE6J,EAAQ,uBAAuBhH,MAAK,WAClC,IAAIuB,EAAMpE,EAAE8C,MACR0C,EAASpB,EAAIhB,KAAK,MAAMuC,MAAM,KAElC,GAAqB,GAAjBH,EAAOI,OAAa,CACpB,IAAIrE,EAAQiE,EAAO,GACf3H,EAAI2H,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZJ,EAAaT,EAAO1D,WAErB,GAAqB,GAAjB2H,EAAOI,QAA4B,OAAbJ,EAAO,GAAa,CAC7CjE,EAAQiE,EAAO,GACf3H,EAAI2H,EAAO,GADf,IAEIhE,EAAIgE,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZC,EAAgBd,EAAO1D,EAAG2D,WAE3B,GAAqB,GAAjBgE,EAAOI,OAAa,CACvBrE,EAAQiE,EAAO,GAAK,IAAMA,EAAO,GAAK,IAAMA,EAAO,GACnD3H,EAAI2H,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZJ,EAAaT,EAAO1D,UAMhCmC,EAAE6J,EAAQ,yBAAyBhH,MAAK,WACpC,IAAIuB,EAAMpE,EAAE8C,MACR0C,EAASpB,EAAIhB,KAAK,MAAMuC,MAAM,KAElC,GAAqB,GAAjBH,EAAOI,OAAa,CACpB,IAAIrE,EAAQiE,EAAO,GACf3H,EAAI2H,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZK,EAAWlB,EAAO1D,WAEnB,GAAqB,GAAjB2H,EAAOI,QAA4B,OAAbJ,EAAO,GAAa,CAC7CjE,EAAQiE,EAAO,GACf3H,EAAI2H,EAAO,GADf,IAEIhE,EAAIgE,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZE,EAAcf,EAAO1D,EAAG2D,WAEzB,GAAqB,GAAjBgE,EAAOI,OAAa,CACvBrE,EAAQiE,EAAO,GAAK,IAAMA,EAAO,GAAK,IAAMA,EAAO,GACnD3H,EAAI2H,EAAO,GACfpB,EAAIhC,GAAG,SAAS,WACZK,EAAWlB,EAAO1D,UAMlC,SAASiM,EAAqBF,EAAK,IAC/B,IAAIC,EAAQ,GACA,IAARD,IACAC,EAAQ,IAAMD,EAAO,KAEzB5J,GAAE,WACIA,EAAE6J,EAAQ,2BAA2BrB,aAI3CxI,GAAE,WACIA,EAAE6J,EAAQ,2BAA2BpB,QAAQ,CACvCC,QAAS,QACTC,UAAW,YAM3B,SAASzB,EAAmB/E,EAAWtE,EAAGkM,GACtC/J,EAAE,IAAImC,EAAU,yBAAyBtE,GAAG6D,KAAKqI,GAGrD,SAASC,EAAmB7H,EAAWtE,EAAGkM,GACtC/J,EAAE,IAAImC,EAAU,yBAAyBtE,GAAG6D,KAAKqI,GAejDvH,EAAsB,KAE1B,SAASyH,IACLjK,EAAE,mCAAmC6C,MAAK,WACtC,IAAIuB,EAAMpE,EAAE8C,MAEK,MAAbsB,EAAIrE,OAA8B,IAAbqE,EAAIrE,OACzBC,EAAEtB,IAAIuC,QAAQ,qCAAqCmD,EAAIrE,MAAO,MAAM,SAAUa,GAEtEA,EAAKJ,OACAgC,IACDA,EAAsB,IAAIpC,OAC9BoC,EAAoB4G,KAAKxI,EAAKJ,aAO3C,SAAS0J,EAAwBC,EAAUjH,EAAOpE,GAErD,IAAIsF,EAAMpE,EAAE,IAAImK,GAChB/F,EAAI8B,QAAQ,WACZ9B,EAAIrE,IAAIjB,GACRwG,wBAAwBlB,EAAK,IAAIlB,GACjCiE,EAAmB,QAASjE,EAAOpE,GAGvC,SAASqI,EAAmBhF,EAAWtE,EAAGkM,GACtC,IAAIK,EAAQ,KACZ,OAAKC,uBAA0B7H,GAY3B6H,uBACAA,sBAAsBrE,SAAQ,SAASsE,GAC/BA,EAAO/J,IAAMwJ,IACbK,EAAQE,OAIfF,GAAS5H,GACVA,EAAoBwD,SAAQ,SAASsE,GAC7BA,EAAO/J,IAAMwJ,IACbK,EAAQE,MAIfF,GAaLpK,EAAE,IAAImC,EAAU,cAActE,GAAGkC,IAAI,QACrCC,EAAE,IAAImC,EAAU,iBAAiBtE,GAAG6D,KAAK0I,EAAMhM,MAC/C4B,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6D,KAAK0I,EAAMG,mBAAqB,KAAOH,EAAMI,kBAChFJ,EAAMK,UAAYL,EAAMM,WACxB1K,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG8J,KAAK,UAAU,MAAMjF,IAAI,SAChE1C,EAAE,IAAImC,EAAU,oBAAoBtE,GAAGuE,GAAG,SAAS,WAA0C,OAA9BuI,mBAAmBP,EAAM7J,KAAY,KACpGP,EAAE,IAAImC,EAAU,oBAAoBtE,GAAGqC,YAAY,cAEnDF,EAAE,IAAImC,EAAU,oBAAoBtE,GAAGoC,SAAS,YAChDD,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG8J,KAAK,UAAU,MAAMjF,IAAI,aArBhE1C,EAAE,IAAImC,EAAU,cAActE,GAAGkC,IAAI,SACrCC,EAAE,IAAImC,EAAU,oBAAoBtE,GAAGoC,SAAS,YAChDD,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6E,IAAI,cACE,IAAzC1C,EAAE,IAAImC,EAAU,aAAatE,GAAGkC,OAChCC,EAAE,IAAImC,EAAU,iBAAiBtE,GAAGmD,KAAK,wBACzChB,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6D,KAAK,gBAAkB1B,EAAE,IAAImC,EAAU,aAAatE,GAAGkC,SAE9FC,EAAE,IAAImC,EAAU,iBAAiBtE,GAAG6D,KAAK,MACzC1B,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6D,KAAK,oCAlChD1B,EAAE,IAAImC,EAAU,cAActE,GAAGkC,IAAI,SACrCC,EAAE,IAAImC,EAAU,iBAAiBtE,GAAGmD,KAAK,wBACzChB,EAAE,IAAImC,EAAU,oBAAoBtE,GAAGoC,SAAS,YAChDD,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG8J,KAAK,UAAU,MAAMjF,IAAI,cACnB,IAAzC1C,EAAE,IAAImC,EAAU,aAAatE,GAAGkC,MAChCC,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6D,KAAK,gBAAkB1B,EAAE,IAAImC,EAAU,aAAatE,GAAGkC,OAE9FC,EAAE,IAAImC,EAAU,oBAAoBtE,GAAG6D,SA8C5C,SAASkJ,EAAiBT,EAAUU,GACxC,QAAoCC,WAAzBzK,EAASwK,GAA2B,CAE3C,IAAIjK,EAAO,CACPL,GAAIF,EAASwK,GAAWtK,GACxBmB,KAAMrB,EAASwK,GAAWrK,MAK9B,GAAIR,EAAE,IAAImK,GAAU/C,KAAK,iBAAmBxG,EAAKL,GAAK,MAAMqF,OACpD5F,EAAE,IAAImK,GAAUpK,IAAIa,EAAKL,IAAImI,QAAQ,cACtC,CACH,IAAIqC,EAAY,IAAIC,OAAOpK,EAAKc,KAAMd,EAAKL,IAAI,GAAO,GACtDP,EAAE,IAAImK,GAAUc,OAAOF,GAAWrC,QAAQ,YA8DrD,SAASwC,EAAiBC,EAAcC,EAAiBhN,EAAMiN,GAC3D,IAAIxN,EAAIuN,EAAgBhI,KAAK,MAAMuC,MAAM,KAAK,GACzByF,EAAgBhE,KAAK,gBAC3BxE,YAAY,2FAA6FxE,EAAO,UAI/H,IAFA,IAAIkN,EAAmB,GAEdC,EAAI,EAAGA,EAAIF,EAAiBzF,OAAQ2F,IACzCD,EAAiBD,EAAiBE,GAAG7J,MAAQ2J,EAAiBE,GAAGhL,GAWrE,IAAK,IAAInB,KAAO+L,EACZ,GAAW,iBAAP/L,EAAwB,CACxBA,EAAM,eACN,IAAK,IAAIoC,EAAI,EAAGA,EAAI2J,EAAA,cAA8BvF,OAAQpE,IAAK,CAC3DuH,EAAsBlL,GACtB,IAAI2N,EAAS,IAAIR,OAAO5L,EAAKkM,EAAiBlM,IAAM,GAAO,GAC3DqM,UAAYL,EAAgBhE,KAAK,eACjCqE,UAAUR,OAAOO,GAAQ9C,QAAQ,UACjCgD,SAAWN,EAAgBhE,KAAK,2BAChCsE,SAAS3L,IAAIoL,EAAA,cAA8B3J,IAE3CiK,UAAUR,OAAOO,GAAQ9C,QAAQ,gBAElC,GAAIyC,EAAa/L,IAAQkM,EAAiBlM,GAAM,CACnD2J,EAAsBlL,GAClB2N,EAAS,IAAIR,OAAO5L,EAAKkM,EAAiBlM,IAAM,GAAO,GAC3DqM,UAAYL,EAAgBhE,KAAK,eACjCqE,UAAUR,OAAOO,GAAQ9C,QAAQ,UACjCgD,SAAWN,EAAgBhE,KAAK,2BAChCsE,SAAS3L,IAAIoL,EAAa/L,IAE1BqM,UAAUR,OAAOO,GAAQ9C,QAAQ,UAIzC1I,EAAE,uBAAyBnC,GAAGuJ,KAAK,gBAAgB4B,SACnDhC,EAAuBnJ,GAU3BmC,EAAE2L,UAAUC,OAAM,WAEd3B,IAGAjK,EAAE,gBAAgBoC,GAAG,QAAS,gBAAgB,SAASuE,GACnDA,EAAMkF,iBAjHd,SAAmBC,GACf9L,EAAE,wBAAwB0B,KAAK,IAC/B,IANgBqK,EAMZX,EAAkBpL,EAAE8L,EAAEE,QAAQC,QAAQ,oBAKtC7N,GAHYgN,EAAgBhE,KAAK,eACtBgE,EAAgBhE,KAAK,2BAEhBrH,OAEhBsJ,EAAarJ,EAAE,eAAe0B,OAAO6H,OACzCvJ,EAAE,qBAAqB0B,MAdPqK,EAcuB1C,GAb3B,GAAG6C,cAAgBH,EAAKI,MAAM,IAc1CnM,EAAE,yBAAyB0B,KAAKtD,GAEhC,IACIgO,GADS,IAAIC,YACIC,YAAYlO,GAE7BmO,EAAe,GAEfC,EAAU,EACdJ,EAAQpG,SAAQ,SAASyG,GAErB,IAAK,IAAIrN,KAAOqN,EACRA,EAAMrN,IAA6B,GAArBqN,EAAMrN,GAAKwG,SACzB2G,GAAgB,wCAA0CnN,EAAM,YAAcqN,EAAMrN,GAAO,SAInGY,EAAE,wBAAwBiL,OAAO,+EACiCuB,EADjC,oEAEuCA,EAFvC,+BAGED,EAAe,wBAGlDvM,EAAE,wBAAwBoH,KAAK,4BAA4BxG,KAAK,cAAe6L,GAE/EF,EAAe,GACfC,OAGJxM,EAAE,wBAAwBoH,KAAK,6BAA6BO,KAAK,WAAW,GAG5E3H,EAAE,sBAAsB0M,OAAO,SAC/B1M,EAAE,sBAAsBoC,GAAG,SAAS,WAChC,IAAI+I,EAAenL,EAAE,4CAA4CY,KAAK,eACtEZ,EAAEtB,IAAKuC,QAAU,oDACZ0L,MAAK,SAAS/L,GACfsK,EAAiBC,EAAcC,EAAiBhN,EAAMwC,EAAKgM,eAmE/DC,CAAUlG,GACV3G,EAAE,gBAAgB8M,MAAM,aAG5B9M,EAAE,gBAAgBoC,GAAG,kBAAkB,WACnCpC,EAAE,sBAAsB+M,WAKC,UAAzB/M,EAAE,cAAcD,OAChBD,GAAc,GAGlB6J,IAGC3J,EAAE,eAAe2D,UACpB3D,EAAE,eAAeiH,QAAO,WACdnH,GAAc,GAIY,MAA/BE,EAAE,oBAAoBD,OACO,IAA/BC,EAAE,oBAAoBD,OACvBC,EAAE,cAAcD,IAAI,aAMvB,IAAIiN,EAAc,EACdhN,EAAE,qBAAqB2D,WACvBqJ,EAAcvL,SAASzB,EAAE,qBAAqB0B,SAElDN,QAAQC,IAAI,sBAAwB2L,GAChChN,EAAE,sBAAsB2D,UAC3B3D,EAAE,sBAAsBiN,OAAM,WACpBnN,GAAc,GAEvB,IACUkB,EADChB,EAAE,uBAAuB2B,QACdX,OAAOY,QAAQ,MAAOoL,GAMtC,OALAhN,EAAE,sBAAsB6B,MAAMb,GAC3Bc,EAAc,YAAakL,GAC3BjL,EAAe,YAAaiL,GAC5BhL,EAAa,YAAagL,GAC7BA,GAA4B,GACrB,KAQf,IAAIE,EAAW,EACRC,GAAa,EAChBnN,EAAE,eAAe2D,UACpB3D,EAAE,eAAeiN,OAAM,WAETE,GAGJnN,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,gBAAiB,MAAM,SAAUa,GAC7GuM,GAAa,EACbnN,EAAE,YAAYgB,KAAKJ,GAEnB+I,EAAwB,WAEpB3J,EAAE,kBAAkB2D,WACpBuJ,EAAWzL,SAASzB,EAAE,kBAAkB0B,SAE5CN,QAAQC,IAAI,mBAAqB6L,GAC7BlN,EAAE,mBAAmB2D,UACrB3D,EAAE,mBAAmBiN,OAAM,WACvBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,oBAAoB2B,QACjBX,OAAOY,QAAQ,MAAOsL,GAMtC,OALAlN,EAAE,mBAAmB6B,MAAMb,GAC3Bc,EAAc,SAAUoL,GACxBnL,EAAe,SAAUmL,GACzBlL,EAAa,SAAUkL,GACvBA,GAAsB,GACf,KAIfpD,EAAqB,iBAMpC,IAAIsD,EAAU,EACPC,GAAY,EACfrN,EAAE,cAAc2D,UACnB3D,EAAE,cAAciN,OAAM,WAERI,GAGJrN,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,cAAe,MAAM,SAAUa,GAC3GyM,GAAY,EACZrN,EAAE,UAAUgB,KAAKJ,GAEjB+I,EAAwB,SAEpB3J,EAAE,iBAAiB2D,WACnByJ,EAAU3L,SAASzB,EAAE,iBAAiB0B,SAE1CN,QAAQC,IAAI,uBAAyB+L,GACjCpN,EAAE,uBAAuB2D,UACzB3D,EAAE,uBAAuBiN,OAAM,WAC3BnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,wBAAwB2B,QACrBX,OAAOY,QAAQ,MAAOwL,GAMtC,OALApN,EAAE,kBAAkB6B,MAAMb,GAC1Bc,EAAc,QAASsL,GACvBrL,EAAe,QAASqL,GACxBpL,EAAa,QAASoL,GACtBA,GAAoB,GACb,KAGXpN,EAAE,4BAA4B2D,UAC9B3D,EAAE,4BAA4BiN,OAAM,WAChCnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,6BAA6B2B,QAC1BX,OAAOY,QAAQ,MAAOwL,GAMtC,OALApN,EAAE,kBAAkB6B,MAAMb,GAC1Bc,EAAc,QAASsL,GACvBrL,EAAe,QAASqL,GACxBpL,EAAa,QAASoL,GACtBA,GAAoB,GACb,KAIftD,EAAqB,eAKpC,IAAIwD,EAAW,EACRC,GAAa,EAChBvN,EAAE,cAAc2D,UACnB3D,EAAE,cAAciN,OAAM,WAERM,IAGJvN,EAAEtB,IAAIuC,QAAQ,wCAAyC,MAAM,SAASL,GAClE4M,aAAe5M,EAAKgM,QAAQ,GAAGrM,GAC/BP,EAAE,sBAAsBD,IAAIyN,iBAGhCxN,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,eAAgB,MAAM,SAAUa,GAC5G2M,GAAa,EACbvN,EAAE,WAAWgB,KAAKJ,GAElB+I,EAAwB,UAEpB3J,EAAE,kBAAkB2D,WACpB2J,EAAW7L,SAASzB,EAAE,kBAAkB0B,SAE5CN,QAAQC,IAAI,mBAAqBiM,GAC7BtN,EAAE,mBAAmB2D,UACrB3D,EAAE,mBAAmBiN,OAAM,WACvBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,oBAAoB2B,QACjBX,OAAOY,QAAQ,MAAO0L,GAMtC,OALAtN,EAAE,mBAAmB6B,MAAMb,GAC3Bc,EAAc,SAAUwL,GACxBvL,EAAe,SAAUuL,GACzBtL,EAAa,SAAUsL,GACvBA,GAAsB,GACf,KAIfxD,EAAqB,iBAMpC,IAAI2D,EAAa,EACVC,GAAe,EAClB1N,EAAE,gBAAgB2D,UACrB3D,EAAE,gBAAgBiN,OAAM,WAEVS,GAGJ1N,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,iBAAkB,MAAM,SAAUa,GAC9G8M,GAAe,EACf1N,EAAE,aAAagB,KAAKJ,GAEpB+I,EAAwB,YAEpB3J,EAAE,oBAAoB2D,WACtB8J,EAAahM,SAASzB,EAAE,oBAAoB0B,SAEhDN,QAAQC,IAAI,qBAAuBoM,GAC/BzN,EAAE,qBAAqB2D,UACvB3D,EAAE,qBAAqBiN,OAAM,WACzBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,sBAAsB2B,QACnBX,OAAOY,QAAQ,MAAO6L,GAMtC,OALAzN,EAAE,qBAAqB6B,MAAMb,GAC7Bc,EAAc,WAAY2L,GAC1B1L,EAAe,WAAY0L,GAC3BzL,EAAa,WAAYyL,GACzBA,GAA0B,GACnB,KAIf3D,EAAqB,kBAKpC,IAAI6D,EAAW,EACRC,GAAa,EAChB5N,EAAE,eAAe2D,UACpB3D,EAAE,eAAeiN,OAAM,WAETW,GAGJ5N,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,gBAAiB,MAAM,SAAUa,GAC7GgN,GAAa,EACb5N,EAAE,YAAYgB,KAAKJ,GAEnB+I,EAAwB,WAEpB3J,EAAE,kBAAkB2D,WACpBgK,EAAWlM,SAASzB,EAAE,kBAAkB0B,SAE5CN,QAAQC,IAAI,mBAAqBsM,GAC7B3N,EAAE,mBAAmB2D,UACrB3D,EAAE,mBAAmBiN,OAAM,WACvBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,oBAAoB2B,QACjBX,OAAOY,QAAQ,MAAO+L,GAMtC,OALA3N,EAAE,mBAAmB6B,MAAMb,GAC3Bc,EAAc,SAAU6L,GACxB5L,EAAe,SAAU4L,GACzB3L,EAAa,SAAU2L,GACvBA,GAAsB,GACf,KAIf7D,EAAqB,iBAKpC,IAAI+D,EAAqB,EAClBC,GAAuB,EAC1B9N,EAAE,yBAAyB2D,UAC9B3D,EAAE,yBAAyBiN,OAAM,WAEnBa,GAGJ9N,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,0BAA2B,MAAM,SAAUa,GACvHkN,GAAuB,EACvB9N,EAAE,sBAAsBgB,KAAKJ,GAE7B+I,EAAwB,qBAEpB3J,EAAE,4BAA4B2D,WAC9BkK,EAAqBpM,SAASzB,EAAE,4BAA4B0B,SAEhEN,QAAQC,IAAI,6BAA+BwM,GACtC7N,EAAE,gCAAgC2D,UACnC3D,EAAE,gCAAgCiN,OAAM,WACpC,IAAIc,EAAM/N,EAAE,qCAAsC,yBAAyBD,MAC3E,GAAW,MAAPgO,GAAkC,MAAnBC,iBAAkC,OAAPD,EAAc,CACxDjO,GAAc,GAEd,IACIkB,EADOhB,EAAE,8BAA8B2B,QAC3BX,OAAOY,QAAQ,MAAOiM,GAiCtC,OAhCA7N,EAAE,6BAA6B6B,MAAMb,QAEE,IAA5BgN,gBAAgBD,GAAKxN,IAC5BP,EAAE,gCAAgC6N,GAAoB9N,IAAIiO,gBAAgBD,GAAKxN,SACvC,IAAjCyN,gBAAgBD,GAAKE,SAC5BjO,EAAE,qCAAqC6N,GAAoB9N,IAAIiO,gBAAgBD,GAAKE,cAE/C,IAA9BD,gBAAgBD,GAAKG,MAC5BlO,EAAE,8BAA8B6N,GAAoB7M,KAAK,4BAA4BgN,gBAAgBD,GAAKG,KAAK,KAAKF,gBAAgBD,GAAKG,KAAhF,0DACCF,gBAAgBD,GAAKG,KAAK,mBACvC,IAAtCF,gBAAgBD,GAAKI,cAC5BnO,EAAE,sCAAsC6N,GAAoBnM,KAAKsM,gBAAgBD,GAAKI,mBAChD,IAA/BH,gBAAgBD,GAAKK,QAC5BpO,EAAE,+BAA+B6N,GAAoBnM,KAAKsM,gBAAgBD,GAAKK,OAC/EpE,EAAmB,mBAAoB6D,EAAoBG,gBAAgBD,GAAKK,aAEvC,IAAlCJ,gBAAgBD,GAAKM,UAC5BrO,EAAE,kCAAkC6N,GAAoBnM,KAAKsM,gBAAgBD,GAAKM,eAC3C,IAAhCL,gBAAgBD,GAAKO,QAC5BtO,EAAE,gCAAgC6N,GAAoBnM,KAAKsM,gBAAgBD,GAAKO,aAGnC,IAAtCN,gBAAgBD,GAAKQ,mBAAkF,IAA3CP,gBAAgBD,GAAKQ,aAAa/N,MACrGR,EAAE,sCAAsC6N,GAAoBnM,KAAKsM,gBAAgBD,GAAKQ,aAAa/N,MAEvGR,EAAE,8BAA8B6N,GAAoBhM,MAAM,0DACtDZ,QAAQ,kCAAkC+M,gBAAgBD,GAAKxN,GAAG,sBACtEuB,EAAc,mBAAoB+L,GAClC9L,EAAe,mBAAoB8L,GACnC7L,EAAa,mBAAoB6L,GACjCA,GAA0C,EAC1C7N,EAAE,yBAAyBgB,KAAK,KACzB,EAEX,OAAO,KAIXhB,EAAE,6BAA6B2D,UAC/B3D,EAAE,6BAA6BiN,OAAM,WAEjCjN,EAAE,uBAAuB8M,MAAM,QAG/B5L,YAAW,WAAYlB,EAAE,uBAAuB8M,MAAM,UAAW,KAGjE,IACI9L,EADOhB,EAAE,sBAAsB2B,QACnBX,OAAOY,QAAQ,MAAO,GACtC5B,EAAE,wBAAwBgB,KAAKA,GAC/B,IAAIwN,EAAgBxO,EAAE,0BAEiC,GAAnDA,EAAE,uBAAuBD,MAAMuE,QAAQ,QACvCkK,EAAcpH,KAAK,mBAAmBrH,IAAIC,EAAE,uBAAuBD,OAEnEyO,EAAcpH,KAAK,iBAAiBrH,IAAIC,EAAE,uBAAuBD,OAErEyO,EAAcpH,KAAK,2BAA2BqB,QAAQ,CAChDC,QAAS,QACTC,UAAW,SAEjB8F,uBAAuBD,EAAcpH,KAAK,yBAA0B,gBAAiB,iBACrFlC,qBAAqBsJ,EAAcpH,KAAK,kBAAmB,GAAI,UAAW,GAC1EoH,EAAcpH,KAAK,8BAA8BhF,GAAG,QAASsM,qBAC7DF,EAAcpH,KAAK,gCAAgChF,GAAG,QAASuM,0BAE/D3O,EAAE,uBAAuBoC,GAAG,QAAS,oBAAqBwM,yBAC1D,IAAIC,EAAY,KAQhB,OAPAL,EAAcpH,KAAK,cAAc0H,OAAM,WACnCC,aAAaF,GACbA,EAAY3N,YAAW,WAAa8N,kBAAkB,GAAIC,oBAAsB,QAIpFjP,EAAE,yBAAyBgB,KAAK,KACzB,KAIXhB,EAAE,wBAAwB2D,UAC1B3D,EAAE,yBAAyBoC,GAAG,UAAU,WAEhC,GAAsD,IAAlDpC,EAAE,uCAAuCD,OACpCmP,QAAQ,kDAoDrB,OAhDIlP,EAAE,yCAAyC6C,MAAK,WAC5C7C,EAAE8C,MAAM/C,IAAIC,EAAEuJ,KAAKvJ,EAAE8C,MAAM/C,WAE/BoP,qCAAqCnP,EAAE,0BAEvCA,EAAEoP,KAAKnO,QAAQ,iBAAkBjB,EAAE,yBAAyBqP,aAAa,SAAUzO,GAC/E,QAA2B,IAAhBA,EAAK0J,QAA0C,UAAhB1J,EAAK0J,OAAoB,CAC/DxK,GAAc,GAEd,IACIkB,EADOhB,EAAE,8BAA8B2B,QAC3BX,OAAOY,QAAQ,MAAOiM,GAgCtC,OA/BA7N,EAAE,6BAA6B6B,MAAMb,QAEL,IAArBJ,EAAK0O,SAAS/O,IACrBP,EAAE,gCAAgC6N,GAAoB9N,IAAIa,EAAK0O,SAAS/O,SACvC,IAA1BK,EAAK0O,SAASrB,SACrBjO,EAAE,qCAAqC6N,GAAoB9N,IAAIa,EAAK0O,SAASrB,cAE/C,IAAvBrN,EAAK0O,SAASpB,MACrBlO,EAAE,8BAA8B6N,GAAoB7M,KAAK,4BAA4BJ,EAAK0O,SAASpB,KAAK,KAAKtN,EAAK0O,SAASpB,KAAlE,0DACCtN,EAAK0O,SAASpB,KAAK,mBACvC,IAA/BtN,EAAK0O,SAASnB,cACrBnO,EAAE,sCAAsC6N,GAAoBnM,KAAKd,EAAK0O,SAASnB,mBAChD,IAAxBvN,EAAK0O,SAASlB,QACrBpO,EAAE,+BAA+B6N,GAAoBnM,KAAKd,EAAK0O,SAASlB,OACxEpE,EAAmB,mBAAoB6D,EAAoBjN,EAAK0O,SAASlB,aAEvC,IAA3BxN,EAAK0O,SAASjB,UACrBrO,EAAE,kCAAkC6N,GAAoBnM,KAAKd,EAAK0O,SAASjB,eAC3C,IAAzBzN,EAAK0O,SAAShB,QACrBtO,EAAE,gCAAgC6N,GAAoBnM,KAAKd,EAAK0O,SAAShB,aACnC,IAA/B1N,EAAK0O,SAASf,mBAA2E,IAApC3N,EAAK0O,SAASf,aAAa/N,MACvFR,EAAE,sCAAsC6N,GAAoBnM,KAAKd,EAAK0O,SAASf,aAAa/N,MAEhGR,EAAE,8BAA8B6N,GAAoBhM,MAAM,0DACtDZ,QAAQ,kCAAkCL,EAAK0O,SAAS/O,GAAG,sBAC/DuB,EAAc,mBAAoB+L,GAClC9L,EAAe,mBAAoB8L,GACnC7L,EAAa,mBAAoB6L,GACjCA,GAA0C,EAC1C7N,EAAE,uBAAuB8M,MAAM,QAC/B9M,EAAE,wBAAwBgB,KAAK,KACxB,EAGP,OADAI,QAAQC,IAAIT,IACL,MAGZ,KAIfkJ,EAAqB,2BAMpC,IAAIyF,EAA0B,EACvBC,GAA4B,EAC/BxP,EAAE,8BAA8B2D,UACnC3D,EAAE,8BAA8BiN,OAAM,WAExBuC,GAGJxP,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,+BAAgC,MAAM,SAAUa,GAC5H4O,GAA4B,EAC5BxP,EAAE,2BAA2BgB,KAAKJ,GAElC+I,EAAwB,0BAEpB3J,EAAE,iCAAiC2D,WACnC4L,EAA0B9N,SAASzB,EAAE,iCAAiC0B,SAE1EN,QAAQC,IAAI,kCAAoCkO,GAC5CvP,EAAE,qCAAqC2D,UACvC3D,EAAE,qCAAqCiN,OAAM,WACzC,IAAIwC,EAAMzP,EAAE,qCAAsC,yBAAyBD,MAC3E,GAAW,MAAP0P,EAAa,CACb3P,GAAc,GAEd,IACIkB,EADOhB,EAAE,mCAAmC2B,QAChCX,OAAOY,QAAQ,MAAO2N,GAmBtC,OAlBAvP,EAAE,kCAAkC6B,MAAMb,GAC1ChB,EAAE,mCAAmCuP,GAAyBxP,IAAI0P,GAClEzP,EAAE,kCAAkCuP,GAAyBxP,IAAIC,EAAE,6BAA6ByP,GAAK1P,OACrGC,EAAE,sCAAsCuP,GAAyBxP,IAAIC,EAAE,yBAAyByP,GAAK1P,OACrGC,EAAE,2CAA2CuP,GAAyBxP,IAAIC,EAAE,8BAA8ByP,GAAK1P,OA7rB3I,SAA2BoC,EAAWtE,EAAGwL,GACrC,IAAIrI,EAAO,GACO,UAAdqI,EACArI,EAAO,qDACY,iBAAdqI,EACLrI,EAAO,yDACY,UAAdqI,IACLrI,EAAO,uDACXhB,EAAE,IAAImC,EAAU,wBAAwBtE,GAAGmD,KAAKA,GAurBxB0O,CAAkB,wBAAyBH,EAAyBvP,EAAE,kCAAkCyP,GAAK1P,OAC7GiK,EAAmB,wBAAyBuF,EAAyBvP,EAAE,6BAA6ByP,GAAK1P,OAEzGC,EAAE,sCAAsCuP,GAAyB7N,KAAK1B,EAAE,6BAA6ByP,GAAK1P,OAC1GC,EAAE,0CAA0CuP,GAAyB7N,KAAK1B,EAAE,yBAAyByP,GAAK1P,OAE1G+B,EAAc,wBAAyByN,GACvCxN,EAAe,wBAAyBwN,GACxCvN,EAAa,wBAAyBuN,GAEtCA,GAAoD,GAE7C,EAKX,OAAO,KAIfzF,EAAqB,gCAKpC,IAAI6F,EAAa,EACVC,GAAe,EAClB5P,EAAE,qBAAqB2D,UAC1B3D,EAAE,qBAAqBiN,OAAM,WAEf2C,GAGJ5P,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,sBAAuB,MAAM,SAAUa,GACnHgP,GAAe,EACf5P,EAAE,kBAAkBgB,KAAKJ,GAEzB+I,EAAwB,iBAEpB3J,EAAE,oBAAoB2D,WACtBgM,EAAalO,SAASzB,EAAE,oBAAoB0B,SAEhDN,QAAQC,IAAI,qBAAuBsO,GAC/B3P,EAAE,qBAAqB2D,UACvB3D,EAAE,qBAAqBiN,OAAM,WACzBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,sBAAsB2B,QACnBX,OAAOY,QAAQ,MAAO+N,GAMtC,OALA3P,EAAE,qBAAqB6B,MAAMb,GAC7Bc,EAAc,WAAY6N,GAC1B5N,EAAe,WAAY4N,GAC3B3N,EAAa,WAAY2N,GACzBA,GAA0B,GACnB,KAIf7F,EAAqB,uBAKpC,IAAI+F,EAAY,EACTC,GAAc,EACjB9P,EAAE,gBAAgB2D,UACrB3D,EAAE,gBAAgBiN,OAAM,WAEV6C,GAGJ9P,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,iBAAkB,MAAM,SAAUa,GAC9GkP,GAAc,EACd9P,EAAE,aAAagB,KAAKJ,GAEpB+I,EAAwB,YAEpB3J,EAAE,mBAAmB2D,WACrBkM,EAAYpO,SAASzB,EAAE,mBAAmB0B,SAE9CN,QAAQC,IAAI,oBAAsBwO,GAC9B7P,EAAE,oBAAoB2D,UACtB3D,EAAE,oBAAoBiN,OAAM,WACxBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,qBAAqB2B,QAClBX,OAAOY,QAAQ,MAAOiO,GAMtC,OALA7P,EAAE,oBAAoB6B,MAAMb,GAC5Bc,EAAc,UAAW+N,GACzB9N,EAAe,UAAW8N,GAC1B7N,EAAa,UAAW6N,GACxBA,GAAwB,GACjB,KAIf/F,EAAqB,kBAKpC,IAAIiG,EAAgB,EACbC,GAAkB,EACrBhQ,EAAE,qBAAqB2D,UAC1B3D,EAAE,qBAAqBiN,OAAM,WAEf+C,GAGJhQ,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,sBAAuB,MAAM,SAAUa,GACnHoP,GAAkB,EAClBhQ,EAAE,kBAAkBgB,KAAKJ,GAEzB+I,EAAwB,iBAEpB3J,EAAE,uBAAuB2D,WACzBoM,EAAgBtO,SAASzB,EAAE,uBAAuB0B,SAEtDN,QAAQC,IAAI,wBAA0B0O,GAClC/P,EAAE,wBAAwB2D,UAC1B3D,EAAE,wBAAwBiN,OAAM,WAC5BnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,yBAAyB2B,QACtBX,OAAOY,QAAQ,MAAOmO,GAMtC,OALA/P,EAAE,wBAAwB6B,MAAMb,GAChCc,EAAc,cAAeiO,GAC7BhO,EAAe,cAAegO,GAC9B/N,EAAa,cAAe+N,GAC5BA,GAAgC,GACzB,KAIfjG,EAAqB,uBAKpC,IAAImG,EAAa,EACVC,GAAe,EAClBlQ,EAAE,iBAAiB2D,UACtB3D,EAAE,iBAAiBiN,OAAM,WAEXiD,GAGJlQ,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,kBAAmB,MAAM,SAAUa,GAC/GsP,GAAe,EACflQ,EAAE,cAAcgB,KAAKJ,GAErB+I,EAAwB,aAEpB3J,EAAE,oBAAoB2D,WACtBsM,EAAaxO,SAASzB,EAAE,oBAAoB0B,SAEhDN,QAAQC,IAAI,qBAAuB4O,GAC/BjQ,EAAE,qBAAqB2D,UACvB3D,EAAE,qBAAqBiN,OAAM,WACzBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,sBAAsB2B,QACnBX,OAAOY,QAAQ,MAAOqO,GAMtC,OALAjQ,EAAE,qBAAqB6B,MAAMb,GAC7Bc,EAAc,WAAYmO,GAC1BlO,EAAe,WAAYkO,GAC3BjO,EAAa,WAAYiO,GACzBA,GAA0B,GACnB,KAIfnG,EAAqB,mBAKpC,IAAIqG,EAAe,EACZC,GAAiB,EACpBpQ,EAAE,mBAAmB2D,UACxB3D,EAAE,mBAAmBiN,OAAM,WAEbmD,GAGJpQ,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,oBAAqB,MAAM,SAAUa,GACjHwP,GAAiB,EACjBpQ,EAAE,gBAAgBgB,KAAKJ,GAEvB+I,EAAwB,eAEpB3J,EAAE,sBAAsB2D,WACxBwM,EAAe1O,SAASzB,EAAE,sBAAsB0B,SAEpDN,QAAQC,IAAI,uBAAyB8O,GACjCnQ,EAAE,uBAAuB2D,UACzB3D,EAAE,uBAAuBiN,OAAM,WAC3BnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,wBAAwB2B,QACrBX,OAAOY,QAAQ,MAAOuO,GAMtC,OALAnQ,EAAE,uBAAuB6B,MAAMb,GAC/Bc,EAAc,aAAcqO,GAC5BpO,EAAe,aAAcoO,GAC7BnO,EAAa,aAAcmO,GAC3BA,GAA8B,GACvB,KAIfrG,EAAqB,qBAKpC,IAAIuG,EAAgB,EACbC,GAAkB,EACrBtQ,EAAE,qBAAqB2D,UAC1B3D,EAAE,qBAAqBiN,OAAM,WAEfqD,GAGJtQ,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,sBAAuB,MAAM,SAAUa,GACnH0P,GAAkB,EAClBtQ,EAAE,kBAAkBgB,KAAKJ,GAEzB+I,EAAwB,iBAEpB3J,EAAE,uBAAuB2D,WACzB0M,EAAgB5O,SAASzB,EAAE,uBAAuB0B,SAEtDN,QAAQC,IAAI,wBAA0BgP,GAClCrQ,EAAE,wBAAwB2D,UAC1B3D,EAAE,wBAAwBiN,OAAM,WAC5BnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,yBAAyB2B,QACtBX,OAAOY,QAAQ,MAAOyO,GAMtC,OALArQ,EAAE,wBAAwB6B,MAAMb,GAChCc,EAAc,cAAeuO,GAC7BtO,EAAe,cAAesO,GAC9BrO,EAAa,cAAeqO,GAC5BA,GAAgC,GACzB,KAIfvG,EAAqB,uBAKpC,IAAIyG,EAAU,EACPC,GAAY,EACfxQ,EAAE,cAAc2D,UACnB3D,EAAE,cAAciN,OAAM,WAERuD,GAGJxQ,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,eAAgB,MAAM,SAAUa,GAC5G4P,GAAY,EACZxQ,EAAE,WAAWgB,KAAKJ,GAGlBqJ,IAEAN,EAAwB,UAEpB3J,EAAE,iBAAiB2D,WACnB4M,EAAU9O,SAASzB,EAAE,iBAAiB0B,SAE1CN,QAAQC,IAAI,kBAAoBkP,GAC5BvQ,EAAE,kBAAkB2D,UACpB3D,EAAE,kBAAkBiN,OAAM,WACtBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,mBAAmB2B,QAChBX,OAAOY,QAAQ,MAAO2O,GAMtC,OALAvQ,EAAE,kBAAkB6B,MAAMb,GAC1Bc,EAAc,QAASyO,GACvBxO,EAAe,QAASwO,GACxBvO,EAAa,QAASuO,GACtBA,GAAoB,GACb,KAIfzG,EAAqB,gBAKpC,IAAI2G,EAA0B,EACvBC,GAA4B,EAC/B1Q,EAAE,8BAA8B2D,UACnC3D,EAAE,8BAA8BiN,OAAM,WAExByD,GAGJ1Q,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,+BAAgC,MAAM,SAAUa,GAC5H8P,GAA4B,EAC5B1Q,EAAE,2BAA2BgB,KAAKJ,GAElC+I,EAAwB,0BAEpB3J,EAAE,iCAAiC2D,WACnC8M,EAA0BhP,SAASzB,EAAE,iCAAiC0B,SAE1EN,QAAQC,IAAI,kCAAoCoP,GAC5CzQ,EAAE,kCAAkC2D,UACpC3D,EAAE,kCAAkCiN,OAAM,WACtCnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,mCAAmC2B,QAChCX,OAAOY,QAAQ,MAAO6O,GAMtC,OALAzQ,EAAE,kCAAkC6B,MAAMb,GAC1Cc,EAAc,wBAAyB2O,GACvC1O,EAAe,wBAAyB0O,GACxCzO,EAAa,wBAAyByO,GACtCA,GAAoD,GAC7C,KAIf3G,EAAqB,gCAKpC,IAAI6G,EAAmB,EAChBC,GAAqB,EACxB5Q,EAAE,uBAAuB2D,UAC5B3D,EAAE,uBAAuBiN,OAAM,WAEjB2D,GAGJ5Q,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,wBAAyB,MAAM,SAAUa,GACrHgQ,GAAqB,EACrB5Q,EAAE,oBAAoBgB,KAAKJ,GAE3B+I,EAAwB,mBAEpB3J,EAAE,0BAA0B2D,WAC5BgN,EAAmBlP,SAASzB,EAAE,0BAA0B0B,SAE5DN,QAAQC,IAAI,2BAA6BsP,GACrC3Q,EAAE,2BAA2B2D,UAC7B3D,EAAE,2BAA2BiN,OAAM,WAC/BnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,4BAA4B2B,QACzBX,OAAOY,QAAQ,MAAO+O,GAMtC,OALA3Q,EAAE,2BAA2B6B,MAAMb,GACnCc,EAAc,iBAAkB6O,GAChC5O,EAAe,iBAAkB4O,GACjC3O,EAAa,iBAAkB2O,GAC/BA,GAAsC,GAC/B,KAIf7G,EAAqB,yBAKpC,IAAI+G,EAAyB,EACtBC,GAA2B,EAC9B9Q,EAAE,8BAA8B2D,UACnC3D,EAAE,8BAA8BiN,OAAM,WAExB6D,GAGJ9Q,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,+BAAgC,MAAM,SAAUa,GAC5HkQ,GAA2B,EAC3B9Q,EAAE,2BAA2BgB,KAAKJ,GAElC+I,EAAwB,0BAEpB3J,EAAE,gCAAgC2D,WAClCkN,EAAyBpP,SAASzB,EAAE,gCAAgC0B,SAExEN,QAAQC,IAAI,iCAAmCwP,GAC3C7Q,EAAE,iCAAiC2D,UACnC3D,EAAE,iCAAiCiN,OAAM,WACrCnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,kCAAkC2B,QAC/BX,OAAOY,QAAQ,MAAOiP,GAMtC,OALA7Q,EAAE,iCAAiC6B,MAAMb,GACzCc,EAAc,uBAAwB+O,GACtC9O,EAAe,uBAAwB8O,GACvC7O,EAAa,uBAAwB6O,GACrCA,GAAkD,GAC3C,KAIf/G,EAAqB,gCAKpC,IAAIiH,EAAY,EACTC,GAAc,EACjBhR,EAAE,gBAAgB2D,UACrB3D,EAAE,gBAAgBiN,OAAM,WAEV+D,GAGJhR,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,iBAAkB,MAAM,SAAUa,GAC9GoQ,GAAc,EACdhR,EAAE,aAAagB,KAAKJ,GAEpB+I,EAAwB,YAEpB3J,EAAE,mBAAmB2D,WACrBoN,EAAYtP,SAASzB,EAAE,mBAAmB0B,SAE9CN,QAAQC,IAAI,oBAAsB0P,GAC9B/Q,EAAE,oBAAoB2D,UACtB3D,EAAE,oBAAoBiN,OAAM,WACxBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,qBAAqB2B,QAClBX,OAAOY,QAAQ,MAAOmP,GAMtC,OALA/Q,EAAE,oBAAoB6B,MAAMb,GAC5Bc,EAAc,UAAWiP,GACzBhP,EAAe,UAAWgP,GAC1B/O,EAAa,UAAW+O,GACxBA,GAAwB,GACjB,KAIfjH,EAAqB,kBAKpC,IAAImH,EAAa,EACVC,GAAe,EAClBlR,EAAE,iBAAiB2D,UACtB3D,EAAE,iBAAiBiN,OAAM,WAEXiE,GAGJlR,EAAEtB,IAAIuC,QAAQ,cAAcjB,EAAE,oBAAoBD,MAAM,IAAIC,EAAE,YAAYD,MAAM,kBAAmB,MAAM,SAAUa,GAC/GsQ,GAAe,EACflR,EAAE,cAAcgB,KAAKJ,GAErB+I,EAAwB,aAEpB3J,EAAE,oBAAoB2D,WACtBsN,EAAaxP,SAASzB,EAAE,oBAAoB0B,SAEhDN,QAAQC,IAAI,qBAAuB4P,GAC/BjR,EAAE,qBAAqB2D,UACvB3D,EAAE,qBAAqBiN,OAAM,WACzBnN,GAAc,GAEd,IACIkB,EADOhB,EAAE,sBAAsB2B,QACnBX,OAAOY,QAAQ,MAAOqP,GAMtC,OALAjR,EAAE,qBAAqB6B,MAAMb,GAC7Bc,EAAc,WAAYmP,GAC1BlP,EAAe,WAAYkP,GAC3BjP,EAAa,WAAYiP,GACzBA,GAA0B,GACnB,KAIfnH,EAAqB,mBAKjCA,IAGA9J,EAAE,kBAAkBiN,OAAM,SAASnB,GAC/B9L,EAAE8C,MAAMqO,SAASC,YAAY,QAC7BtF,EAAEuF","file":"edit_scripts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","/**\n * Edit Scripts\n *\n * Scripts used in the edit page\n *\n * @author Robbie Hott\n * @license https://opensource.org/licenses/BSD-3-Clause BSD 3-Clause\n * @copyright 2015 the Rector and Visitors of the University of Virginia, and\n *            the Regents of the University of California\n */\n\nvar biogHistEditor = null;\n\n// Has anything been edited on this page?\nexport var somethingHasBeenEdited = false;\n\nexport function setEditedFlag(val) {\n    if (val == true) {\n       $(\"#save_and_continue\").addClass(\"save-active\");\n    } else {\n       $(\"#save_and_continue\").removeClass(\"save-active\");\n    }\n    somethingHasBeenEdited = val;\n}\n\n\n// Global Undo Set\nexport var undoSet = new Array();\n\nexport var defaults = {\n    language: {\n        id: 130,\n        term: \"eng\"\n    },\n    script: {\n        id: 586,\n        term: \"Latn\"\n    }\n};\n\n\n\n/**\n * Display Error message\n *\n * Displays the error message box to the user with the given error message\n *\n * @param string|object err The error message (string) or error object containing a message and type string\n */\nexport function displayErrorMessage(err, data) {\n    var errorMsg = \"\";\n    if (typeof err === 'undefined')\n        errorMsg = \"an unknown problem occurred\";\n    else if ((typeof err) == \"string\")\n        errorMsg = err;\n    else if (err.message)\n        errorMsg = err.message;\n    else if (err.type)\n        errorMsg = err.type;\n    else\n        errorMsg = \"an unknown problem occurred\";\n\n    $('#error-message').html(\"<h4>Oops</h4><p>\"+errorMsg+\"</p>\"\n            +\"<p class=\\\"text-right\\\">\"\n            +\"<button type=\\\"button\\\" class=\\\"btn btn-warning\\\" aria-label=\\\"Close\\\" onClick=\\\"$('#error-message').slideUp()\\\">\"+\n            \"Stay Here\"\n            +\"</button> \"\n            +\"<a href=\\\"\"+snacUrl+\"/dashboard\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\">\"+\n            \"Go to Dashboard\"\n            +\"</a>\"\n            +\"</p>\");\n    setTimeout(function(){\n        $('#error-message').slideDown();\n    }, 500);\n\n    // For reference, put the server response in the console\n    console.log(data);\n}\n\n/**\n * Add sub-Date GUI object\n *\n * Adds a Date GUI object to the Date modal for the given \"short\" type of data indexed by i\n *\n * @param string short The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i The index of the object to add a date object to.\n * @returns boolean false to keep the browser from redrawing the page\n */\nexport function addDateEntry(short, i){\n\t//next_date_{{short}}_{{i}}_j\n\tvar j = parseInt($('#next_date_'+short+'_'+i+'_j').text());\n\tvar id = j + \"_\" + i;\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\tvar text = $('#sub_date_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/XX/g, j).replace(/SHORT/g, short);\n    $('#add_date_'+short+'_'+i+'_div').after(html);\n    $('#next_date_'+short+'_'+i+'_j').text(j + 1);\n    turnOnButtons(short+\"_date\"+j, i);\n    turnOnTooltips(short+\"_date_\"+j, i);\n    makeEditable(short + \"_date_\"+j, i);\n    return false;\n}\n\n/**\n * Add sub-Date GUI object\n *\n * Adds a Date GUI object to the Date modal for the given \"short\" type of data indexed by i\n *\n * @param string short The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i The index of the object to add a date object to.\n * @returns boolean false to keep the browser from redrawing the page\n */\nexport function addDateRangeEntry(short, i){\n\t//next_date_{{short}}_{{i}}_j\n\tvar j = parseInt($('#next_date_'+short+'_'+i+'_j').text());\n\tvar id = j + \"_\" + i;\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\tvar text = $('#sub_dateRange_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/XX/g, j).replace(/SHORT/g, short);\n    $('#add_date_'+short+'_'+i+'_div').after(html);\n    $('#next_date_'+short+'_'+i+'_j').text(j + 1);\n    turnOnButtons(short+\"_date\"+j, i);\n    turnOnTooltips(short+\"_date_\"+j, i);\n    makeEditable(short + \"_date_\"+j, i);\n    return false;\n}\n\n/**\n * Add SCM GUI object\n *\n * Adds a GUI SCM object to the SCM modal for the given \"short\" type of data indexed by i\n *\n * @param string short The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i The index of the object to add an SCM object to.\n * @returns boolean false to keep the browser from redrawing the page\n */\nexport function addSCMEntry(short, i){\n\t//next_scm_{{short}}_{{i}}_j\n\tvar j = parseInt($('#next_scm_'+short+'_'+i+'_j').text());\n\tvar id = j + \"_\" + i;\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\tvar text = $('#scm_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/YY/g, j).replace(/SHORT/g, short);\n    $('#add_scm_'+short+'_'+i+'_div').after(html);\n    $('#next_scm_'+short+'_'+i+'_j').text(j + 1);\n    turnOnSCMButtons(short, i, j);\n    turnOnTooltips(\"scm_\"+short, id);\n    makeSCMEditable(short, i, j);\n    return false;\n}\n\n/**\n * Undo Edit\n *\n * Returns the html for the (short, i) panel back to its original state, i.e. removes\n * the edit.  Before doing this, to clean up the page, it first makes the edited version\n * uneditable.\n *\n * @param string short The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i The index within the edit page of the object.\n */\nfunction undoEdit(short, i) {\n\tmakeUneditable(short, i);\n\n\t// restore the old content\n\t$(\"#\" + short + \"_datapart_\" + i).replaceWith(undoSet[short+\"-\"+i]);\n    turnOnTooltips(short,i);\n    $(\"#\" + short + \"_datapart_\" + i + \" input[type='checkbox']\").each(function() {\n        var obj = $(this);\n        obj.bootstrapToggle();\n    });\n}\n\n/**\n * Undo SCM Edit\n *\n * Takes an SCM GUI object (j) for a data object (short, i) and returns it back to its\n * original state (removing the edit).  Before doing this, to clean up the page and JS, it first\n * makes the edited version uneditable, then replaces the HTML.\n *\n * @param string short The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i The index within the edit page of the object.\n * @param string|int j The index within the data object SCM list on the edit page of the SCM object.\n */\nfunction undoSCMEdit(short, i, j) {\n\tvar id = j + \"_\" + i;\n\tmakeSCMUneditable(short, i, j);\n\n\t// restore the old content\n\t$(\"#scm_\" + short + \"_datapart_\" + id).replaceWith(undoSet[\"scm_\"+short+\"-\"+id]);\n    turnOnTooltips(\"scm_\"+short, id);\n}\n\n/**\n * Change vocabulary input divs to selects\n *\n * Changes all div's with id \"select_\" for a given data object (shortName, idStr) from a list of\n * inputs defining the parameters to a select (view mode) to a select box (edit mode).  It then\n * calls the select2 function to replace the select with an AJAX-compatible select.\n *\n * This function handles VOCABULARY select boxes ONLY.\n *\n * Note: idStr must not have the \"_\" pre-appended\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int idStr The index within the edit page of the object.\n */\nfunction textToSelect(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='select_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"select_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var id = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr).val();\n            var term = $(\"#\"+shortName+\"_\"+name+\"_term_\"+idStr).val();\n            var vocabtype = $(\"#\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr).val();\n            var minlength = $(\"#\"+shortName+\"_\"+name+\"_minlength_\"+idStr).val();\n            var placeholder = \"Select\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).exists()) {\n                placeholder = $(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).val();\n            }\n            var options = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_defaultOptions_\"+idStr).exists()) {\n                options = $(\"#\"+shortName+\"_\"+name+\"_defaultOptions_\"+idStr).val();\n            }\n\n            cont.html(\"<select id='\"+shortName+\"_\"+name+\"_id_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_id_\"+idStr+\"' class='form-control' data-placeholder='\"+placeholder+\"'>\"+\n                    \"<option></option>\"+\n                    \"<option value=\\\"\"+id+\"\\\" selected>\"+term+\"</option>\"+ options +\n                    \"</select>\"+\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr+\"\\\" \" +\n                        \"name=\\\"\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr+\"\\\" value=\\\"\"+vocabtype+\"\\\"/>\" +\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_minlength_\"+idStr+\"\\\" \" +\n                        \"name=\\\"\"+shortName+\"_\"+name+\"_minlength_\"+idStr+\"\\\" value=\\\"\"+minlength+\"\\\"/>\");\n\n            if (name == \"citation\")\n                scm_source_select_replace($(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr), \"_\"+idStr);\n            else\n                vocab_select_replace($(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr), \"_\"+idStr, vocabtype, minlength);\n\n        }\n    });\n}\n\nfunction textToCheckbox(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='checkbox_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^checkbox_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n            var placeholderOn = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr).exists()) {\n                placeholderOn = $(\"#\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr).val();\n            }\n            var placeholderOff = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr).exists()) {\n                placeholderOff = $(\"#\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr).val();\n            }\n\n            var html = \"<input id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"' class='form-control' type='checkbox' value=\\\"checked\\\"\"+\n                    \"data-on=\\\"\"+placeholderOn+\"\\\" data-off=\\\"\"+placeholderOff+\"\\\"\";\n            if (value == 'checked')\n                html += \" checked\";\n            html += \"/>\";\n            if (placeholderOn != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholderOn+\"\\\"/>\";\n            }\n            if (placeholderOff != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholderOff+\"\\\"/>\";\n            }\n\n            cont.html(html);\n            $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).bootstrapToggle();\n        }\n    });\n\n\n}\n\n\nfunction checkboxToText(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='checkbox_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^checkbox_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n            var checked = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).prop('checked');\n            var placeholderOn = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr).exists()) {\n                placeholderOn = $(\"#\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr).val();\n            }\n            var placeholderOff = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr).exists()) {\n                placeholderOff = $(\"#\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr).val();\n            }\n\n\n            var html = \"<input id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"' type='hidden' value=\\\"\";\n            if (checked)\n                html += \"checked\";\n            html +=\"\\\"/>\";\n\n            html += \"<p class='form-control-static'>\";\n            if (checked) {\n                if (placeholderOn != \"\")\n                   html += placeholderOn;\n                else\n                   html += value;\n            } else {\n                if (placeholderOff != \"\")\n                   html += placeholderOff;\n            }\n            html += \"</p>\";\n            if (placeholderOn != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholderOn_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholderOn+\"\\\"/>\";\n            }\n            if (placeholderOff != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholderOff_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholderOff+\"\\\"/>\";\n            }\n\n            $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).bootstrapToggle(\"destroy\");\n            cont.html(html);\n        }\n    });\n\n\n}\n\nfunction textToInput(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='text_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^text_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n            var size = 0;\n            var sizeStr = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_size_\"+idStr).exists()) {\n                size = parseInt($(\"#\"+shortName+\"_\"+name+\"_size_\"+idStr).val());\n                sizeStr = \" size='\" + size +\"' \";\n            }\n            var placeholder = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).exists()) {\n                placeholder = $(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).val();\n            }\n\n            var onKeyUp = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr).exists()) {\n                onKeyUp = $(\"#\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr).val();\n            }\n            var onKeyUpStr = \"\";\n            if (onKeyUp != \"\") {\n                onKeyUpStr = \" onKeyUp='\"+onKeyUp+\"' \";\n            }\n\n            var html = \"<input id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"' class='form-control' type='text' value=\\\"\"+ value +\"\\\"\"+sizeStr + onKeyUpStr +\n                    \"placeholder=\\\"\"+placeholder+\"\\\"/>\";\n            if (size != 0) {\n                    html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_size_\"+idStr+\"\\\" \" +\n                        \"value=\\\"\"+size+\"\\\"/>\";\n            }\n            if (placeholder != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholder_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholder+\"\\\"/>\";\n            }\n            if (onKeyUp != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+onKeyUp+\"\\\"/>\";\n            }\n\n            cont.html(html);\n        }\n    });\n\n\n}\n\n\nfunction inputToText(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='text_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^text_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n            var size = 0;\n            if ($(\"#\"+shortName+\"_\"+name+\"_size_\"+idStr).exists()) {\n                size = parseInt($(\"#\"+shortName+\"_\"+name+\"_size_\"+idStr).val());\n            }\n            var placeholder = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).exists()) {\n                placeholder = $(\"#\"+shortName+\"_\"+name+\"_placeholder_\"+idStr).val();\n            }\n            var onKeyUp = \"\";\n            if ($(\"#\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr).exists()) {\n                onKeyUp = $(\"#\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr).val();\n            }\n\n            var html = \"<input id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"' type='hidden' value=\\\"\"+ value +\"\\\"/>\";\n            html += \"<p class='form-control-static'>\" + value + \"</p>\";\n            if (size != 0) {\n                    html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_size_\"+idStr+\"\\\" \" +\n                        \"value=\\\"\"+size+\"\\\"/>\";\n            }\n            if (placeholder != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_placeholder_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+placeholder+\"\\\"/>\";\n            }\n            if (onKeyUp != \"\") {\n                html += \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_onKeyUp_\"+idStr+\"\\\" \" +\n                \"value=\\\"\"+onKeyUp+\"\\\"/>\";\n            }\n\n            cont.html(html);\n        }\n    });\n\n\n}\n\n\n\nfunction textToTextArea(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='textarea_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^textarea_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n\n            var html = \"<textarea id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"' class='form-control' style='width: 100%;'>\"+ value +\"</textarea>\";\n\n            cont.html(html);\n        }\n    });\n}\n\n\nfunction textAreaToText(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='textarea_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(/^textarea_/, \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var value = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n\n            //var html = \"<input type='hidden' id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n            //        idStr+\"' value=\\\"\"+ value +\"\\\"/>\";\n            var html = \"<textarea style='display:none;' id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+\n                    idStr+\"'>\"+ value +\"</textarea>\";\n            html += \"<div class='form-control-static'>\" + value + \"</div>\";\n\n            cont.html(html);\n        }\n    });\n}\n\n/**\n * Change vocabulary selects to divs of inputs\n *\n * Changes all div's with id \"select_\" for a given data object (shortName, idStr) from a select\n * box (edit mode) to a list of inputs defining the parameters to a select (view mode).\n *\n * This function handles VOCABULARY select boxes ONLY.\n *\n * Note: idStr must not have the \"_\" pre-appended\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int idStr The index within the edit page of the object.\n */\nfunction selectToText(shortName, idStr) {\n    $(\"div[id^='select_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"select_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var id = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr).val();\n            var term = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr+ \" option:selected\").text();\n            var vocabtype = $(\"#\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr).val();\n            var minlength = $(\"#\"+shortName+\"_\"+name+\"_minlength_\"+idStr).val();\n\n            var additionalStyle = \"\";\n            var postText = \"\";\n            if (vocabtype == \"name_component\") {\n                additionalStyle = \"name-component-type\";\n                postText = \" :\";\n            }\n\n            cont.html(\"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_id_\"+idStr+\"\\\" \" +\n                    \"name=\\\"\"+shortName+\"_\"+name+\"_id_\"+idStr+\"\\\" value=\\\"\"+id+\"\\\"/>\" +\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_term_\"+idStr+\"\\\" \" +\n                    \"name=\\\"\"+shortName+\"_\"+name+\"_term_\"+idStr+\"\\\" value=\\\"\"+term+\"\\\"/>\" +\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr+\"\\\" \" +\n                        \"name=\\\"\"+shortName+\"_\"+name+\"_vocabtype_\"+idStr+\"\\\" value=\\\"\"+vocabtype+\"\\\"/>\" +\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_minlength_\"+idStr+\"\\\" \" +\n                        \"name=\\\"\"+shortName+\"_\"+name+\"_minlength_\"+idStr+\"\\\" value=\\\"\"+minlength+\"\\\"/>\" +\n                        \"<p class=\\\"form-control-static \"+additionalStyle+\"\\\">\"+term+postText+\"</p>\");\n\n        }\n    });\n}\n\n\nvar geoPlaceLoadResults = null;\n\nfunction textToGeoPlaceSelect(shortName, idStr) {\n    $(\"#\"+shortName+\"_datapart_\" + idStr + \" div[id^='selectGeo_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"selectGeo_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var id = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr).val();\n            var term = $(\"#\"+shortName+\"_\"+name+\"_term_\"+idStr).val();\n            var placeholder = \"Select Geo Place Term\";\n\n            var confirmed = $(\"#\"+shortName+\"_confirmed_\" + idStr).val() == \"true\" ? true : false;\n            var firstOptionSelect = \"\";\n            var secondOptionSelect = \" selected\";\n            if (!confirmed) {\n                firstOptionSelect = \" selected\";\n                secondOptionSelect = \"\";\n            }\n\n            cont.html(\"<select id='\"+shortName+\"_\"+name+\"_id_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_id_\"+idStr+\"' class='form-control' data-placeholder='\"+placeholder+\"'>\"+\n                    \"<option\"+firstOptionSelect+\"></option>\"+\n                    \"<option value=\\\"\"+id+\"\\\"\"+secondOptionSelect+\">\"+term+\"</option>\"+\n                    \"</select>\");\n\n            geovocab_select_replace($(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr), \"_\"+idStr);\n\n        }\n    });\n}\n\nfunction geoPlaceSelectToText(shortName, idStr) {\n    $(\"div[id^='selectGeo_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"selectGeo_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var id = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr).val();\n            var term = $(\"#\"+shortName+\"_\"+name+\"_id_\"+idStr+ \" option:selected\").text();\n\n            cont.html(\"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_id_\"+idStr+\"\\\" \" +\n                    \"name=\\\"\"+shortName+\"_\"+name+\"_id_\"+idStr+\"\\\" value=\\\"\"+id+\"\\\"/>\" +\n                    \"<input type=\\\"hidden\\\" id=\\\"\"+shortName+\"_\"+name+\"_term_\"+idStr+\"\\\" \" +\n                    \"name=\\\"\"+shortName+\"_\"+name+\"_term_\"+idStr+\"\\\" value=\\\"\"+term+\"\\\"/>\");\n\n        }\n    });\n}\n\n/**\n * Make a data object editable\n *\n * Make the GUI pane for a given constellation object (short, i) editable.  Sets up the edit and delete\n * buttons for first-order data objects.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @return boolean         False to play nice with the browser\n */\nexport function makeEditable(short, i) {\n    // No editing if it's already in edit mode\n    if ($(\"#\" + short + \"_operation_\" + i).val() == \"update\")\n        return false;\n    // If it's deleted, then you better undelete it first\n    if ($(\"#\" + short + \"_operation_\" + i).val() == \"delete\")\n        setDeleted(short, i);\n\n    $(\"#\" + short + \"_editbutton_\" + i).removeClass(\"list-group-item-info\").addClass(\"list-group-item-warning\");\n    $(\"#\" + short + \"_editbutton_\" + i).html(\"<span class=\\\"fa fa-2x fa-undo\\\"></span><br>Undo\");\n    $(\"#\" + short + \"_editbutton_\" + i).off('click').on(\"click\", function() {\n    \tundoEdit(short, i);\n    });\n    $(\"#\" + short + \"_deletebutton_\" + i).removeClass(\"list-group-item-danger\").addClass(\"disabled\");\n    $(\"#\" + short + \"_deletebutton_\" + i).off('click').on(\"click\", function() {\n        return false;\n    });\n\n    $(\"#\" + short + \"_panel_\" + i).removeClass(\"panel-default\").addClass(\"alert-info\").addClass(\"edited-component\");\n\n    return subMakeEditable(short, i);\n}\n\n/**\n * Make a data object editable\n *\n * Make the GUI pane for a given constellation object (short, i) editable.  Handles removing the read-only\n * statuses and changing divs into selects.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @return boolean         False to play nice with the browser\n */\nfunction subMakeEditable(short, i) {\n    // No editing if it's already in edit mode\n    if ($(\"#\" + short + \"_operation_\" + i).val() == \"update\")\n        return false;\n\n    // Add to the undo set\n    undoSet[short + \"-\" + i] = $(\"#\"+short+\"_datapart_\" + i).clone();\n\n\n    textToInput(short, i);\n    textToTextArea(short, i);\n    textToCheckbox(short, i);\n\n    var idstr = \"_\" + i;\n\n    // Enable buttons\n    $(\"#\"+short+\"_datapart_\" + i + \" button[id^='\"+short+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            obj.removeAttr(\"disabled\").removeClass(\"snac-hidden\");\n        }\n    });\n    // Enable buttons\n    $(\"#\"+short+\"_datapart_\" + i + \" a.label\").each(function() {\n        $(this).removeClass(\"snac-hidden\");\n    });\n\n    // Enable checkboxes\n    $(\"#\"+short+\"_datapart_\" + i + \" input[type='checkbox']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            obj.bootstrapToggle('enable');\n        }\n    });\n\n    // Turn on CodeMirror Editors\n    $(\"#\"+short+\"_datapart_\" + i + \" textarea[id^='\"+short+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr)\n            && !obj.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name from the string we're parsing\n            var idStr = obj.attr('id').replace(short, \"\");\n            if (idStr.indexOf('_text_') != -1 || idStr.indexOf('_source_') != -1) {\n                obj.get(0).CodeMirror = CodeMirror.fromTextArea(obj.get(0), {\n                  lineNumbers: true,\n                  lineWrapping: true,\n                  viewportMargin: Infinity,\n                  mode: {name: \"xml\"}\n                });\n            }\n        }\n    });\n    var sawSelect = false;\n    $(\"#\"+short+\"_datapart_\" + i + \" select[id^='\"+short+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            sawSelect = true;\n        }\n    });\n\n    if (!sawSelect) {\n        textToSelect(short, i);\n        textToGeoPlaceSelect(short, i);\n        textToDate(short, i);\n    }\n\n    // Make things re-orderable if something exists\n    // $( \"#nameEntry_component_ui_0\" ).sortable({  // id of the container containing sortable things\n    //      items       : '.name_component'         // class of the things that are sortable.  They MUST have ids\n    // });\n    $(\"#\"+short+\"_datapart_\" + i + \" span.move-handle\").each(function() {\n        $(this).removeClass(\"snac-hidden\");\n    });\n    $( \"#\"+short+\"_reorderable_\"+i ).sortable({\n          items       : '.reorderable',\n          opacity     : 0.5,\n          update      : function( event, ui ) {\n              var neworder = $( \"#\"+short+\"_reorderable_\"+i ).sortable(\"toArray\");\n              console.log(neworder);\n              neworder.forEach(function(orderedID, index) {\n                    $(\"#\"+orderedID + \" input.order-index\").val(index);\n              });\n              if (short == \"nameEntry\")\n                    updateNameEntryHeading(i);\n          }\n    });\n\n    // Make the relation pictures update appropriately\n    if (short == 'constellationRelation') {\n        // make the role dropdown affect the picture\n        $('#'+short+'_type_id_'+i).change(function() {\n            updatePictureArrow(short, i,\n                $('#'+short+'_type_id_'+i+' option:selected').text());\n        });\n\n    }\n    if (short == 'resourceRelation') {\n        // make the role dropdown affect the picture\n        $('#'+short+'_role_id_'+i).change(function() {\n            updatePictureArrow(short, i,\n                $('#'+short+'_role_id_'+i+' option:selected').text());\n        });\n    }\n    // Places should update the place heading\n    if (short == 'place') {\n        // If there is a value pre-set, then automatically confirm and update\n        if ($('#'+short+'_geoplace_id_'+i).val() != null && $('#'+short+'_geoplace_id_'+i).val() != \"\") {\n            updatePlaceHeading(short, i, $('#'+short+'_geoplace_id_'+i).val());\n        }\n        // make the role dropdown affect the picture\n        $('#'+short+'_geoplace_id_'+i).change(function() {\n            updatePlaceHeading(short, i,\n                $('#'+short+'_geoplace_id_'+i).val());\n        });\n    }\n\n    // add parser btn if nameEntry is a computed name, entity is person, and if no btn or extra name components already exist\n    if (short === 'nameEntry' && ($(\"#entityType\").val() === \"700\") &&\n        ($(\"#nameEntry_component_0_panel_\" + i).find('select:first').text() === \"Name\") &&\n        (!$(\"#nameEntry_panel_\" + i).find('.name-parser').length &&\n            $(\"#nameEntry_component_1_panel_\" + i).length === 0)) {\n        $('#nameEntry_component_add_' + i).after('<button class=\"btn btn-primary name-parser\" id=\"nameEntry_parse_' + i +\n            '\" style=\"margin-left:5px;\"> <i class=\"fa fa-magic\" aria-hidden=\"true\"></i> Parse </button>');\n    }\n\n    // Set this data's operation value appropriately\n    if ($(\"#\" + short + \"_id_\" + i).val() != \"\")\n    \t$(\"#\" + short + \"_operation_\" + i).val(\"update\");\n    else\n    \t$(\"#\" + short + \"_operation_\" + i).val(\"insert\");\n\n    // Asked to edit something, so make it globally known\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\n    return false;\n}\n\n/**\n * Make a data object uneditable\n *\n * Make each object in the GUI page for the given piece uneditable by turning them back to text.  Also\n * takes the color away from the pane and removes the operation flag.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @return boolean         False to play nice with the browser\n */\nfunction subMakeUneditable(shortName, i) {\n\n\t// Make inputs read-only\n    var idstr = \"_\" + i;\n\n\n    // Turn off the reordering js\n    $(\"#\"+shortName+\"_datapart_\" + i + \" span.move-handle\").each(function() {\n        $(this).addClass(\"snac-hidden\");\n    });\n    if ($( \"#\"+shortName+\"_reorderable_\"+i ).hasClass(\"ui-sortable\"))\n        $( \"#\"+shortName+\"_reorderable_\"+i ).sortable(\"destroy\");\n\n    // Remove CodeMirror editors\n    $(\"#\"+shortName+\"_datapart_\" + i + \" textarea[id^='\"+shortName+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr)\n            && !obj.attr('id').endsWith(\"ZZ\")\n            && (obj.attr('id').indexOf('_text_') != -1 || obj.attr('id').indexOf('_source_') != -1)) {\n\n            if (obj.get(0).CodeMirror) {\n                obj.get(0).CodeMirror.toTextArea();\n            }\n            //(document.getElementById(obj.attr('id'))).CodeMirror.toTextArea();\n                //obj.get(0).CodeMirror.toTextArea();\n        }\n    });\n    // Disable buttons\n    $(\"#\"+shortName+\"_datapart_\" + i + \" button[id^='\"+shortName+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            obj.attr(\"disabled\", \"true\").addClass(\"snac-hidden\");\n        }\n    });\n\n    // Disable buttons\n    $(\"#\"+shortName+\"_datapart_\" + i + \" a.label\").each(function() {\n        $(this).addClass(\"snac-hidden\");\n    });\n\n    // Disable checkboxes\n    $(\"#\"+shortName+\"_datapart_\" + i + \" input[type='checkbox']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            obj.bootstrapToggle(\"disable\");\n        }\n    });\n\n    inputToText(shortName, i);\n    textAreaToText(shortName, i);\n    checkboxToText(shortName, i);\n    // Check for a select box\n    var sawSelect = false;\n    $(\"#\"+shortName+\"_datapart_\" + i + \" select[id^='\"+shortName+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            sawSelect = true;\n        }\n    });\n    // If a select box was seen, undo it\n    if (sawSelect) {\n        selectToText(shortName, i);\n        geoPlaceSelectToText(shortName, i);\n        dateToText(shortName,i);\n    }\n\n\n    // Clear the operation flags\n    //$(\"#\" + shortName + \"_operation_\" + i).val(\"\");\n    $(\"#\"+shortName+\"_datapart_\" + i + \" input[id^='\"+shortName+\"_']\").each(function() {\n        var obj = $(this);\n        if(obj.attr('id').endsWith(\"_operation\" + idstr) && !obj.attr('id').endsWith(\"ZZ\")) {\n            obj.val(\"\");\n        }\n    });\n\n\t$(\"#\" + shortName + \"_panel_\" + i).addClass(\"panel-default\").removeClass(\"alert-info\").removeClass(\"edited-component\");\n\n\n\n}\n\n/**\n * Make a data object uneditable\n *\n * Make the GUI pane for a given constellation object (short, i) un-editable.  Sets up the edit and delete\n * buttons for first-order data objects, and calls the function to turn the elements back to text.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @return boolean         False to play nice with the browser\n */\nexport function makeUneditable(shortName, i) {\n\t// Make inputs read-only\n    var idstr = \"_\" + i;\n\n    subMakeUneditable(shortName, i);\n\n    // restore the edit button\n    $(\"#\" + shortName + \"_editbutton_\" + i).addClass(\"list-group-item-info\").removeClass(\"list-group-item-warning\");\n    $(\"#\" + shortName + \"_editbutton_\" + i).html(\"<span class=\\\"fa fa-2x fa-pencil-square-o\\\"></span><br>Edit\");\n    $(\"#\" + shortName + \"_editbutton_\" + i).off('click').on(\"click\", function() {\n    \tmakeEditable(shortName, i);\n    });\n\n    // restore the delete button\n    $(\"#\" + shortName + \"_deletebutton_\" + i).addClass(\"list-group-item-danger\").removeClass(\"disabled\");\n    $(\"#\" + shortName + \"_deletebutton_\" + i).off('click').on(\"click\", function() {\n       setDeleted(shortName, i);\n    });\n\n    return false;\n}\n\n/**\n * Make an SCM data object editable\n *\n * Make the GUI pane for an SCM (j) of a given constellation object (short, i) editable.  Sets up the edit and delete\n * buttons for first-order data objects.\n *\n * @param string shortName  The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i      The index within the edit page of the object.\n * @param string|int j      The index within the data object SCM list on the edit page of the SCM object.\n * @return boolean          False to play nice with the browser\n */\nfunction makeSCMEditable(shortName, i, j) {\n\tvar id = j + \"_\" + i;\n    var scmShortName = \"scm_\" + shortName;\n\n    // No editing if it's already in edit mode\n    if ($(\"#\" + scmShortName + \"_operation_\" + id).val() == \"update\")\n        return false;\n    // If it's deleted, then you better undelete it first\n    if ($(\"#\" + scmShortName + \"_operation_\" + id).val() == \"delete\")\n        setSCMDeleted(shortName, i, j);\n\n    $(\"#\" + scmShortName + \"_editbutton_\" + id).removeClass(\"list-group-item-info\").addClass(\"list-group-item-warning\");\n    $(\"#\" + scmShortName + \"_editbutton_\" + id).html(\"<span class=\\\"fa fa-undo\\\"></span>\");\n    $(\"#\" + scmShortName + \"_editbutton_\" + id).off('click').on(\"click\", function() {\n    \tundoSCMEdit(shortName, i, j);\n    });\n    $(\"#\" + scmShortName + \"_deletebutton_\" + id).removeClass(\"list-group-item-danger\").addClass(\"disabled\");\n    $(\"#\" + scmShortName + \"_deletebutton_\" + id).off('click').on(\"click\", function() {\n        return false;\n    });\n\n    $(\"#\" + scmShortName + \"_panel_\" + id).removeClass(\"panel-default\").addClass(\"alert-info\").addClass(\"edited-component\");\n\n    return subMakeEditable(scmShortName, id);\n}\n\n/**\n * Make an SCM data object un-editable\n *\n * Make the GUI pane for an SCM object (j) for a given constellation object (short, i) un-editable.  Sets up the edit and delete\n * buttons for SCM data objects.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @param string|int j      The index within the data object SCM list on the edit page of the SCM object.\n * @return boolean         False to play nice with the browser\n */\nexport function makeSCMUneditable(shortName, i, j) {\n\n\t// Make inputs read-only\n    var idstr = j + \"_\" + i;\n\n    subMakeUneditable('scm_'+shortName, idstr);\n\n    // restore the edit button\n    $(\"#scm_\" + shortName + \"_editbutton_\" + idstr).addClass(\"list-group-item-info\").removeClass(\"list-group-item-warning\");\n    $(\"#scm_\" + shortName + \"_editbutton_\" + idstr).html(\"<span class=\\\"fa fa-pencil-square-o\\\"></span>\");\n    $(\"#scm_\" + shortName + \"_editbutton_\" + idstr).off('click').on(\"click\", function() {\n    \tmakeSCMEditable(shortName, i, j);\n    });\n\n    // restore the delete button\n    $(\"#scm_\" + shortName + \"_deletebutton_\" + idstr).addClass(\"list-group-item-danger\").removeClass(\"disabled\");\n    $(\"#scm_\" + shortName + \"_deletebutton_\" + idstr).off('click').on(\"click\", function() {\n       setSCMDeleted(shortName, i, j);\n    });\n\n    return false;\n}\n\n/**\n * Set a Contributor Object as deleted\n *\n * Sets the contributor object (shortName, i) as deleted or undeleted and makes the appropriate changes.\n *\n * @param string shortName The short name of the contributor object.\n * @param string|int i     The index within the edit page of the object.\n */\nexport function setRepeatedDataDeleted(shortName, i) {\n    if ($(\"#\" + shortName + \"_operation_\" + i).val() != \"delete\") {\n        $(\"#\" + shortName + \"_remove_\" + i).removeClass(\"btn-danger\").addClass(\"btn-warning\");\n        $(\"#\" + shortName + \"_remove_\" + i).html(\"<i class=\\\"fa fa-undo\\\" aria-hidden=\\\"true\\\"></i>\");\n    } else {\n        $(\"#\" + shortName + \"_remove_\" + i).removeClass(\"btn-warning\").addClass(\"btn-danger\");\n        $(\"#\" + shortName + \"_remove_\" + i).html(\"<span class=\\\"glyphicon glyphicon-minus-sign\\\"></span>\");\n    }\n\n    return subSetDeleted(shortName, i);\n}\n\n/**\n * Set a first-order data object as deleted\n *\n * Sets a first-order data object (short, i) as deleted or undeleted and makes the appropriate changes throughout the page.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n */\nfunction setDeleted(short, i) {\n    if ($(\"#\" + short + \"_operation_\" + i).val() != \"delete\") {\n    \t// set deleted\n        $(\"#\" + short + \"_deletebutton_\" + i).removeClass(\"list-group-item-danger\").addClass(\"list-group-item-warning\");\n        $(\"#\" + short + \"_deletebutton_\" + i).html(\"<span class=\\\"fa fa-2x fa-undo\\\"></span><br>Undo\");\n\n        // disable edit button\n        $(\"#\" + short + \"_editbutton_\" + i).removeClass(\"list-group-item-info\").addClass(\"disabled\");\n        $(\"#\" + short + \"_editbutton_\" + i).off('click').on(\"click\", function() {\n           return false;\n        });\n\n        // disable the Date button\n        $(\"#\" + short + \"_datebutton_\" + i).removeClass(\"list-group-item-success\").addClass(\"disabled\").prop('disabled', true);\n\n        // disable the SCM button\n        $(\"#\" + short + \"_scmbutton_\" + i).removeClass(\"list-group-item-success\").addClass(\"disabled\").prop('disabled', true);\n\n    } else {\n    \t// set undelete\n        $(\"#\" + short + \"_deletebutton_\" + i).removeClass(\"list-group-item-warning\").addClass(\"list-group-item-danger\");\n        $(\"#\" + short + \"_deletebutton_\" + i).html(\"<span class=\\\"fa fa-2x fa-trash-o\\\"></span><br>Trash\");\n\n        // restore edit button\n        $(\"#\" + short + \"_editbutton_\" + i).addClass(\"list-group-item-info\").removeClass(\"disabled\");\n        $(\"#\" + short + \"_editbutton_\" + i).off('click').on(\"click\", function() {\n           makeEditable(short, i);\n        });\n\n        // restore the Date button\n        $(\"#\" + short + \"_datebutton_\" + i).addClass(\"list-group-item-success\").removeClass(\"disabled\").prop('disabled', false);\n\n        // restore the SCM button\n        $(\"#\" + short + \"_scmbutton_\" + i).addClass(\"list-group-item-success\").removeClass(\"disabled\").prop('disabled', false);\n\n    }\n\n    return subSetDeleted(short, i);\n}\n\n/**\n * Make the delete/undelete happen\n *\n * Actually performs the changes to the object, affecting the operation and panel color.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @return boolean         False to play nice with the browser\n */\nfunction subSetDeleted(short, i) {\n    if ($(\"#\" + short + \"_operation_\" + i).val() != \"delete\") {\n    \t// set deleted\n    \t$(\"#\" + short + \"_panel_\" + i).removeClass(\"panel-default\").addClass(\"alert-danger\").addClass(\"deleted-component\");\n\n        $(\"#\" + short + \"_operation_\" + i).val(\"delete\");\n    } else {\n    \t// set undelete\n    \t$(\"#\" + short + \"_panel_\" + i).removeClass(\"alert-danger\").addClass(\"panel-default\").removeClass(\"deleted-component\");\n\n        // If this thing was deleted but is supposed to be an update, then return it back to update status\n        var sawSelect = false;\n        $(\"select[id^='\"+short+\"_']\").each(function() {\n            var obj = $(this);\n            if(obj.attr('id').endsWith(\"_\" + i)  && !obj.attr('id').endsWith(\"ZZ\")) {\n                sawSelect = true;\n            }\n        });\n        if (sawSelect) {\n    \t    if ($(\"#\" + short + \"_id_\" + i).val() != \"\")\n    \t    \t$(\"#\" + short + \"_operation_\" + i).val(\"update\");\n    \t    else\n    \t    \t$(\"#\" + short + \"_operation_\" + i).val(\"insert\");\n        } else {\n        \t$(\"#\" + short + \"_operation_\" + i).val(\"\");\n        }\n\n    }\n\n    // Asked to delete something, so make it globally known\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\n    return false;\n}\n\n/**\n * Set an SCM data object as deleted\n *\n * Sets an SCM object (j) for a constellation object (short, i) as deleted or undeleted and makes the appropriate changes throughout the page.\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @param string|int j      The index within the data object SCM list on the edit page of the SCM object.\n */\nfunction setSCMDeleted(short, i, j) {\n\tvar id = j + '_' + i;\n    if ($(\"#scm_\" + short + \"_operation_\" + id).val() != \"delete\") {\n    \t// set deleted\n        $(\"#scm_\" + short + \"_deletebutton_\" + id).removeClass(\"list-group-item-danger\").addClass(\"list-group-item-warning\");\n        $(\"#scm_\" + short + \"_deletebutton_\" + id).html(\"<span class=\\\"fa fa-undo\\\"></span>\");\n\n        // disable edit button\n        $(\"#scm_\" + short + \"_editbutton_\" + id).removeClass(\"list-group-item-info\").addClass(\"disabled\");\n        $(\"#scm_\" + short + \"_editbutton_\" + id).off('click').on(\"click\", function() {\n           return false;\n        });\n\n    } else {\n    \t// set undelete\n        $(\"#scm_\" + short + \"_deletebutton_\" + id).removeClass(\"list-group-item-warning\").addClass(\"list-group-item-danger\");\n        $(\"#scm_\" + short + \"_deletebutton_\" + id).html(\"<span class=\\\"fa fa-trash-o\\\"></span>\");\n\n        // restore edit button\n        $(\"#scm_\" + short + \"_editbutton_\" + id).addClass(\"list-group-item-info\").removeClass(\"disabled\");\n        $(\"#scm_\" + short + \"_editbutton_\" + id).off('click').on(\"click\", function() {\n           makeSCMEditable(short, i, j);\n        });\n\n    }\n\n    return subSetDeleted(\"scm_\"+short, id);\n}\n\n/**\n * Turn on the Edit/Delete buttons for an object\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n */\nfunction turnOnButtons(shortName, i) {\n\n    // Turn on the edit button\n    $(\"#\"+shortName+\"_editbutton_\"+i).on(\"click\", function() {\n        makeEditable(shortName, i);\n    });\n\n    // Turn on the delete buttons\n    $(\"#\"+shortName+\"_deletebutton_\"+i).on(\"click\", function() {\n        setDeleted(shortName, i);\n    });\n}\n\nfunction turnOnTooltips(shortName, i) {\n    // Load tooltips\n    $(function () {\n          $('#'+shortName+'_panel_'+ i +' [data-toggle=\"tooltip\"]').tooltip()\n    })\n\n    // Load popovers\n    $(function () {\n          $('#'+shortName+'_panel_'+ i +' [data-toggle=\"popover\"]').popover({\n                trigger: 'hover',\n                container: 'body'\n          })\n    })\n\n\n}\n\n/**\n * Turn on the Edit/Delete buttons for an SCM object\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int i     The index within the edit page of the object.\n * @param string|int j      The index within the data object SCM list on the edit page of the SCM object.\n */\nfunction turnOnSCMButtons(shortName, i, j) {\n\n    // Turn on the edit button\n    $(\"#scm_\"+shortName+\"_editbutton_\"+j+\"_\"+i).on(\"click\", function() {\n        makeSCMEditable(shortName, i, j);\n    });\n\n    // Turn on the delete buttons\n    $(\"#scm_\"+shortName+\"_deletebutton_\"+j+\"_\"+i).on(\"click\", function() {\n        setSCMDeleted(shortName, i, j);\n    });\n}\n\n/**\n * Create a new Address Line object on page\n *\n * Puts a new Place Address Line object DIV on the page and attaches it correctly to the DOM and javascript.\n *\n * @param  int     i    The index on the page of the place to add this component to\n * @return boolean      false to play nice with the browser.\n */\nexport function newAddressLine(i) {\n\tvar nextid = 1;\n\tif ($('#place_address_next_j_'+i).exists()) {\n\t    nextid = parseInt($('#place_address_next_j_'+i).text());\n\t}\n\tconsole.log(\"Creating new address line for place \" + i + \" with id: \" + nextid);\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n    var text = $('#addressline_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/YY/g, nextid);\n    $('#place_address_add_div_'+i).before(html);\n\n    $('#place_address_' + nextid + '_operation_' + 1).val(\"insert\");\n    subMakeEditable(\"place_address_\" + nextid, i);\n\n    vocab_select_replace($(\"#place_address_\"+nextid+\"_type_id_\"+i), \"_\"+i, 'address_part', 0);\n\n    // Put the updated version number back in the DOM\n    $('#place_address_next_j_'+i).text(++nextid);\n\n    return false;\n}\n\n/**\n * Create a new Resource Relation Origination Name object on page\n *\n * Puts a new Resource Relation Origination Name object DIV on the page and attaches it correctly to the DOM and javascript.\n *\n * @param  int     i    The index on the page of the Resource Relation to add this Origination Name to\n * @return boolean      false to play nice with the browser.\n */\nfunction newOriginationName(i) {\n\tvar nextid = 1;\n\tif ($('#resource_originationName_next_j_'+i).exists()) {\n\t    nextid = parseInt($('#resource_originationName_next_j_'+i).text());\n\t}\n\tconsole.log(\"Creating new origination name for resource \" + i + \" with id: \" + nextid);\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n    var text = $('#originationName_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/YY/g, nextid);\n    $('#resource_originationName_add_div_'+i).before(html);\n\n    $('#resource_originationName_' + nextid + '_operation_' + 1).val(\"insert\");\n    subMakeEditable(\"resource_originationName_\" + nextid, i);\n\n    // Put the updated version number back in the DOM\n    $('#resource_originationName_next_j_'+i).text(++nextid);\n\n    return false;\n}\n\n\n/**\n * Create a new Name Entry Component object on page\n *\n * Puts a new Name Entry component object DIV on the page and attaches it correctly to the DOM and javascript.\n *\n * @param  int     i    The index on the page of the nameEntry to add this component to\n * @return boolean      false to play nice with the browser.\n */\nexport function newNameEntryComponent(i) {\n    removeParserButton(i);\n\tvar nextid = 1;\n\tif ($('#nameEntry_component_next_j_'+i).exists()) {\n\t    nextid = parseInt($('#nameEntry_component_next_j_'+i).text());\n\t}\n\tconsole.log(\"Creating new name entry component for nameEntry \" + i + \" with id: \" + nextid);\n\n    // add parser btn if entity is person, and if no btn or other name components already exist\n    if (($(\"#entityType\").val() === \"700\") && (nextid == 0) &&\n        (!$(\"#nameEntry_panel_\" + i).find('.name-parser').length &&\n            $(\"#nameEntry_component_1_panel_\" + i).length === 0)) {\n        $('#nameEntry_component_add_' + i).after('<button class=\"btn btn-primary name-parser\" id=\"nameEntry_parse_' + i +\n            '\" style=\"margin-left:5px;\"> <i class=\"fa fa-magic\" aria-hidden=\"true\"></i> Parse </button>');\n    }\n\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n\n    var text = $('#component_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/YY/g, nextid);\n    $('#nameEntry_component_add_div_'+i).before(html);\n\n    $('#nameEntry_component_' + nextid + '_operation_' + 1).val(\"insert\");\n    subMakeEditable(\"nameEntry_component_\" + nextid, i);\n\n    vocab_select_replace($(\"#nameEntry_component_\"+nextid+\"_type_id_\"+i), \"_\"+i, 'name_component', 0);\n\n    // Put the updated version number back in the DOM\n    $('#nameEntry_component_next_j_'+i).text(++nextid);\n\n    return false;\n}\n\nexport function updateNameEntryHeading(i) {\n    var text = \"\";\n    var components = [];\n\n    $(\"#nameEntry_panel_\"+i+\" div[id^='nameEntry_component_']\").each(function() {\n        var obj = $(this);\n        if (!obj.hasClass(\"deleted-component\") && obj.attr('id').endsWith(\"_panel_\" + i)\n                && !obj.attr('id').endsWith(\"ZZ\")) {\n            var j = obj.attr('id').replace(\"nameEntry_component_\", \"\").replace(\"_panel_\"+i, \"\");\n            var type = $(\"#nameEntry_component_\"+j+\"_type_id_\"+i+\" option:selected\").text();\n            var partText = $(\"#nameEntry_component_\"+j+\"_text_\"+i).val();\n\n            components.push([type, partText]);\n        }\n    });\n\n    var entityType = $(\"#entityType option:selected\").text();\n    text = combineNameHeading(components, entityType);\n\n\n    $(\"#nameEntry_heading_\"+i).text(text.trim());\n    $(\"#nameEntry_original_\"+i).val(text.trim());\n}\n\n\n/**\n * Create a new Name Entry Rules object on page\n *\n * Puts a new Name Entry rule object DIV on the page and attaches it correctly to the DOM and javascript.\n *\n * @param  int     i    The index on the page of the nameEntry to add this rule to\n * @return boolean      false to play nice with the browser.\n */\nexport function newNameEntryRule(i) {\n\tvar nextid = 1;\n\tif ($('#nameEntry_rule_next_j_'+i).exists()) {\n\t    nextid = parseInt($('#nameEntry_rule_next_j_'+i).text());\n\t}\n\tconsole.log(\"Creating new name entry rule for nameEntry \" + i + \" with id: \" + nextid);\n    setEditedFlag(true);\n    //somethingHasBeenEdited = true;\n    var text = $('#rule_template').clone();\n    var html = text.html().replace(/ZZ/g, i).replace(/YY/g, nextid);\n    $('#nameEntry_rule_add_div_'+i).before(html);\n\n    $('#nameEntry_rule_' + nextid + '_operation_' + 1).val(\"insert\");\n    turnOnTooltips(\"nameEntry_rule_\" + nextid, i);\n    subMakeEditable(\"nameEntry_rule_\" + nextid, i);\n\n    // Put the updated version number back in the DOM\n    $('#nameEntry_rule_next_j_'+i).text(++nextid);\n\n    return false;\n}\n\n/**\n * Parse a date string into parts\n */\nfunction parseDate(dateString) {\n   var pieces = dateString.split(\"-\");\n   if (pieces.length == 3)\n      return {\n          year : parseInt(pieces[0]),\n          month : parseInt(pieces[1]),\n          day : parseInt(pieces[2])\n      };\n   else if (pieces.length == 2)\n      return {\n          year : parseInt(pieces[0]),\n          month : parseInt(pieces[1]),\n          day : ''\n      };\n   else if (pieces.length == 1 && pieces[0] != '')\n      return {\n          year : parseInt(pieces[0]),\n          month : '',\n          day : ''\n      };\n   else return {\n       year : '', month : '', day : ''\n   }\n}\n\n/**\n * Change date input divs to select and boxes\n *\n * Changes all div's with id \"date_\" for a given data object (shortName, idStr) from a list of\n * inputs defining the parameters (view mode) to a inputs and a select (edit mode).  It then\n * calls the select2 function to replace the select with one matching the rest of the page.\n *\n * Note: idStr must not have the \"_\" pre-appended\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int idStr The index within the edit page of the object.\n */\nfunction textToDate(shortName, idStr) {\n    $(\"div[id^='date_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"date_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n            var dateStr = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n\n            var dateParts = parseDate(dateStr);\n\n            var html = \"<input type='text' size='4' style='width:20%;display:inline;' placeholder='YYYY' id='\"+shortName+\"_\"+name+\"_year_\"+idStr+\"' class='form-control' value='\"+dateParts.year+\"'>\";\n            html += \"<span class='form-control-static'> - </span>\";\n            html += \"<select id='\"+shortName+\"_\"+name+\"_month_\"+idStr+\"' class='form-control' data-placeholder='Month' style='width: 57%; margin-bottom: 5px; display: inline-block;'>\"+\n                    \"<option></option>\";\n            var months = [\"January\", \"February\", \"March\", \"April\", \"May\",\n                            \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\n            months.forEach(function(value, key) {\n                var mInt = key + 1;\n\n                if (mInt == dateParts.month)\n                    html += \"<option value=\\\"\"+mInt+\"\\\" selected>\"+value+\"</option>\";\n                else\n                    html += \"<option value=\\\"\"+mInt+\"\\\">\"+value+\"</option>\";\n            });\n            html += \"<select> \";\n            html += \"<span class='form-control-static'> - </span>\";\n            html += \"<input type='text' style='width:14%;display:inline;' size='2' placeholder='DD' id='\"+shortName+\"_\"+name+\"_day_\"+idStr+\"' class='form-control' value='\"+dateParts.day+\"'> \";\n            html += \"<input type='hidden' id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+idStr+\"' value='\"+dateStr+\"'>\";\n            cont.html(html);\n\n            $(\"#\"+shortName+\"_\"+name+\"_month_\"+idStr).select2({\n                    width: '57%',\n                    allowClear: true,\n                    theme: 'bootstrap',\n                    placeholder: 'Month'\n                });\n\n        }\n    });\n}\n\n/**\n * Pad an integer\n *\n * This is a helper function to pad an integer with 0s for display.  This is useful to pad\n * a month or day with a leading 0.\n *\n * @param int|string num The number to pad\n * @param int size The total width of the desired output\n * @return string A string containing a size-wide integer representation, 0-padded\n */\nfunction pad(num, size) {\n    var s = num+\"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n}\n\n/**\n * Updates the standard date input field\n *\n * If the date for the data object (shortName, idStr) has been turned into a 3-field edit\n * area, then this function will update the hidden standard date (YYYY-MM-DD) field with the\n * newest values from the human-enterable field.\n *\n * Note: idStr must not have the \"_\" pre-appended\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int idStr The index within the edit page of the object.\n */\nexport function updateDate(shortName, idStr) {\n    $(\"div[id^='date_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"date_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n\n            if ($(\"#\"+shortName+\"_\"+name+\"_year_\"+idStr).exists()) {\n                var year = $(\"#\"+shortName+\"_\"+name+\"_year_\"+idStr).val();\n                var day = $(\"#\"+shortName+\"_\"+name+\"_day_\"+idStr).val();\n                var month = $(\"#\"+shortName+\"_\"+name+\"_month_\"+idStr+ \" option:selected\").val();\n\n                var dateStr = \"\";\n                if (year != \"\") {\n                    dateStr += pad(year, 4);\n                    if (month != \"\") {\n                        dateStr += \"-\" + pad(month,2);\n                        if (day != \"\") {\n                            dateStr += \"-\" + pad(day,2);\n                        }\n                    }\n                }\n\n                $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val(dateStr);\n            }\n\n        }\n    });\n}\n\n/**\n * Return editable date area back to text\n *\n * If the date for the data object (shortName, idStr) has been turned into a 3-field edit\n * area, then this function will return the editable area back to the view mode text, replacing\n * the edit boxes with a paragraph containing the computed standard date string (YYYY-MM-DD).\n *\n * Note: idStr must not have the \"_\" pre-appended\n *\n * @param string shortName The short name of the data object, such as \"nameEntry\" or \"occupation\"\n * @param string|int idStr The index within the edit page of the object.\n */\nfunction dateToText(shortName, idStr) {\n    $(\"div[id^='date_\"+shortName+\"']\").each(function() {\n        var cont = $(this);\n        if(cont.attr('id').endsWith(\"_\"+idStr) && !cont.attr('id').endsWith(\"ZZ\")) {\n            // remove the short name and \"select_\" from the string we're parsing\n            var divStr = cont.attr('id').replace(\"date_\", \"\").replace(shortName + \"_\", \"\");\n            // remove the idstr to receive the name of this element\n            var regex = new RegExp(\"\\_\"+idStr+\"$\", \"g\");\n            var name = divStr.replace(regex, \"\");\n\n            updateDate(shortName, idStr);\n\n\n            var dateStr = $(\"#\"+shortName+\"_\"+name+\"_\"+idStr).val();\n\n            var html = \"<p class='form-control-static'>\"+dateStr+\"</p>\";\n            html += \"<input type='hidden' id='\"+shortName+\"_\"+name+\"_\"+idStr+\"' name='\"+shortName+\"_\"+name+\"_\"+idStr+\"' value='\"+dateStr+\"'>\";\n            cont.html(html);\n\n        }\n    });\n}\n\n\n// TODO: If we want to show a DIV of edited and deleted components, we should use the following two functions\n// to get copies of the edited/deleted components from the page.  We can then insert those copies onto a modal\n// dialog box with a \"Save\" or \"Continue\" button at the top and bottom.\n//\n// All the pieces shown in the dialog should be disabled.  One way to do this would be using the following\n// method to place a semi-transparent div on top of the editable pieces, making them appear to be grayed out\n// and with the not permitted cursor.\n//\n// .append('<div style=\"position:absolute; top:0; left:0; width:100%; height:100%; background:#f3f3f3; z-index:500; cursor:not-allowed;opacity:0.4;filter: alpha(opacity = 50)\"></div>');\n//\n// Note: this modal should NOT be inside the constellation form so that we don't submit the values twice.\n\n/**\n * Get all the edited components\n */\nfunction getEdited() {\n    var html = \"\";\n\n    $(\"#constellation_form div.edited-component\").each(function() {\n        var cont = $(this);\n        console.log(cont.attr('id'));\n        var pieces = cont.attr('id').split(\"_panel_\");\n        if (pieces.length == 2) {\n            html += \"<div class='panel panel-body edited-component'>\" + $(\"#\"+pieces[0] + \"_datapart_\" + pieces[1]).html() + \"</div>\";\n        }\n    });\n\n    return html;\n}\n\n/**\n * Get all the deleted components\n */\nfunction getDeleted() {\n    var html = \"\";\n\n    $(\"#constellation_form div.deleted-component\").each(function() {\n        var cont = $(this);\n        console.log(cont.attr('id'));\n        var pieces = cont.attr('id').split(\"_panel_\");\n        if (pieces.length == 2) {\n            html += \"<div class='panel panel-body deleted-component'>\" + $(\"#\"+pieces[0] + \"_datapart_\" + pieces[1]).html() + \"</div>\";\n        }\n    });\n\n    return html;\n}\n\nfunction turnOnEditDeleteButtons(part='') {\n    var divID = '';\n    if (part != '')\n        divID = \"#\" + part + \" \";\n    // Turn on the edit buttons\n    $(divID + \"a[id*='editbutton']\").each(function() {\n        var obj = $(this);\n        var pieces = obj.attr('id').split(\"_\");\n\n        if (pieces.length == 3) {\n            var short = pieces[0];\n            var i = pieces[2];\n            obj.on(\"click\", function() {\n                makeEditable(short, i);\n            });\n        } else if (pieces.length == 5 && pieces[0] == \"scm\") {\n            var short = pieces[1];\n            var i = pieces[4];\n            var j = pieces[3];\n            obj.on(\"click\", function() {\n                makeSCMEditable(short, i, j);\n            });\n        } else if (pieces.length == 5) {\n            var short = pieces[0] + \"_\" + pieces[1] + \"_\" + pieces[2];\n            var i = pieces[4];\n            obj.on(\"click\", function() {\n                makeEditable(short, i);\n            });\n        }\n    });\n\n    // Turn on the delete buttons\n    $(divID + \"a[id*='deletebutton']\").each(function() {\n        var obj = $(this);\n        var pieces = obj.attr('id').split(\"_\");\n\n        if (pieces.length == 3) {\n            var short = pieces[0];\n            var i = pieces[2];\n            obj.on(\"click\", function() {\n                setDeleted(short, i);\n            });\n        } else if (pieces.length == 5 && pieces[0] == \"scm\") {\n            var short = pieces[1];\n            var i = pieces[4];\n            var j = pieces[3];\n            obj.on(\"click\", function() {\n                setSCMDeleted(short, i, j);\n            });\n        } else if (pieces.length == 5) {\n            var short = pieces[0] + \"_\" + pieces[1] + \"_\" + pieces[2];\n            var i = pieces[4];\n            obj.on(\"click\", function() {\n                setDeleted(short, i);\n            });\n        }\n    });\n}\n\nfunction turnOnTooltipsForTab(part='') {\n    var divID = '';\n    if (part != '')\n        divID = \"#\" + part + \" \";\n    // Load tooltips\n    $(function () {\n          $(divID + '[data-toggle=\"tooltip\"]').tooltip()\n    })\n\n    // Load popovers\n    $(function () {\n          $(divID + '[data-toggle=\"popover\"]').popover({\n                trigger: 'hover',\n                container: 'body'\n          })\n    })\n\n}\n\nfunction updatePictureArrow(shortName, i, newValue) {\n    $('#'+shortName+'_relationPictureArrow_'+i).text(newValue);\n}\n\nfunction updatePictureTitle(shortName, i, newValue) {\n    $('#'+shortName+'_relationPictureTitle_'+i).text(newValue);\n}\n\nfunction updatePictureIcon(shortName, i, entityType) {\n    var html = \"\";\n    if (entityType == 'person')\n        html = '<i class=\"fa fa-user\" aria-hidden=\"true\"></i><br/>';\n    else if (entityType == 'corporateBody')\n        html = '<i class=\"fa fa-building\" aria-hidden=\"true\"></i><br/>';\n    else if (entityType == 'family')\n        html = '<i class=\"fa fa-users\" aria-hidden=\"true\"></i><br/>';\n    $('#'+shortName+'_relationPictureIcon_'+i).html(html);\n}\n\n\nvar geoPlaceLoadResults = null;\n\nfunction loadGeoPlaceResultCache() {\n    $(\"input[id^='place_geoplace_id_']\").each(function() {\n        var obj = $(this);\n        // Query for term by ajax\n        if (obj.val() != null && obj.val() != \"\") {\n            $.get(snacUrl+\"/vocabulary/read?type=geoPlace&id=\"+obj.val(), null, function (data) {\n                // Check the return value from the ajax. If success, then go to dashboard\n                if (data.term) {\n                    if (!geoPlaceLoadResults)\n                        geoPlaceLoadResults = new Array();\n                    geoPlaceLoadResults.push(data.term);\n                }\n            });\n        }\n    });\n}\n\nexport function chooseSuggestedGeoPlace(selectID, idStr, value) {\n    // idStr == id number on the page\n    var obj = $(\"#\"+selectID);\n    obj.select2('destroy');\n    obj.val(value);\n    geovocab_select_replace(obj, \"_\"+idStr);\n    updatePlaceHeading(\"place\", idStr, value);\n}\n\nfunction updatePlaceHeading(shortName, i, newValue) {\n    var place = null;\n    if (!geoPlaceSearchResults && !geoPlaceLoadResults) {\n        $('#'+shortName+'_confirmed_'+i).val(\"false\");\n        $('#'+shortName+'_geoterm_text_'+i).html(\"<em>Unconfirmed</em>\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).addClass(\"disabled\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).prop('onclick',null).off(\"click\");\n        if ($('#'+shortName+'_original_'+i).val() != \"\")\n            $('#'+shortName+'_geoterm_caption_'+i).text(\"Recorded as: \" + $('#'+shortName+'_original_'+i).val());\n        else\n            $('#'+shortName+'_geoterm_caption_'+i).text();\n        return;\n    }\n\n    if (geoPlaceSearchResults) {\n        geoPlaceSearchResults.forEach(function(result) {\n            if (result.id == newValue)\n                place = result;\n        });\n    }\n\n    if (!place && geoPlaceLoadResults) {\n        geoPlaceLoadResults.forEach(function(result) {\n            if (result.id == newValue)\n                place = result;\n        });\n    }\n\n    if (!place) {\n        $('#'+shortName+'_confirmed_'+i).val(\"false\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).addClass(\"disabled\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).off(\"click\");\n        if ($('#'+shortName+'_original_'+i).val() != \"\") {\n            $('#'+shortName+'_geoterm_text_'+i).html(\"<em>Unconfirmed</em>\");\n            $('#'+shortName+'_geoterm_caption_'+i).text(\"Recorded as: \" + $('#'+shortName+'_original_'+i).val());\n        } else {\n            $('#'+shortName+'_geoterm_text_'+i).text(\"--\");\n            $('#'+shortName+'_geoterm_caption_'+i).text(\"GeoPlace term not specified\");\n        }\n        return;\n    }\n    $('#'+shortName+'_confirmed_'+i).val(\"true\");\n    $('#'+shortName+'_geoterm_text_'+i).text(place.name);\n    $('#'+shortName+'_geoterm_caption_'+i).text(place.administrationCode + \", \" + place.countryCode);\n    if (place.latitude && place.longitude) {\n        $('#'+shortName+\"_geoterm_maplink_\"+i).prop('onclick',null).off(\"click\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).on(\"click\", function() {openGeoPlaceViewer(place.id); return false;});\n        $('#'+shortName+\"_geoterm_maplink_\"+i).removeClass(\"disabled\");\n    } else {\n        $('#'+shortName+\"_geoterm_maplink_\"+i).addClass(\"disabled\");\n        $('#'+shortName+\"_geoterm_maplink_\"+i).prop('onclick',null).off(\"click\");\n    }\n\n\n}\n\nexport function magicDefaultFill(selectID, vocabType) {\n   if (typeof(defaults[vocabType]) !== undefined) {\n\n       var data = {\n           id: defaults[vocabType].id,\n           text: defaults[vocabType].term\n       };\n\n       // If the selected item exists, then select it. Else, add a new option\n       // and select it.\n       if ($('#'+selectID).find(\"option[value='\" + data.id + \"']\").length) {\n               $('#'+selectID).val(data.id).trigger('change');\n       } else {\n           var newOption = new Option(data.text, data.id, false, true);\n           $('#'+selectID).append(newOption).trigger('change');\n       }\n   }\n\n}\n\nfunction capitalize(word) {\n    return word[0].toUpperCase() + word.slice(1);\n}\n\nfunction parseName(e) {\n    $('#name-parser-options').text('');\n    var $nameComponents = $(e.target).closest('.name-components');\n\n    var $partType = $nameComponents.find(\"select:last\");\n    var $textbox = $nameComponents.find('input[type=\"text\"]:last');\n\n    var name = $textbox.val();\n\n    var entityType = $('#entityType').text().trim();\n    $('#name-parser-type').text(capitalize(entityType));\n    $('#name-parser-original').text(name);\n\n    var parser = new NameParser();\n    var guesses = parser.guessPerson(name);\n\n    var parsedOption = '';\n\n    var counter = 0;\n    guesses.forEach(function(guess) {\n        // attach name data object to radio\n        for (var key in guess) {\n            if (guess[key] && guess[key].length != 0) {\n                parsedOption += \"<li><span style='font-weight: bold;'>\" + key + \"</span>: \" + guess[key] + \"</li>\";\n            }\n        }\n\n        $('#name-parser-options').append(\"<div class='radio'>\" +\n            \"<label class='radio form-inline' for='name-parser-option-\" + counter + \"'>\" +\n            \"<input type='radio' name='parsed-names' id='name-parser-option-\" + counter + \"'>\" +\n            \"<ul class='list-unstyled'>\" + parsedOption + \"</ul></label> </div>\");\n\n\n        $('#name-parser-options').find(\"input[type='radio']:last\").data(\"parsed-name\", guess);\n\n        parsedOption = '';\n        counter++;\n    })\n\n    $('#name-parser-options').find(\"input[type='radio']:first\").prop('checked', true)\n\n\n    $('#parser-accept-btn').unbind('click')\n    $('#parser-accept-btn').on('click', function() {\n        var selectedName = $('#name-parser input[type=\"radio\"]:checked').data('parsed-name')\n        $.get( snacUrl + \"/vocabulary/?type=name_component&entity_type=700\")\n            .done(function(data) {\n            acceptParsedName(selectedName, $nameComponents, name, data.results)\n        })\n    })\n}\n\nfunction acceptParsedName(selectedName, $nameComponents, name, nameComponentIDs) {\n    var i = $nameComponents.attr('id').split('_')[2];\n    var $nameComponent = $nameComponents.find('.reorderable'); ///\n    $nameComponent.replaceWith('<div style=\"margin-left:10%; font-size: 14x; font-style:italic; color: #777777;\"> Name: ' + name + '</div>');\n\n    var nameComponentMap = {};\n\n    for (var k = 0; k < nameComponentIDs.length; k++) {\n        nameComponentMap[nameComponentIDs[k].text] = nameComponentIDs[k].id\n    }\n    // var nameComponentMap = {\n    //     'Surname': 400223,\n    //     'Forename': 400224,\n    //     'NameAddition': 400236,\n    //     'Date': 400237,\n    //     'NameExpansion': 400226,\n    //     'Numeration': 400225\n    // };\n\n    for (var key in selectedName) {\n        if (key == 'NameAdditions') {\n            key = 'NameAddition';\n            for (var j = 0; j < selectedName['NameAdditions'].length; j++) {\n                newNameEntryComponent(i);\n                var option = new Option(key, nameComponentMap[key], false, true);\n                $partType = $nameComponents.find(\"select:last\");\n                $partType.append(option).trigger('change');\n                $textbox = $nameComponents.find(\"input[type='text']:last\");\n                $textbox.val(selectedName[\"NameAdditions\"][j]);\n\n                $partType.append(option).trigger('change');\n            }\n        } else if (selectedName[key] && nameComponentMap[key]) {\n            newNameEntryComponent(i);\n            var option = new Option(key, nameComponentMap[key], false, true);\n            $partType = $nameComponents.find(\"select:last\");\n            $partType.append(option).trigger('change');\n            $textbox = $nameComponents.find(\"input[type='text']:last\");\n            $textbox.val(selectedName[key]);\n\n            $partType.append(option).trigger('change');\n        }\n    }\n\n    $(\"#nameEntry_datapart_\" + i).find(\".name-parser\").remove();\n    updateNameEntryHeading(i);\n}\n\nfunction removeParserButton(i) {\n    $('#nameEntry_datapart_' + i).find('.name-parser').remove();\n}\n\n/**\n * Things to do when the page finishes loading\n */\n$(document).ready(function() {\n    // Load the place cache, if needed\n    loadGeoPlaceResultCache();\n\n    // listen for name-parsing\n    $('#nameEntries').on('click', '.name-parser', function(event) {\n        event.preventDefault();\n        parseName(event);\n        $(\"#name-parser\").modal('toggle');\n    });\n\n    $('#name-parser').on('shown.bs.modal', function () {\n        $('#parser-accept-btn').focus();\n    })\n\n    // If the constellation is in \"insert\" mode, then we should automatically set \"somethingHasBeenEdited\"\n    // to be true...\n    if ($('#operation').val() == 'insert')\n        setEditedFlag(true);\n        //somethingHasBeenEdited = true;\n\n    turnOnEditDeleteButtons();\n\n\t// Attach functions to the entityType select\n\tif ($('#entityType').exists()) {\n\t\t$('#entityType').change(function() {\n            setEditedFlag(true);\n            //somethingHasBeenEdited = true;\n            // If there is an ID, then we need to set this to update\n            // Else, the main-level operation should be and remain insert\n\t\t\tif ($('#constellationid').val() != null &&\n\t\t\t\t\t$('#constellationid').val() != \"\") {\n\t\t\t\t$('#operation').val(\"update\");\n\t\t\t}\n\t\t});\n\t}\n\n    // Name Entry doesn't get any AJAX, since it is pre-loaded\n\tvar nameEntryid = 1;\n\tif ($('#next_nameEntry_i').exists()) {\n\t    nameEntryid = parseInt($('#next_nameEntry_i').text());\n\t}\n\tconsole.log(\"Next NameEntry ID: \" + nameEntryid);\n\tif ($('#btn_add_nameEntry').exists()){\n\t\t$('#btn_add_nameEntry').click(function(){\n            setEditedFlag(true);\n            //somethingHasBeenEdited = true;\n\t\t\tvar text = $('#nameEntry_template').clone();\n\t        var html = text.html().replace(/ZZ/g, nameEntryid);\n\t        $('#add_nameEntry_div').after(html);\n            turnOnButtons(\"nameEntry\", nameEntryid);\n            turnOnTooltips(\"nameEntry\", nameEntryid);\n            makeEditable(\"nameEntry\", nameEntryid);\n\t        nameEntryid = nameEntryid + 1;\n\t        return false;\n\t\t});\n\t}\n\n\n\t// Attach functions to each of the \"+ Add New _______\" buttons\n\n\t// Code to handle adding new genders to the page\n\tvar genderid = 1;\n    var genderOpen = false;\n\tif ($('#genderstab').exists()){\n\t\t$('#genderstab').click(function(){\n            // Don't open a second time\n            if (genderOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=genders\", null, function (data) {\n                genderOpen = true;\n                $('#genders').html(data);\n\n                turnOnEditDeleteButtons(\"genders\");\n\n                if ($('#next_gender_i').exists()) {\n                    genderid = parseInt($('#next_gender_i').text());\n                }\n                console.log(\"Next Gender ID: \" + genderid);\n                if ($('#btn_add_gender').exists()){\n                    $('#btn_add_gender').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#gender_template').clone();\n                        var html = text.html().replace(/ZZ/g, genderid);\n                        $('#add_gender_div').after(html);\n                        turnOnButtons(\"gender\", genderid);\n                        turnOnTooltips(\"gender\", genderid);\n                        makeEditable(\"gender\", genderid);\n                        genderid = genderid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"genders\");\n            });\n        });\n    }\n\n\t// Code to handle adding new genders to the page\n\tvar existid = 1;\n    var existOpen = false;\n\tif ($('#existstab').exists()){\n\t\t$('#existstab').click(function(){\n            // Don't open a second time\n            if (existOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=dates\", null, function (data) {\n                existOpen = true;\n                $('#dates').html(data);\n\n                turnOnEditDeleteButtons(\"dates\");\n\n                if ($('#next_exist_i').exists()) {\n                    existid = parseInt($('#next_exist_i').text());\n                }\n                console.log(\"Next Exist Date ID: \" + existid);\n                if ($('#btn_add_exist_date').exists()){\n                    $('#btn_add_exist_date').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#exist_date_template').clone();\n                        var html = text.html().replace(/ZZ/g, existid);\n                        $('#add_exist_div').after(html);\n                        turnOnButtons(\"exist\", existid);\n                        turnOnTooltips(\"exist\", existid);\n                        makeEditable(\"exist\", existid);\n                        existid = existid + 1;\n                        return false;\n                    });\n                }\n                if ($('#btn_add_exist_dateRange').exists()){\n                    $('#btn_add_exist_dateRange').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#exist_dateRange_template').clone();\n                        var html = text.html().replace(/ZZ/g, existid);\n                        $('#add_exist_div').after(html);\n                        turnOnButtons(\"exist\", existid);\n                        turnOnTooltips(\"exist\", existid);\n                        makeEditable(\"exist\", existid);\n                        existid = existid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"dates\");\n            });\n        });\n    }\n\n\tvar sameAsid = 1;\n    var sameAsOpen = false;\n\tif ($('#sameAstab').exists()){\n\t\t$('#sameAstab').click(function(){\n            // Don't open a second time\n            if (sameAsOpen)\n                return;\n            //set sameAs vocab type id\n            $.get(snacUrl+\"/vocabulary?type=record_type&q=SameAs\", null, function(data) {\n                sameAsTermId = data.results[0].id;\n                $(\"#sameAs_type_id_ZZ\").val(sameAsTermId);\n            });\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=sameAs\", null, function (data) {\n                sameAsOpen = true;\n                $('#sameAs').html(data);\n\n                turnOnEditDeleteButtons(\"sameAs\");\n\n                if ($('#next_sameAs_i').exists()) {\n                    sameAsid = parseInt($('#next_sameAs_i').text());\n                }\n                console.log(\"Next sameAs ID: \" + sameAsid);\n                if ($('#btn_add_sameAs').exists()){\n                    $('#btn_add_sameAs').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#sameAs_template').clone();\n                        var html = text.html().replace(/ZZ/g, sameAsid);\n                        $('#add_sameAs_div').after(html);\n                        turnOnButtons(\"sameAs\", sameAsid);\n                        turnOnTooltips(\"sameAs\", sameAsid);\n                        makeEditable(\"sameAs\", sameAsid);\n                        sameAsid = sameAsid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"sameAs\");\n            });\n        });\n    }\n\n\n\tvar entityIDid = 1;\n    var entityIDOpen = false;\n\tif ($('#entityIDtab').exists()){\n\t\t$('#entityIDtab').click(function(){\n            // Don't open a second time\n            if (entityIDOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=entityID\", null, function (data) {\n                entityIDOpen = true;\n                $('#entityID').html(data);\n\n                turnOnEditDeleteButtons(\"entityID\");\n\n                if ($('#next_entityID_i').exists()) {\n                    entityIDid = parseInt($('#next_entityID_i').text());\n                }\n                console.log(\"Next entityID ID: \" + entityIDid);\n                if ($('#btn_add_entityID').exists()){\n                    $('#btn_add_entityID').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#entityID_template').clone();\n                        var html = text.html().replace(/ZZ/g, entityIDid);\n                        $('#add_entityID_div').after(html);\n                        turnOnButtons(\"entityID\", entityIDid);\n                        turnOnTooltips(\"entityID\", entityIDid);\n                        makeEditable(\"entityID\", entityIDid);\n                        entityIDid = entityIDid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"entityID\");\n            });\n        });\n    }\n\n\tvar sourceid = 1;\n    var sourceOpen = false;\n\tif ($('#sourcestab').exists()){\n\t\t$('#sourcestab').click(function(){\n            // Don't open a second time\n            if (sourceOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=sources\", null, function (data) {\n                sourceOpen = true;\n                $('#sources').html(data);\n\n                turnOnEditDeleteButtons(\"sources\");\n\n                if ($('#next_source_i').exists()) {\n                    sourceid = parseInt($('#next_source_i').text());\n                }\n                console.log(\"Next source ID: \" + sourceid);\n                if ($('#btn_add_source').exists()){\n                    $('#btn_add_source').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#source_template').clone();\n                        var html = text.html().replace(/ZZ/g, sourceid);\n                        $('#add_source_div').after(html);\n                        turnOnButtons(\"source\", sourceid);\n                        turnOnTooltips(\"source\", sourceid);\n                        makeEditable(\"source\", sourceid);\n                        sourceid = sourceid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"sources\");\n            });\n        });\n    }\n\n\tvar resourceRelationid = 1;\n    var resourceRelationOpen = false;\n\tif ($('#resourceRelationstab').exists()){\n\t\t$('#resourceRelationstab').click(function(){\n            // Don't open a second time\n            if (resourceRelationOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=resourceRelations\", null, function (data) {\n                resourceRelationOpen = true;\n                $('#resourceRelations').html(data);\n\n                turnOnEditDeleteButtons(\"resourceRelations\");\n\n                if ($('#next_resourceRelation_i').exists()) {\n                    resourceRelationid = parseInt($('#next_resourceRelation_i').text());\n                }\n                console.log(\"Next resourceRelation ID: \" + resourceRelationid);\n                 if ($('#btn_create_resourceRelation').exists()){\n                    $('#btn_create_resourceRelation').click(function(){\n                        var rid = $('input[name=resourceChoice]:checked', '#resource_search_form').val();\n                        if (rid != null && resourceResults != null && rid != 'new') {\n                            setEditedFlag(true);\n                            //somethingHasBeenEdited = true;\n                            var text = $('#resourceRelation_template').clone();\n                            var html = text.html().replace(/ZZ/g, resourceRelationid);\n                            $('#add_resourceRelation_div').after(html);\n\n                            if (typeof resourceResults[rid].id !== 'undefined')\n                                $('#resourceRelation_resourceid_'+resourceRelationid).val(resourceResults[rid].id);\n                            if (typeof resourceResults[rid].version !== 'undefined')\n                                $('#resourceRelation_resourceversion_'+resourceRelationid).val(resourceResults[rid].version);\n\n                            if (typeof resourceResults[rid].link !== 'undefined')\n                                $('#resourceRelation_linkText_'+resourceRelationid).html(\"<a target='_blank' href='\"+resourceResults[rid].link+\"'>\"+resourceResults[rid].link+\"</a>\" +\n                                    \" <a class='label label-info' target='_blank' href='\"+resourceResults[rid].link+\"'>View</a>\");\n                            if (typeof resourceResults[rid].displayEntry !== 'undefined')\n                                $('#resourceRelation_displayEntryText_'+resourceRelationid).text(resourceResults[rid].displayEntry);\n                            if (typeof resourceResults[rid].title !== 'undefined') {\n                                $('#resourceRelation_titleText_'+resourceRelationid).text(resourceResults[rid].title);\n                                updatePictureTitle('resourceRelation', resourceRelationid, resourceResults[rid].title);\n                            }\n                            if (typeof resourceResults[rid].abstract !== 'undefined')\n                                $('#resourceRelation_abstractText_'+resourceRelationid).text(resourceResults[rid].abstract);\n                            if (typeof resourceResults[rid].extent !== 'undefined')\n                                $('#resourceRelation_extentText_'+resourceRelationid).text(resourceResults[rid].extent);\n                            // if (typeof resourceResults[rid].date !== 'undefined')\n                            //     $('#resourceRelation_dateText_'+resourceRelationid).text(resourceResults[rid].date);\n                            if (typeof resourceResults[rid].documentType !== 'undefined' && typeof resourceResults[rid].documentType.term !== 'undefined')\n                                $('#resourceRelation_documentTypeText_'+resourceRelationid).text(resourceResults[rid].documentType.term);\n\n                            $('#resourceRelation_linkText_'+resourceRelationid).after(\"<a class='control-label-subtext' target='_blank' href='\" +\n                                snacUrl+\"/vocab_administrator/resources/\"+resourceResults[rid].id+\"'>View in SNAC</a>\");\n                            turnOnButtons(\"resourceRelation\", resourceRelationid);\n                            turnOnTooltips(\"resourceRelation\", resourceRelationid);\n                            makeEditable(\"resourceRelation\", resourceRelationid);\n                            resourceRelationid = resourceRelationid + 1;\n                            $(\"#resource-results-box\").html(\"\");\n                            return true;\n                        }\n                        return false;\n                    });\n                }\n\n                if ($('#btn_open_create_resource').exists()){\n                    $('#btn_open_create_resource').click(function(){\n                        // Close this modal and open the new modal\n                        $(\"#resourceSearchPane\").modal(\"hide\");\n\n                        // Set a 500ms timeout to give the hidden search pane time to fully close\n                        setTimeout(function() {$(\"#resourceCreatePane\").modal(\"show\");}, 500);\n\n                        // Grab the empty template and replace\n                        var text = $('#resource_template').clone();\n                        var html = text.html().replace(/ZZ/g, 0);\n                        $('#resource-create-box').html(html);\n                        var $resourceForm = $(\"#resource_create_form\");\n                        // Copy the search contents to title or href\n                        if ($(\"#resource-searchbox\").val().indexOf(\"http\") == -1)\n                            $resourceForm.find(\"#resource-title\").val($(\"#resource-searchbox\").val());\n                        else\n                            $resourceForm.find(\"#resource-url\").val($(\"#resource-searchbox\").val());\n\n                        $resourceForm.find('[data-toggle=\"popover\"]').popover({\n                              trigger: 'hover',\n                              container: 'body'\n                        });\n                        loadVocabSelectOptions($resourceForm.find(\"#resource-type-select\"), \"document_type\", \"Resource Type\");\n                        vocab_select_replace($resourceForm.find(\"#resource-repo\"), \"\", \"holding\", 3);\n                        $resourceForm.find(\"#new-resource-language-btn\").on(\"click\", newResourceLanguage);\n                        $resourceForm.find(\"#magic-resource-language-btn\").on(\"click\", magicNewResourceLanguage);\n\n                        $('#search-results-box').on(\"click\", \"a.list-group-item\", selectHoldingRepository);\n                        var timeoutID = null;\n                        $resourceForm.find('#searchbox').keyup(function() {\n                            clearTimeout(timeoutID);\n                            timeoutID = setTimeout(function() { setSearchPosition(0); searchAndUpdate(); }, 500);\n                        });\n\n                        // Remove the search results from the other modal\n                        $(\"#resource-results-box\").html(\"\");\n                        return false;\n                    });\n                }\n\n                if ($('#btn_create_resource').exists()){\n                    $('#resource_create_form').on(\"submit\", function(){\n                            // Remove leading and trailing whitespace\n                            if ($(\"#resource_create_form #resource-url\").val() == \"\") {\n                                if (!confirm('Are you sure you want to save without an HREF?')) {\n                                    return;\n                                }\n                            }\n                            $(\"#resource_create_form input, textarea\").each(function() {\n                                $(this).val($.trim($(this).val()));\n                            });\n                            setDeletedResourceLanguageOperations($(\"#resource_create_form\"));\n\n                            $.post(snacUrl+\"/save_resource\", $(\"#resource_create_form\").serialize(), function (data) {\n                                if (typeof data.result !== 'undefined' && data.result !== 'false') {\n                                    setEditedFlag(true);\n                                    //somethingHasBeenEdited = true;\n                                    var text = $('#resourceRelation_template').clone();\n                                    var html = text.html().replace(/ZZ/g, resourceRelationid); // clones DOM, replaces zz with next ids\n                                    $('#add_resourceRelation_div').after(html);\n\n                                    if (typeof data.resource.id !== 'undefined')\n                                        $('#resourceRelation_resourceid_'+resourceRelationid).val(data.resource.id);\n                                    if (typeof data.resource.version !== 'undefined')\n                                        $('#resourceRelation_resourceversion_'+resourceRelationid).val(data.resource.version);\n\n                                    if (typeof data.resource.link !== 'undefined')\n                                        $('#resourceRelation_linkText_'+resourceRelationid).html(\"<a target='_blank' href='\"+data.resource.link+\"'>\"+data.resource.link+\"</a>\" +\n                                            \" <a class='label label-info' target='_blank' href='\"+data.resource.link+\"'>View</a>\");\n                                    if (typeof data.resource.displayEntry !== 'undefined')\n                                        $('#resourceRelation_displayEntryText_'+resourceRelationid).text(data.resource.displayEntry);\n                                    if (typeof data.resource.title !== 'undefined') {\n                                        $('#resourceRelation_titleText_'+resourceRelationid).text(data.resource.title);\n                                        updatePictureTitle('resourceRelation', resourceRelationid, data.resource.title);\n                                    }\n                                    if (typeof data.resource.abstract !== 'undefined')\n                                        $('#resourceRelation_abstractText_'+resourceRelationid).text(data.resource.abstract);\n                                    if (typeof data.resource.extent !== 'undefined')\n                                        $('#resourceRelation_extentText_'+resourceRelationid).text(data.resource.extent);\n                                    if (typeof data.resource.documentType !== 'undefined' && typeof data.resource.documentType.term !== 'undefined')\n                                        $('#resourceRelation_documentTypeText_'+resourceRelationid).text(data.resource.documentType.term);\n\n                                    $('#resourceRelation_linkText_'+resourceRelationid).after(\"<a class='control-label-subtext' target='_blank' href='\" +\n                                        snacUrl+\"/vocab_administrator/resources/\"+data.resource.id+\"'>View in SNAC</a>\");\n                                    turnOnButtons(\"resourceRelation\", resourceRelationid);\n                                    turnOnTooltips(\"resourceRelation\", resourceRelationid);\n                                    makeEditable(\"resourceRelation\", resourceRelationid);\n                                    resourceRelationid = resourceRelationid + 1;\n                                    $(\"#resourceCreatePane\").modal(\"hide\");\n                                    $('#resource-create-box').html(\"\");\n                                    return true;\n                                } else {\n                                    console.log(data);\n                                    return false;\n                                }\n                            });\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"resourceRelations\");\n            });\n        });\n    }\n\n\n\tvar constellationRelationid = 1;\n    var constellationRelationOpen = false;\n\tif ($('#constellationRelationstab').exists()){\n\t\t$('#constellationRelationstab').click(function(){\n            // Don't open a second time\n            if (constellationRelationOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=constellationRelations\", null, function (data) {\n                constellationRelationOpen = true;\n                $('#constellationRelations').html(data);\n\n                turnOnEditDeleteButtons(\"constellationRelations\");\n\n                if ($('#next_constellationRelation_i').exists()) {\n                    constellationRelationid = parseInt($('#next_constellationRelation_i').text());\n                }\n                console.log(\"Next constellationRelation ID: \" + constellationRelationid);\n                if ($('#btn_create_constellationRelation').exists()){\n                    $('#btn_create_constellationRelation').click(function(){\n                        var cid = $('input[name=relationChoice]:checked', '#relation_search_form').val()\n                        if (cid != null) {\n                            setEditedFlag(true);\n                            //somethingHasBeenEdited = true;\n                            var text = $('#constellationRelation_template').clone();\n                            var html = text.html().replace(/ZZ/g, constellationRelationid);\n                            $('#add_constellationRelation_div').after(html);\n                            $('#constellationRelation_targetID_'+constellationRelationid).val(cid);\n                            $('#constellationRelation_content_'+constellationRelationid).val($('#relationChoice_nameEntry_'+cid).val());\n                            $('#constellationRelation_targetArkID_'+constellationRelationid).val($('#relationChoice_arkID_'+cid).val());\n                            $('#constellationRelation_targetEntityType_'+constellationRelationid).val($('#relationChoice_entityType_'+cid).val());\n\n                            updatePictureIcon('constellationRelation', constellationRelationid, $('#relationChoice_entityTypeText_'+cid).val());\n                            updatePictureTitle('constellationRelation', constellationRelationid, $('#relationChoice_nameEntry_'+cid).val());\n\n                            $('#constellationRelation_contentText_'+constellationRelationid).text($('#relationChoice_nameEntry_'+cid).val());\n                            $('#constellationRelation_targetArkIDText_'+constellationRelationid).text($('#relationChoice_arkID_'+cid).val());\n\n                            turnOnButtons(\"constellationRelation\", constellationRelationid);\n                            turnOnTooltips(\"constellationRelation\", constellationRelationid);\n                            makeEditable(\"constellationRelation\", constellationRelationid);\n\n                            constellationRelationid = constellationRelationid + 1;\n\n                            return true;\n\n                        }\n\n\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"constellationRelations\");\n            });\n        });\n    }\n\n\tvar languageid = 1;\n    var languageOpen = false;\n\tif ($('#languagesUsedtab').exists()){\n\t\t$('#languagesUsedtab').click(function(){\n            // Don't open a second time\n            if (languageOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=languagesUsed\", null, function (data) {\n                languageOpen = true;\n                $('#languagesUsed').html(data);\n\n                turnOnEditDeleteButtons(\"languagesUsed\");\n\n                if ($('#next_language_i').exists()) {\n                    languageid = parseInt($('#next_language_i').text());\n                }\n                console.log(\"Next language ID: \" + languageid);\n                if ($('#btn_add_language').exists()){\n                    $('#btn_add_language').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#language_template').clone();\n                        var html = text.html().replace(/ZZ/g, languageid);\n                        $('#add_language_div').after(html);\n                        turnOnButtons(\"language\", languageid);\n                        turnOnTooltips(\"language\", languageid);\n                        makeEditable(\"language\", languageid);\n                        languageid = languageid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"languagesUsed\");\n            });\n        });\n    }\n\n\tvar subjectid = 1;\n    var subjectOpen = false;\n\tif ($('#subjectstab').exists()){\n\t\t$('#subjectstab').click(function(){\n            // Don't open a second time\n            if (subjectOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=subjects\", null, function (data) {\n                subjectOpen = true;\n                $('#subjects').html(data);\n\n                turnOnEditDeleteButtons(\"subjects\");\n\n                if ($('#next_subject_i').exists()) {\n                    subjectid = parseInt($('#next_subject_i').text());\n                }\n                console.log(\"Next subject ID: \" + subjectid);\n                if ($('#btn_add_subject').exists()){\n                    $('#btn_add_subject').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#subject_template').clone();\n                        var html = text.html().replace(/ZZ/g, subjectid);\n                        $('#add_subject_div').after(html);\n                        turnOnButtons(\"subject\", subjectid);\n                        turnOnTooltips(\"subject\", subjectid);\n                        makeEditable(\"subject\", subjectid);\n                        subjectid = subjectid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"subjects\");\n            });\n        });\n    }\n\n\tvar nationalityid = 1;\n    var nationalityOpen = false;\n\tif ($('#nationalitiestab').exists()){\n\t\t$('#nationalitiestab').click(function(){\n            // Don't open a second time\n            if (nationalityOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=nationalities\", null, function (data) {\n                nationalityOpen = true;\n                $('#nationalities').html(data);\n\n                turnOnEditDeleteButtons(\"nationalities\");\n\n                if ($('#next_nationality_i').exists()) {\n                    nationalityid = parseInt($('#next_nationality_i').text());\n                }\n                console.log(\"Next nationality ID: \" + nationalityid);\n                if ($('#btn_add_nationality').exists()){\n                    $('#btn_add_nationality').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#nationality_template').clone();\n                        var html = text.html().replace(/ZZ/g, nationalityid);\n                        $('#add_nationality_div').after(html);\n                        turnOnButtons(\"nationality\", nationalityid);\n                        turnOnTooltips(\"nationality\", nationalityid);\n                        makeEditable(\"nationality\", nationalityid);\n                        nationalityid = nationalityid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"nationalities\");\n            });\n        });\n    }\n\n\tvar functionid = 1;\n    var functionOpen = false;\n\tif ($('#functionstab').exists()){\n\t\t$('#functionstab').click(function(){\n            // Don't open a second time\n            if (functionOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=functions\", null, function (data) {\n                functionOpen = true;\n                $('#functions').html(data);\n\n                turnOnEditDeleteButtons(\"functions\");\n\n                if ($('#next_function_i').exists()) {\n                    functionid = parseInt($('#next_function_i').text());\n                }\n                console.log(\"Next function ID: \" + functionid);\n                if ($('#btn_add_function').exists()){\n                    $('#btn_add_function').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#function_template').clone();\n                        var html = text.html().replace(/ZZ/g, functionid);\n                        $('#add_function_div').after(html);\n                        turnOnButtons(\"function\", functionid);\n                        turnOnTooltips(\"function\", functionid);\n                        makeEditable(\"function\", functionid);\n                        functionid = functionid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"functions\");\n            });\n        });\n    }\n\n\tvar occupationid = 1;\n    var occupationOpen = false;\n\tif ($('#occupationstab').exists()){\n\t\t$('#occupationstab').click(function(){\n            // Don't open a second time\n            if (occupationOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=occupations\", null, function (data) {\n                occupationOpen = true;\n                $('#occupations').html(data);\n\n                turnOnEditDeleteButtons(\"occupations\");\n\n                if ($('#next_occupation_i').exists()) {\n                    occupationid = parseInt($('#next_occupation_i').text());\n                }\n                console.log(\"Next occupation ID: \" + occupationid);\n                if ($('#btn_add_occupation').exists()){\n                    $('#btn_add_occupation').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#occupation_template').clone();\n                        var html = text.html().replace(/ZZ/g, occupationid);\n                        $('#add_occupation_div').after(html);\n                        turnOnButtons(\"occupation\", occupationid);\n                        turnOnTooltips(\"occupation\", occupationid);\n                        makeEditable(\"occupation\", occupationid);\n                        occupationid = occupationid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"occupations\");\n            });\n        });\n    }\n\n\tvar legalStatusid = 1;\n    var legalStatusOpen = false;\n\tif ($('#legalStatusestab').exists()){\n\t\t$('#legalStatusestab').click(function(){\n            // Don't open a second time\n            if (legalStatusOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=legalStatuses\", null, function (data) {\n                legalStatusOpen = true;\n                $('#legalStatuses').html(data);\n\n                turnOnEditDeleteButtons(\"legalStatuses\");\n\n                if ($('#next_legalStatus_i').exists()) {\n                    legalStatusid = parseInt($('#next_legalStatus_i').text());\n                }\n                console.log(\"Next legalStatus ID: \" + legalStatusid);\n                if ($('#btn_add_legalStatus').exists()){\n                    $('#btn_add_legalStatus').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#legalStatus_template').clone();\n                        var html = text.html().replace(/ZZ/g, legalStatusid);\n                        $('#add_legalStatus_div').after(html);\n                        turnOnButtons(\"legalStatus\", legalStatusid);\n                        turnOnTooltips(\"legalStatus\", legalStatusid);\n                        makeEditable(\"legalStatus\", legalStatusid);\n                        legalStatusid = legalStatusid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"legalStatuses\");\n            });\n        });\n    }\n\n\tvar placeid = 1;\n    var placeOpen = false;\n\tif ($('#placestab').exists()){\n\t\t$('#placestab').click(function(){\n            // Don't open a second time\n            if (placeOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=places\", null, function (data) {\n                placeOpen = true;\n                $('#places').html(data);\n\n                // Load the place cache, if needed\n                loadGeoPlaceResultCache();\n\n                turnOnEditDeleteButtons(\"places\");\n\n                if ($('#next_place_i').exists()) {\n                    placeid = parseInt($('#next_place_i').text());\n                }\n                console.log(\"Next place ID: \" + placeid);\n                if ($('#btn_add_place').exists()){\n                    $('#btn_add_place').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#place_template').clone();\n                        var html = text.html().replace(/ZZ/g, placeid);\n                        $('#add_place_div').after(html);\n                        turnOnButtons(\"place\", placeid);\n                        turnOnTooltips(\"place\", placeid);\n                        makeEditable(\"place\", placeid);\n                        placeid = placeid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"places\");\n            });\n        });\n    }\n\n\tvar conventionDeclarationid = 1;\n    var conventionDeclarationOpen = false;\n\tif ($('#conventionDeclarationstab').exists()){\n\t\t$('#conventionDeclarationstab').click(function(){\n            // Don't open a second time\n            if (conventionDeclarationOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=conventionDeclarations\", null, function (data) {\n                conventionDeclarationOpen = true;\n                $('#conventionDeclarations').html(data);\n\n                turnOnEditDeleteButtons(\"conventionDeclarations\");\n\n                if ($('#next_conventionDeclaration_i').exists()) {\n                    conventionDeclarationid = parseInt($('#next_conventionDeclaration_i').text());\n                }\n                console.log(\"Next conventionDeclaration ID: \" + conventionDeclarationid);\n                if ($('#btn_add_conventionDeclaration').exists()){\n                    $('#btn_add_conventionDeclaration').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#conventionDeclaration_template').clone();\n                        var html = text.html().replace(/ZZ/g, conventionDeclarationid);\n                        $('#add_conventionDeclaration_div').after(html);\n                        turnOnButtons(\"conventionDeclaration\", conventionDeclarationid);\n                        turnOnTooltips(\"conventionDeclaration\", conventionDeclarationid);\n                        makeEditable(\"conventionDeclaration\", conventionDeclarationid);\n                        conventionDeclarationid = conventionDeclarationid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"conventionDeclarations\");\n            });\n        });\n    }\n\n\tvar generalContextid = 1;\n    var generalContextOpen = false;\n\tif ($('#generalContextstab').exists()){\n\t\t$('#generalContextstab').click(function(){\n            // Don't open a second time\n            if (generalContextOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=generalContexts\", null, function (data) {\n                generalContextOpen = true;\n                $('#generalContexts').html(data);\n\n                turnOnEditDeleteButtons(\"generalContexts\");\n\n                if ($('#next_generalContext_i').exists()) {\n                    generalContextid = parseInt($('#next_generalContext_i').text());\n                }\n                console.log(\"Next generalContext ID: \" + generalContextid);\n                if ($('#btn_add_generalContext').exists()){\n                    $('#btn_add_generalContext').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#generalContext_template').clone();\n                        var html = text.html().replace(/ZZ/g, generalContextid);\n                        $('#add_generalContext_div').after(html);\n                        turnOnButtons(\"generalContext\", generalContextid);\n                        turnOnTooltips(\"generalContext\", generalContextid);\n                        makeEditable(\"generalContext\", generalContextid);\n                        generalContextid = generalContextid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"generalContexts\");\n            });\n        });\n    }\n\n\tvar structureOrGenealogyid = 1;\n    var structureOrGenealogyOpen = false;\n\tif ($('#structureOrGenealogiestab').exists()){\n\t\t$('#structureOrGenealogiestab').click(function(){\n            // Don't open a second time\n            if (structureOrGenealogyOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=structureOrGenealogies\", null, function (data) {\n                structureOrGenealogyOpen = true;\n                $('#structureOrGenealogies').html(data);\n\n                turnOnEditDeleteButtons(\"structureOrGenealogies\");\n\n                if ($('#next_structureOrGenealogy_i').exists()) {\n                    structureOrGenealogyid = parseInt($('#next_structureOrGenealogy_i').text());\n                }\n                console.log(\"Next structureOrGenealogy ID: \" + structureOrGenealogyid);\n                if ($('#btn_add_structureOrGenealogy').exists()){\n                    $('#btn_add_structureOrGenealogy').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#structureOrGenealogy_template').clone();\n                        var html = text.html().replace(/ZZ/g, structureOrGenealogyid);\n                        $('#add_structureOrGenealogy_div').after(html);\n                        turnOnButtons(\"structureOrGenealogy\", structureOrGenealogyid);\n                        turnOnTooltips(\"structureOrGenealogy\", structureOrGenealogyid);\n                        makeEditable(\"structureOrGenealogy\", structureOrGenealogyid);\n                        structureOrGenealogyid = structureOrGenealogyid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"structureOrGenealogies\");\n            });\n        });\n    }\n\n\tvar mandateid = 1;\n    var mandateOpen = false;\n\tif ($('#mandatestab').exists()){\n\t\t$('#mandatestab').click(function(){\n            // Don't open a second time\n            if (mandateOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=mandates\", null, function (data) {\n                mandateOpen = true;\n                $('#mandates').html(data);\n\n                turnOnEditDeleteButtons(\"mandates\");\n\n                if ($('#next_mandate_i').exists()) {\n                    mandateid = parseInt($('#next_mandate_i').text());\n                }\n                console.log(\"Next mandate ID: \" + mandateid);\n                if ($('#btn_add_mandate').exists()){\n                    $('#btn_add_mandate').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#mandate_template').clone();\n                        var html = text.html().replace(/ZZ/g, mandateid);\n                        $('#add_mandate_div').after(html);\n                        turnOnButtons(\"mandate\", mandateid);\n                        turnOnTooltips(\"mandate\", mandateid);\n                        makeEditable(\"mandate\", mandateid);\n                        mandateid = mandateid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"mandates\");\n            });\n        });\n    }\n\n\tvar biogHistid = 1;\n    var biogHistOpen = false;\n\tif ($('#biogHiststab').exists()){\n\t\t$('#biogHiststab').click(function(){\n            // Don't open a second time\n            if (biogHistOpen)\n                return;\n\n            $.get(snacUrl+\"/edit_part/\"+$('#constellationid').val()+\"/\"+$('#version').val()+\"?part=biogHists\", null, function (data) {\n                biogHistOpen = true;\n                $('#biogHists').html(data);\n\n                turnOnEditDeleteButtons(\"biogHists\");\n\n                if ($('#next_biogHist_i').exists()) {\n                    biogHistid = parseInt($('#next_biogHist_i').text());\n                }\n                console.log(\"Next biogHist ID: \" + biogHistid);\n                if ($('#btn_add_biogHist').exists()){\n                    $('#btn_add_biogHist').click(function(){\n                        setEditedFlag(true);\n                        //somethingHasBeenEdited = true;\n                        var text = $('#biogHist_template').clone();\n                        var html = text.html().replace(/ZZ/g, biogHistid);\n                        $('#add_biogHist_div').after(html);\n                        turnOnButtons(\"biogHist\", biogHistid);\n                        turnOnTooltips(\"biogHist\", biogHistid);\n                        makeEditable(\"biogHist\", biogHistid);\n                        biogHistid = biogHistid + 1;\n                        return false;\n                    });\n                }\n\n                turnOnTooltipsForTab(\"biogHists\");\n            });\n        });\n    }\n\n    turnOnTooltipsForTab();\n\n\n    $(\"#info-dropdown\").click(function(e) {\n        $(this).parent().toggleClass(\"open\");\n        e.stopPropagation();\n    });\n\n});\n"],"sourceRoot":""}