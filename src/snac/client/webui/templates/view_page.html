<!DOCTYPE html>
<html>
<head>
    <title>{{data.nameEntries.0.original}} - Social Networks and Archival Context</title>

<!-- JQuery -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

<!-- Helper Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css">

<!-- Select Upgrades -->
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/css/select2.min.css" rel="stylesheet" /> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/js/select2.min.js"></script> -->
<!-- <link rel="stylesheet" href="{{control.snacURL}}/css/select2-bootstrap.min.css"> -->



<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>

<!-- Tiny MCE text editor -->
<script src="https://cdn.tinymce.com/4/tinymce.min.js"></script>

<!-- Datatables -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>

<!-- Leaflet JS Javascript and Styles-->
<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
<script src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>

<!-- SNAC Styles -->
<link rel="stylesheet" href="{{control.snacURL}}/css/snac.css{{control.noCache}}">
<link rel="stylesheet" href="{{control.snacURL}}/css/hrt/icons.css{{control.noCache}}">

<!-- SNAC Javascript -->
<script src="{{control.snacURL}}/javascript/wikipedia_image.js{{control.noCache}}"></script>
<script src="{{control.snacURL}}/javascript/select_loaders.js{{control.noCache}}"></script>
<script src="{{control.snacURL}}/javascript/html2canvas.js{{control.noCache}}"></script>
<script src="{{control.snacURL}}/javascript/feedback.js{{control.noCache}}"></script>
<script src="{{control.snacURL}}/javascript/message_current_editor.js{{control.noCache}}"></script>
<script src="{{control.snacURL}}/javascript/scripts.js{{control.noCache}}"></script>

<style>

.wikipedia_thumbnail {
    text-align: center;
    padding: 15px;
    -webkit-border-radius: 4px;
    /*margin-bottom: 10px;*/
    position:relative;
    display: none;
    background: white;

}

.wikipedia_thumbnail img {
    z-index:1;
    padding:4px;
    padding-bottom:0px;
    border-radius: 8px;
    line-height:1.428571429;
    -webkit-transition:all 0.2s ease-in-out;
    transition:all 0.2s ease-in-out;
    display:inline-block;
    max-height: 250px;
    max-width: 300px;
}

.wikipedia_thumbnail div {
    width:100%;
    display:block;
    /*position:absolute;
    bottom:0px;
    left:0px;
    z-index:2;*/
    margin:0px;
    padding:5px;
    padding-top: 0px;
    padding-bottom: 0px;
    font-size: 10px;
}

.wikipedia_thumbnail a {
    color:#000
}

.body-tab-pane {
    min-height: 700px;
    padding: 20px;
}


@media screen and (-webkit-min-device-pixel-ratio: 1),
screen and (min--moz-device-pixel-ratio: 1),
screen and (-o-min-device-pixel-ratio: 100 / 100),
screen and (min-device-pixel-ratio: 1), screen and (min-resolution: 1dppx) {
    .sprite-icons-archivegrid,.sprite-icons-cbw,.sprite-icons-dpla,.sprite-icons-fs,.sprite-icons-idlocgov,.sprite-icons-nara,
    .sprite-icons-viaf,.sprite-icons-wikipedia,.sprite-icons-worldcat,.sprite-icons-nara,.sprite-icons-wikidata,.sprite-icons-numismatic {
        background-image:url('{{control.snacURL}}/css/hrt/icons.png{{control.noCache}}');
        -webkit-background-size:64px 64px;
        -moz-background-size:64px 64px;
        background-size:64px 64px
    }
}



.geoplace-map {
    width: 100%;
    height: 300px;
    margin: 0px;
    padding: 0px;
    margin-bottom: 10px;
}

.dataTables_wrapper label {
    font-weight: normal;
}

.panel-heading span:after {
    font-family:'Glyphicons Halflings';
    content:"\e114";
    float: right;
    color: grey;
}
.panel-heading span.collapsed:after {
    content:"\e080";
}
.panel-collapsible {
    cursor: pointer;
}

@media (max-width: 992px) {
    #profile-togglebox {
        display:none
    }
}

td i.i-hover {
    visibility: hidden;
    cursor: pointer;
    color: #347ab8;
}

td:hover i.i-hover {
    visibility: visible;
}

.dataTables_filter input {
    width: 240px
}

/*
.wikipedia_thumbnail_container {
    text-align: center;
    border: 1px solid #222222;
    padding: 15px;
    -webkit-border-radius: 10px;
    margin-bottom: 10px;
}

.wikipedia_thumbnail {
    margin: auto;
    padding-right:0.2em;
    position:relative;
    max-width:300px;
}

.wikipedia_thumbnail img {
    z-index:1;
    padding:4px;
    line-height:1.428571429;
    -webkit-transition:all 0.2s ease-in-out;
    transition:all 0.2s ease-in-out;
    display:inline-block;
    max-width:100%;
    height:auto
}

.wikipedia_thumbnail figurecaption,.wikipedia_thumbnail div {
    width:95%;
    display:block;
    position:absolute;
    bottom:5px;
    left:5px;
    z-index:2;
    margin:0;
    padding:5px;
    color:#fff;
    background:rgba(0,0,0,0.4)
}

.wikipedia_thumbnail a {
    color:#eee
}*/

</style>
<script>


function getSharedResources(icid1, icid2) {
    var sharedTable = $("#shared-resources-table").DataTable().clear().draw();

    $.ajax({
        url: snacUrl + "/shared_resources?icid1=" + icid1 + "&icid2=" +icid2
    }).done(function(data) {
        var rows = [];
        var length =  data.resources.length;
        for (i = 0; i < length; i++) {
            var row = [data.resources[i].arcrole_1, "<a href='"+data.resources[i].href+"'>" +data.resources[i].title + "</a> ", data.resources[i].arcrole_2];
            rows.push(row);
        }
        sharedTable.rows.add(rows).draw()

    })
}

function loadSharedResourcesModal(target) {
    // grab info on clicked table row to load the Shared Resources Modal
    var relatedConstellationName = $(target).closest('td').find('a')[0].innerHTML;
    $(".compared-constellation-name").html(relatedConstellationName);
    var iconClasses = "";
    if ($(target).closest('td').find('i.fa-stack-1x').hasClass("fa-university")) {
        iconClasses = "fa fa-university";
    } else if ($(target).closest('td').find('i.fa-stack-1x').hasClass("fa-users")) {
        iconClasses = "fa fa-users";
    } else {
        iconClasses = "fa fa-user";
    }
    $("#compared-constellation-icon").removeClass();
    $("#compared-constellation-icon").addClass(iconClasses);
};

/**
 * Prevent automatic scrolling of page to anchor by browser after page load.
 */
function preventAnchorScroll() {
    var scrollToTop = function () {
        $(window).scrollTop(0);
    };

    $(window).one('scroll', scrollToTop);
    $(function () {
        setTimeout(
            function () {
                $(window).off('scroll', scrollToTop);
            },
            1000
        );
    });
}

preventAnchorScroll();


function holdingsTabActions() {
    if (! $.fn.DataTable.isDataTable("#holding-repository-table")) {
        loadHoldings();
    }
}

function loadHoldings() {
    var constellationid = $("#constellationid").val()
    $("#holding-repository-table").DataTable({
        "ajax": {
            "url": snacUrl + "/get_holdings/" + constellationid,
            "dataType": "json",
            "dataSrc": "resources"
        },
        "columns": [
            {
                "data": null,
                "render": function(data, type, row, meta) {
                    if (data.href) {
                        var cell = "<a target='_blank' href='" + data.href + "'>" + data.title + "</a>";
                    } else {
                        var cell = data.title;
                    }
                    return cell;
                }
            },
            {
                "data": "relation_count"
            },
            {
                "data": null,
                "render": function(data, type, row, meta) {
                    if (data) {
                        var cell = "<a href='{{control.snacURL}}/vocab_administrator/resources/" + data.id +
                            "' title='View in SNAC'> <i class='fa fa-info-circle' style='font-size:large'> </i> </a>";
                    }
                    return cell;
                },
                "defaultContent": ""
            }
        ]
    })
}





var archivalTable = null;
var lumpTable = null;
var holdingsMarkers = {};
var placesMarkers = {};
var placesMapView = null;
var highlightIcon = new L.Icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
      shadowSize: [41, 41]
});

var defaultIcon = new L.Icon.Default();


function highlightHoldingMarker(id) {
    if (typeof holdingsMarkers[id] != 'undefined') {
        holdingsMarkers[id].setIcon(highlightIcon);
    }
}

function unHighlightHoldingMarker(id) {
    if (typeof holdingsMarkers[id] != 'undefined') {
        if (!holdingsMarkers[id].isPopupOpen())
            holdingsMarkers[id].setIcon(defaultIcon);
    }
}

function resourceTabActions() {
    if ($(".holdings_location_lat").length == 0) {
        $("#display-holdings-map-btn").hide();
        return
    }

    // hide map if user has manually closed map
    if ($("#holdings-map-wrapper").hasClass("snac-hidden")) {
        $("#display-holdings-map-btn").show();
        return;
    }

    if ((localStorage.getItem("show_map") === "true")) {
        displayHoldingsMapInteractive();
    } else if (!holdingsMapView) {
            $("#display-holdings-map-btn").show()
    }
}

function closeHoldingsMap() {
    $("#holdings-map-wrapper").hide().addClass("snac-hidden");
    $("#display-holdings-map-btn").show();
}

function displayHoldingsMapInteractive() {
    if ($(".holdings_location_lat").length == 0) {
        holdingsMapView = true; // just not null!
        $('#holdingsMap').css("display", "none");
        return;
    }

    $("#holdings-map-wrapper").show()
    $("#holdings-map-wrapper").removeClass("snac-hidden")
    $("#display-holdings-map-btn").hide()

    if (holdingsMapView != null) {
        return;
    }

    // Add a slight delay to the map viewing so that the modal window has time to load
    setTimeout(function() {
        holdingsMapView = L.map('holdingsMap').setView([0,0],1);//setView([35.092344, -39.023438], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 7,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(holdingsMapView);
        var bounds = new L.LatLngBounds();

        $(".holdings_location_name").each(function(i) {
            var id = $(this).attr('id').replace("holdings_location_name_", "");
            var icid = $("#holdings_location_id_"+id).val();

            if ($("#holdings_location_lat_"+id).length > 0) {
                var latitude = $("#holdings_location_lat_"+id).val();
                var longitude = $("#holdings_location_lon_"+id).val();
                if (latitude != '' && longitude != '') {
                    var marker = L.marker([latitude, longitude]).addTo(holdingsMapView).bindPopup($(this).val());
                    bounds.extend(marker.getLatLng());
                    /*marker.on('click', function(e) {
                        //console.log(this);
                        console.log(this.getPopup().getContent());
                        archivalTable.columns( 2 ).search( this.getPopup().getContent() )
                                            .draw();
                    });*/
                    marker.on('popupopen', function(e) {
                        //console.log(this);
                        // console.log(this.getPopup().getContent());
                        archivalTable.columns( 2 ).search( this.getPopup().getContent() )
                                            .draw();
                        this.setIcon(highlightIcon);
                    });
                    marker.on('popupclose', function(e) {
                        archivalTable.columns( 2 ).search( "" )
                                            .draw();
                        this.setIcon(defaultIcon);
                    });
                    marker.on('mouseover', function(e) {
                        this.setIcon(highlightIcon);
                    });
                    marker.on('mouseout', function(e) {
                        if(!this.isPopupOpen())
                            this.setIcon(defaultIcon);
                    });

                    holdingsMarkers[icid] = marker;
                }
            }
        });
        holdingsMapView.fitBounds(bounds);
    }, 400);
}

function displayPlacesMapInteractive() {
    if (placesMapView != null) {
        return;
    }

    if ($(".place_latitude").length == 0) {
        placesMapView = true; // just not null!
        $('#placesMap').css("display", "none");
        return;
    }


    // Add a slight delay to the map viewing so that the modal window has time to load
    setTimeout(function() {
        placesMapView = L.map('placesMap').setView([0,0],1);//setView([35.092344, -39.023438], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 7,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(placesMapView);
        var bounds = new L.LatLngBounds();

        $(".place_name").each(function(i) {
            var id = $(this).attr('id').replace("place_name_", "");

            if ($("#place_lat_"+id).length > 0) {
                var latitude = $("#place_lat_"+id).val();
                var longitude = $("#place_lon_"+id).val();
                if (latitude != '' && longitude != '') {
                    var marker = L.marker([latitude, longitude]).addTo(placesMapView).bindPopup($(this).val());
                    bounds.extend(marker.getLatLng());
                    marker.on('popupopen', function(e) {
                        //console.log(this);
                        // console.log(this.getPopup().getContent());
                        this.setIcon(highlightIcon);
                    });
                    marker.on('popupclose', function(e) {
                        this.setIcon(defaultIcon);
                    });
                    marker.on('mouseover', function(e) {
                        this.setIcon(highlightIcon);
                    });
                    marker.on('mouseout', function(e) {
                        if(!this.isPopupOpen())
                            this.setIcon(defaultIcon);
                    });

                    placesMarkers[id] = marker;
                }
            }
        });
        placesMapView.fitBounds(bounds);
    }, 400);
}

function clearRelationFilter() {
    $("#relation-table").DataTable().columns(0).search("").draw();
    $("#datatable-column-filters").html("");
}

$(document).ready(function() {
    $('#view-nav-tabs a').click(function(e) {
        if ($(this).parent().hasClass("disabled")) {
            e.preventDefault();
            return;
        }
        $(this).tab('show');
    });

    $("#view-nav-tabs a[href='#resources']").on("show.bs.tab", function() {
        resourceTabActions();
    })

    $("#view-nav-tabs a[href='#places']").on("show.bs.tab", function() {
        displayPlacesMapInteractive();
    })

    $("#view-nav-tabs a[href='#holding-repository']").on("show.bs.tab", function() {
        holdingsTabActions();
    })

    // store the currently selected tab in the hash value
    $("#view-nav-tabs > li > a").on("shown.bs.tab", function(e) {
        var hash = $(e.target).attr("href")
        if (history.pushState) {
            history.replaceState(null, null, hash);
        } else {
            window.location.hash = hash;
        }
    });

    // on load of the page: switch to the currently selected tab
    var hash = window.location.hash;
    if (hash.length) {
        $("#view-nav-tabs a[href='" + hash + "']").tab("show");
    } else {
        // load Resources if no bioghist
        if (($("#view-nav-tabs a[href='#biography']").parent().hasClass("disabled"))) {
            $("#view-nav-tabs a[href='#resources']").tab("show");
        }
    }

    if (localStorage.getItem("hide_profile") === "true") {
        $("#profile-toggle").prop("checked", true);
        toggleProfile();
    }

    var relationTable = $('#relation-table').DataTable({
        "searching" : true,
        "autoWidth": false,
        "deferRender": true,
        "columnDefs": [
            {"visible": false, "targets":2},
            {"width": "75%", "targets":1}
        ],
        "language": {
            "searchPlaceholder": "Relation or Name"
        }
    });

    $("#relation-table").on("click", "td i.i-hover", function(e) {
        var q = $(e.target).closest("td").text();
        $("#relation-table").DataTable().columns(0).search(q).draw();
        var filterButton = "<button type='button' onclick='clearRelationFilter()' class='btn list-group-item-warning'>" +
            q + "<i class='fa fa-fw fa-times'></i></button>"

        $("#datatable-column-filters").html(filterButton);
    })

    lumpTable = $('#lump').DataTable({
        "searching" : true,
        "autoWidth": false,
        "language": {
            "searchPlaceholder": "Title, Role, Repository"
        }
    })

    placesTable = $('#placesTable').DataTable({
        "searching" : true,
        "autoWidth": false
    });

    archivalTable = $('#archival').DataTable({
                    dataSrc: 2,
                    "autoWidth": false,
                    "deferRender": true,
                    "columnDefs": [
                        {"width": "5%", "targets":0},
                        {"width": "60%", "targets":1},
                        {"width": "35%", "targets":2}
                    ],
                    "language": {
                        "searchPlaceholder": "Title, Role, Repository"
                    }
    });

    $('.listtable').DataTable({
        "searching" : true
    });


    // Relationships Table Filter
    $('.relation-btn-filter').on('click', function(e) {
        var $btn = $(e.delegateTarget)
        var query = $btn.hasClass('active') ? '' : $btn.data('filter')
        relationTable.columns(2).search(query).draw();

        $(".relation-btn-filter").not(this).each( function() {
                $(this).removeClass('active')
            })
        $btn.toggleClass('active')
    });

    $('#btn-clear-filter').on('click', function(e) {
        $(".relation-btn-filter").each( function() {
            $(this).removeClass('active')
        })
    })

    $("#relation-table").on("click", "a[href='#shared-resources-modal']", function() {
        var icid1 = $("#constellationid").val();
        var icid2 = $(this).closest('tr').data('id');
        getSharedResources(icid1, icid2);
        loadSharedResourcesModal(this);
    })

});

</script>

</head>

<body role="document">
{% from 'page_navigation.html' import topNavigation,footer %}
{{ topNavigation(X, user, permissions, control) }}


    <div class="container snac" role="main">
        <div class="name" style="margin-bottom: 15px;">
            <h1 style="display: inline;">
                <!--
               {% if data.entityType.term == 'person' %}
               <span class="fa-stack fa-sm" title="Entity Type: Person">
                   <i class="fa fa-square fa-stack-2x" style="color: #5CB9A6;"></i>
                   <i class="fa fa-user fa-stack-1x fa-inverse"></i>
               </span>
               {% elseif data.entityType.term == 'corporateBody' %}
               <span class="fa-stack fa-sm" title="Entity Type: Corporate Body">
                   <i class="fa fa-square fa-stack-2x" style="color: #7E72B5;"></i>
                   <i class="fa fa-university fa-stack-1x fa-inverse"></i>
               </span>
               {% elseif data.entityType.term == 'family' %}
               <span class="fa-stack fa-sm" title="Entity Type: Family">
                   <i class="fa fa-square fa-stack-2x" style="color: #EA6820;"></i>
                   <i class="fa fa-users fa-stack-1x fa-inverse"></i>
               </span>
               {% endif %}
                -->
                 {{data.nameEntries.0.original}}
            </h1>
            {% if (data.nameEntries|length + data.new.nameEntries|length) > 1 %}
            <a data-toggle="modal" style="display: inline; position: relative;" data-target="#alternative-names" href="#alternative-names">Alternative names</a>
            {% endif %}
            {% if 'holdingRepository' in data.flags %}
                <br><span class="label label-default"><i class="fa fa-archive" aria-hidden="true"></i> Holding Repository</span>
            {% endif %}
        </div>


        <div class="btn-toolbar" style="margin-bottom: 15px;">
            <div class="btn-group">
                <!-- <a href="#" class="btn list-group-item-success"> -->
                    <!-- <i class="fa fa-fw fa-id-card-o" aria-hidden="true"></i> Basic View</a> -->
                <a class="btn list-group-item-warning" href="{{control.snacURL}}/details/{{data.id}}/{{data.version}}">
                    <i class="fa fa-fw fa-sliders" aria-hidden="true"></i> Detailed View
                </a>
                {% if data.maybeSameCount > 0 %}
                <a href="{{control.snacURL}}/maybesame/{{data.id}}/{{data.version}}" class="btn list-group-item-merge" id="merge">
                    <i class="fa fa-fw fa-random" aria-hidden="true"></i> Similarity Assertions
                    <span class="badge">{{ data.maybeSameCount }}</span>
                </a>
                {% endif %}
                <a class="btn list-group-item-history" href="{{control.snacURL}}/history/{{data.id}}/{{data.version}}">
                    <i class="fa fa-fw fa-history" aria-hidden="true"></i> Revision History
                </a>
                <a class="btn list-group-item-sources" href="{{control.snacURL}}/sources/{{data.id}}/{{data.version}}">
                    <i class="fa fa-fw fa-archive" aria-hidden="true"></i> Sources
                </a>
                <div class="btn-group">
                    <div class="dropdown">
                        <button class="dropdown-toggle btn list-group-item-download" type="button" id="export-btn"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Export
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="export-btn" style="background:#ecdef2;margin-top:36px;">
                            <li>
                                <a href="{{control.snacURL}}/download/{{data.id}}?type=constellation_json" class="">
                                    <i class="fa fa-fw fa-file" aria-hidden="true"></i> JSON
                                </a>
                            </li>
                            <li>
                                <a href="{{control.snacURL}}/download/{{data.id}}?type=eac-cpf" class="">
                                    <i class="fa fa-fw fa-file-code-o" aria-hidden="true"></i> EAC-CPF XML
                                </a>
                            </li>
                            {% if 'holdingRepository' in data.flags %}
                            <li>
                                <a href="{{control.snacURL}}/download/{{data.id}}?type=holdings" download>
                                    <i class="fa fa-fw fa-book" aria-hidden="true"></i> Resource Holdings
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>

            {% if user.email and permissions.Edit %}
            <div class="btn-group">
                {% if data.status == 'editable' %}
                <a class="btn list-group-item-info"
                    href="{{control.snacURL}}/edit/{{data.id}}/{{data.version}}"> <i class="fa fa-fw fa-pencil" aria-hidden="true"></i> Edit
                </a>
                <a class="btn list-group-item-danger" id="reserveForEdit" href="#">
                    <i class="fa fa-fw fa-bookmark" aria-hidden="true"></i> <span id="reserveForEditText">Reserve for Editing</span>
                </a>
                {% else %}
                <a class="btn list-group-item-info list-group-item-danger disabled" href="#"><i class="fa fa-fw fa-ban"></i> Edit </a>
                {{ include('_message_current_editor.html')}}
                {% endif %}
            </div>
            {% endif %}

            <div class="btn-group" id="profile-togglebox" style="float:right">
                <input type="checkbox" id="profile-toggle" class="snac-hidden"  aria-hidden="true"/>
                <label for="profile-toggle" class="toggle-switch" onclick="toggleProfile()" style="float:right;"></label>
                <div  style="float:right; margin-right:5px;">
                    <p> <span id=profile-toggle-text>Hide</span> Profile</p>
                </div>
            </div>
        </div>
        <div class="row" id="row-main">
            <div id="content-column" class="col-md-8">
                <ul class="nav nav-tabs" role="tablist" id="view-nav-tabs">

                    <!-- Build enabled and disabled tabs <li> and <a> -->
                    {% set disabledtab %}
                        <li class="disabled"><a class="grayedout"
                    {% endset %}
                    {% set enabledtab %}
                        <li><a  role="tab" data-toggle="tab"
                    {% endset %}

                    {% if data.biogHists.0.text %}
                        <li class="active">
                            <a href="#biography" role="tab" data-toggle="tab">{{ data.entityType.term == 'person' ? 'Biography' : 'History'}}</a>
                        </li>
                    {% else %}
                        <li class="disabled"><a  href="#biography" class="grayedout">{{ data.entityType.term == 'person' ? 'Biography' : 'History'}}</a></li>
                    {% endif %}

                    <li><a href="#resources" role="tab" data-toggle="tab" >Resources</a></li>

                    {{ data.relations ? enabledtab : disabledtab}} href="#relationships">Relationships</a></li>
                    {{ data.places ? enabledtab : disabledtab}} href="#places">Places</a></li>
                    {{ data.subjects ? enabledtab : disabledtab}} href="#subjects">Subjects</a></li>
                    {{ data.occupations ? enabledtab : disabledtab}} href="#occupations">Occupations</a></li>
                    {{ data.functions ? enabledtab : disabledtab}} href="#functions">Functions</a></li>
                    {% if 'holdingRepository' in data.flags %}
                        {{ enabledtab}} href="#holding-repository">Holdings</a></li>
                    {% endif %}
                </ul>
                <div class="tab-content">
                    {% if data.biogHists.0.text %}
                    <div class="body-tab-pane tab-pane {{ data.biogHists.0.text ? 'active' }}" id="biography">
                        <div class="biogHist">
                            {{ data.biogHists.0.text|replace({
                                 '<citation ':"<p class='source' ",
                                 '</citation>':"</p>",
                                 'chronList':"ul class='chronlist'",
                                 'chronItem':"li",
                                 '<date':"<span class='date'",
                                 '</date>':"</span>: ",
                                 '</fromDate>':"</fromDate> -",
                                 '<dateRange': "<span class='date'",
                                 '</dateRange>':"</span>: ",
                                 '<daterange':"<span class='date'",
                                 '</daterange>':"</span>: "
                              })|raw }}
                        </div>
                    </div>
                    {% endif %}
                    <div class="body-tab-pane tab-pane " id="resources">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="text-center">
                                    <a class="btn list-group-item-success" id="display-holdings-map-btn" style="display:none;margin-bottom:10px;" onclick="displayHoldingsMapInteractive()">
                                        <i class="fa fa-fw fa-globe" aria-hidden="true"></i> View Collection Locations
                                    </a>
                                </div>
                                <div id="holdings-map-wrapper"  style="display:none;">
                                    <a href="#" class="list-group-item circle-close" onclick="closeHoldingsMap()" style="z-index:500;border:"><span class="fa fa-2x fa-times" aria-hidden="true"></span></a>
                                    <div class="geoplace-map" id="holdingsMap">
                                    </div>
                                </div>
                                {% if data.holdings|length > 0 %}
                                <div id="holdingsList">
                                    {% for location in data.holdings %}
                                      <div>
                                          <input class="holdings_location_id" id="holdings_location_id_{{loop.index}}" value="{{location.id}}" type="hidden">
                                          <input class="holdings_location_name" id="holdings_location_name_{{loop.index}}" value="{{location.name}}" type="hidden">
                                          {% if location.latitude %}
                                          <input class="holdings_location_lat" id="holdings_location_lat_{{loop.index}}" value="{{location.latitude}}" type="hidden">
                                          <input class="holdings_location_lon" id="holdings_location_lon_{{loop.index}}" value="{{location.longitude}}" type="hidden">
                                          {% endif %}
                                      </div>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading panel-collapsible" onClick="$('#archival-collapse').collapse('toggle'); $(this).find('span').toggleClass('collapsed');">
                                        <span>Archival Resources</span>
                                    </div>
                                    <div id="archival-collapse" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <table id="archival" class="table table-striped table-hover" data-order='[[ 1, "asc" ]]'>
                                                <thead>
                                                    <tr>
                                                        <th width="20%">Role</th>
                                                        <th width="40%">Title</th>
                                                        <th width="40%">Holding Repository</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                     {% for relation in data.resourceRelations %}
                                                     {% if relation.resource.documentType.term == 'ArchivalResource' %}
                                                         {% if relation.resource.repository %}
                                                             <tr onMouseOver="highlightHoldingMarker({{relation.resource.repository.id}});" onMouseOut="unHighlightHoldingMarker({{relation.resource.repository.id}});">
                                                         {% else %}
                                                             <tr>
                                                         {% endif %}
                                                             <td>{{relation.role.term}}</td>
                                                             <td>
                                                                 <a href="{{relation.resource.link}}">{{relation.content|default(relation.resource.title)}}</a>
                                                             </td>
                                                             <td>{{relation.resource.repository.nameEntries.0.original}}</td>
                                                             <td>
                                                                 <a target="_blank" style="float:right" href="{{control.snacURL}}/vocab_administrator/resources/{{relation.resource.id}} " title="View in SNAC">
                                                                     <i class="fa fa-info-circle" style="font-size:large"> </i>
                                                                 </a>
                                                             </td>
                                                         </tr>
                                                     {% endif %}
                                                     {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading panel-collapsible" onClick="$('#bibliographic-collapse').collapse('toggle'); $(this).find('span').toggleClass('collapsed');">
                                        <span class="collapsed">Bibliographic Resources</span>
                                    </div>
                                    <div id="bibliographic-collapse" class="panel-collapse collapse">
                                        <div class="panel-body">
                                            <table id="lump" class="table table-striped" data-order='[[ 1, "asc" ]]'>
                                                <thead>
                                                    <tr>
                                                        <th width="20%">Role</th>
                                                        <th width="40%">Title</th>
                                                        <th width="40%">Holding Repository</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                     {% for relation in data.resourceRelations %}
                                                     {% if relation.resource.documentType.term != 'ArchivalResource' %}
                                                         {% if relation.resource.repository %}
                                                             <tr onMouseOver="highlightHoldingMarker({{relation.resource.repository.id}});" onMouseOut="unHighlightHoldingMarker({{relation.resource.repository.id}});">
                                                         {% else %}
                                                             <tr>
                                                         {% endif %}
                                                             <td>{{relation.role.term}}</td>
                                                             <td>
                                                                 <a href="{{relation.resource.link}}">{{relation.content|default(relation.resource.title)}}</a>
                                                             </td>
                                                             <td>{{relation.resource.repository.nameEntries.0.original}}</td>
                                                             <td>
                                                                 <a target="_blank" style="float:right" href="{{control.snacURL}}/vocab_administrator/resources/{{relation.resource.id}} " title="View in SNAC">
                                                                     <i class="fa fa-info-circle" style="font-size:large"> </i>
                                                                 </a>
                                                             </td>
                                                         </tr>
                                                     {% endif %}
                                                     {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="body-tab-pane tab-pane" id="relationships">
                        <div class="row">
                            <div class="col-xs-1">
                                <p style="margin-top:8px;font-size:14px;">Filters:</p>
                            </div>
                            <div class="col-md-11">
                                <div class="btn-toolbar" style="margin-bottom: 15px;" aria-label="Table filter buttons" >
                                    <div class="btn-group">
                                        <button class="btn btn-person relation-btn-filter" data-filter="person" type="button" alt="Person Filter" title="Person">
                                                <i class="fa fa-fw fa-user fa-inverse"></i>
                                        </button>
                                        <button class="btn btn-corp relation-btn-filter" data-filter="corporateBody" type="button" alt="Corporate Body Filter" title="Corporate Body">
                                            <i class="fa fa-fw fa-university fa-inverse"></i>
                                        </button>
                                        <button class="btn btn-family relation-btn-filter" data-filter="family" type="button" alt="Family Filter" title="Family">
                                            <i class="fa fa-fw fa-users fa-inverse"></i>
                                        </button>
                                    </div>
                                    <button class="btn btn-danger relation-btn-filter" data-filter="" id="btn-clear-filter" type="button" alt="Clear Filters" title="Clear Filters">
                                        <i class="fa fa-fw fa-times fa-inverse"></i>
                                    </button>
                                    <div id="datatable-column-filters" class="col-xs-3">
                                    </div>
                                    <div class="btn-group pull-right">
                                        <a class="btn list-group-item-visualize"
                                           href="{{control.snacURL}}/visualize/connection_graph/{{data.id}}/{{data.version}}">
                                            <i class="fa fa-fw fa-asterisk" aria-hidden="true"></i> Connection Graph</a>
                                        <a class="btn list-group-item-visualize"
                                           href="{{control.snacURL}}/visualize/radial_graph/{{data.id}}/{{data.version}}">
                                            <i class="fa fa-fw fa-bullseye" aria-hidden="true"></i> Radial Graph</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <table id="relation-table" class="table table-striped " data-order='[[ 1, "asc" ]]'>
                                    <thead>
                                        <tr>
                                            <th width="25%">Relation</th>
                                            <th width="75%">Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for relation in data.relations %}
                                        <tr class="id" data-id="{{relation.targetConstellation}}">
                                            <td>{{relation.type.term}} <i class="fa fa-filter i-hover"></i></td>
                                            <td>
                                                {% if relation.targetEntityType.term == 'person' %}
                                                <span class="fa-stack fa-sm" title="Entity Type: Person">
                                                    <i class="fa fa-square fa-stack-2x" style="color: #5CB9A6;"></i>
                                                    <i class="fa fa-user fa-stack-1x fa-inverse"></i>
                                                </span>
                                                {% elseif relation.targetEntityType.term == 'corporateBody' %}
                                                <span class="fa-stack fa-sm" title="Entity Type: Corporate Body">
                                                    <i class="fa fa-square fa-stack-2x" style="color: #7E72B5;"></i>
                                                    <i class="fa fa-university fa-stack-1x fa-inverse"></i>
                                                </span>
                                                {% elseif relation.targetEntityType.term == 'family' %}
                                                <span class="fa-stack fa-sm" title="Entity Type: Family">
                                                    <i class="fa fa-square fa-stack-2x" style="color: #EA6820;"></i>
                                                    <i class="fa fa-users fa-stack-1x fa-inverse"></i>
                                                </span>
                                                {% endif %}
                                                <a href="{{control.snacURL}}/view/{{relation.targetConstellation}}">{{relation.content}}</a>
                                                <a style="float:right;" data-toggle="modal" data-target"#shared-resources-modal" href="#shared-resources-modal" title="View Shared Resources">
                                                    <i class="fa fa-book" style="float:right;font-size: medium;margin-left:2px;" aria-hidden="true"></i>
                                                    <i class="fa fa-exchange" style="float:right;font-size: larger;" aria-label="View Shared Resources"></i>
                                                </a>
                                            </td>
                                            <td>
                                                {% if relation.targetEntityType.term %}
                                                    {{ relation.targetEntityType.term }}
                                                {% endif %}
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="body-tab-pane tab-pane" id="places">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="geoplace-map" id="placesMap">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <table id="placesTable">
                                    <thead>
                                        <tr>
                                            <th width="05%"></th>
                                            <th width="75%">Place Name</th>
                                            <th width="10%">Admin Code</th>
                                            <th width="10%">Country</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for place in data.places %}
                                            <tr>
                                            {% if place.confirmed and place.geoplace.id %}
                                                <td>
                                                    {% if place.geoplace.latitude %}
                                                    <input type='hidden' class="place_latitude" id='place_lat_{{loop.index}}' value='{{place.geoplace.latitude}}'/>
                                                    <input type='hidden' class="place_longitude" id='place_lon_{{loop.index}}' value='{{place.geoplace.longitude}}'/>
                                                    <input type='hidden' class="place_name" id='place_name_{{loop.index}}' value='{{place.geoplace.name}}'/>
                                                    <i class="fa fa-fw fa-map-marker"></i>
                                                    {% endif %}
                                                </td>
                                                <td>{{place.geoplace.name}}</td>
                                                <td>{{place.geoplace.administrationCode}}</td>
                                                <td>{{place.geoplace.countryCode}}</td>
                                            {% elseif place.original and place.original != "" %}
                                                <td></td>
                                                <td>{{place.original}}</td>
                                                <td></td>
                                                <td></td>
                                            {% endif %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="body-tab-pane tab-pane" id="subjects">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="listtable">
                                    <thead>
                                        <tr>
                                            <th>Subject</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for subject in data.subjects %}
                                            <tr><td>{{subject.term.term}}</td></tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="body-tab-pane tab-pane" id="occupations">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="listtable">
                                    <thead>
                                        <tr>
                                            <th>Occupation</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for occupation in data.occupations %}
                                            <tr><td>{{occupation.term.term}}</td></tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="body-tab-pane tab-pane" id="functions">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="listtable">
                                    <thead>
                                        <tr>
                                            <th>Function</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for function in data.functions %}
                                            <tr><td>{{function.term.term}}</td></tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    {% if 'holdingRepository' in data.flags %}
                    <div class="body-tab-pane tab-pane" id="holding-repository">
                        <div class="row">
                            <div class="col-md-12">
                                <table id="holding-repository-table" class="table table-striped table-hover dataTable no-footer" style="width:100%;">
                                    <thead>
                                        <tr>
                                            <!-- <th>Id</th> -->
                                            <th>Title</th>
                                            <th>Relation Count</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    <!-- <div class="body-tab-pane tab-pane" id="names">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="listtable">
                                    <thead>
                                        <tr>
                                            <th>Alternative Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {# ignore the preferred name #}
                                        {# for nameEntry in data.nameEntries|slice(1) #}
                                            <tr><td>{{nameEntry.original}}</td></tr>
                                        {# endfor #}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> -->
                </div>

            </div>
            <div class="col-md-4" id="profile-sidebar">
                <div class="row profilehover">
                    <div class="wikipedia_thumbnail_container">
                        <div id="profilebar">
                            <span></span>
                        </div>
                        <div class="wikipedia_thumbnail" id="wikipediaImage">
                        </div>
                    </div>
                </div>
                <div class="well well-md">
                    <div class="row">
                        <div class="col-md-12">
                        <h4 class="text-center" style="margin-top: 0px;">
                            {% if data.entityType.term == 'person' %}
                            <span class="fa-stack fa-sm" title="Entity Type: Person">
                                <i class="fa fa-square fa-stack-2x" style="color: #5CB9A6;"></i>
                                <i class="fa fa-user fa-stack-1x fa-inverse"></i>
                            </span> Person
                            {% elseif data.entityType.term == 'corporateBody' %}
                            <span class="fa-stack fa-sm" title="Entity Type: Corporate Body">
                                <i class="fa fa-square fa-stack-2x" style="color: #7E72B5;"></i>
                                <i class="fa fa-university fa-stack-1x fa-inverse"></i>
                            </span> Corporate Body
                            {% elseif data.entityType.term == 'family' %}
                            <span class="fa-stack fa-sm" title="Entity Type: Family">
                                <i class="fa fa-square fa-stack-2x" style="color: #EA6820;"></i>
                                <i class="fa fa-users fa-stack-1x fa-inverse"></i>
                            </span> Family
                            {% endif %}
                        </h4>
                        </div>
                    </div>
                    <div class="row">
                        {% if data.dates %}
                            <label class="col-xs-6">Exist Dates:</label>
                            <div class="col-xs-6">
                            {% for date in data.dates %}
                                <p>{{date.fromType.term}} {{date.fromDate}}</p>
                                {% if date.toDate %}
                                    <p>{{date.toType.term}} {{date.toDate}}</p>
                                {% endif %}
                            {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="row">
                        {% if data.genders %}
                            <label class="col-xs-6">Gender:</label>
                            <div class="col-xs-6">
                            {% for gender in data.genders %}
                                <p>{{gender.term.term}}</p>
                            {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="row">
                        {% if data.nationalities %}
                            <label class="col-xs-6">Nationality: </label>
                            <div class="col-xs-6">
                            {% for nat in data.nationalities %}
                            <p>{{ nat.term.term }}{{loop.last ? '' : ','}}</p>
                            {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="row">
                        {% if data.languagesUsed %}
                           <label class="col-xs-6">Languages Used: </label>
                            <div class="col-xs-6">
                            {% for lang in data.languagesUsed %}
                                <p>{{ lang.language.description }}{{loop.last ? '' : ','}}</p>
                            {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Related Descriptions
                    </div>
                    <div class="list-group">
                    {% for sameas in data.sameAsRelations %}
                        {% if sameas.type.term == 'sameAs' %}
                            {% if 'wikipedia' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-wikipedia"></span>
                                    Wikipedia</a>
                            {% elseif 'loc.gov/authorities' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-idlocgov"></span>
                                    LC Name Authority File</a>
                            {% elseif 'viaf.org' in sameas.uri %}

                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-viaf"></span>
                                    Virtual International Authority File</a>
                            {% elseif 'worldcat.org/wcidentities' in sameas.uri %}

                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-worldcat"></span>
                                    WorldCat Identities</a>
                            {% elseif 'cbw.iath.virginia.edu' in sameas.uri %}

                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-cbw"></span>
                                    Collective Biographies of Women</a>
                            {% elseif 'familysearch.org' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-fs"></span>
                                    FamilySearch</a>
                            {% elseif 'archives.gov' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-nara"></span>
                                    National Archives and Records Administration</a>
                            {% elseif 'wikidata.org' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-wikidata"></span>
                                    Wikidata</a>
                            {% elseif 'numismatics.org' in sameas.uri %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">
                                    <span class="sprite-icons-numismatic"></span>
                                    American Numismatic Society</a>
                            {% else %}
                                <a class="list-group-item" href="{{sameas.uri}}" target="_blank">{{sameas.text|default(sameas.uri)}}</a>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Search Elsewhere
                    </div>
                    <div class="list-group">
                        <a class="list-group-item" href="https://beta.worldcat.org/archivegrid/?p=1&amp;q={{data.nameEntries.0.original|replace({' ':'+'})}}" target="_blank">
                            <span class="sprite-icons-archivegrid"></span>
                            ArchiveGrid Search</a>
                        <a class="list-group-item" href="https://dp.la/search?utf8=%E2%9C%93&amp;q={{data.nameEntries.0.original|replace({' ':'+'})}}" target="_blank">
                            <span class="sprite-icons-dpla"></span>
                            DPLA Search</a>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Information
                    </div>
                    <div class="list-group">
                        <p class="list-group-item"><strong>Permalink:</strong> {{data.ark}}</p>
                        <p class="list-group-item"><strong>Ark ID:</strong> {{data.ark|replace({'http://n2t.net/ark:/99166/': ''})}}</p>
                        <p class="list-group-item"><strong>SNAC ID:</strong> {{data.id}}</p>
                    </div>

                </div>


                <div class="modal fade" id="alternative-names" tabindex="-1" role="dialog"
                     aria-hidden="true">
                   <div class="modal-dialog">
                      <div class="modal-content">
                         <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-labelledby="myModalLabel"
                                    aria-hidden="true"></button>
                            <h4 class="modal-title" id="myModalLabel">Alternative Names</h4>
                         </div>
                         <div title="alternative forms of name" class="extra-names modal-body">
                            {# ignore the preferred name #}
                            {% if data.new and data.new.nameEntries.0 and data.new.nameEntries.0.preferenceScore >= data.nameEntries.0.preferenceScore %}
                                {% for nameEntry in data.new.nameEntries|slice(1) | sort %}
                                  <div class="updated">{{nameEntry.original}}</div>
                                {% endfor %}
                                {% for nameEntry in data.nameEntries %}
                                  <div>{{nameEntry.original}}</div>
                                {% endfor %}
                            {% else %}
                                {% for nameEntry in data.new.nameEntries %}
                                  <div class="updated">{{nameEntry.original}}</div>
                                {% endfor %}
                                {% for nameEntry in data.nameEntries|slice(1) | sort %}
                                  <div>{{nameEntry.original}}</div>
                                {% endfor %}
                            {% endif %}

                            {% for nameEntry in data.old.nameEntries %}
                              <div class="older">{{nameEntry.original}}</div>
                            {% endfor %}
                         </div>
                         <div class="modal-footer">
                            <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
                         </div>
                      </div>
                   </div>
                </div>


                <div class="modal fade" id="shared-resources-modal" tabindex="-1" role="dialog" aria-labelledby="shared-resources-modal">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header primary">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"> Shared Related Resources </h4>
                            </div>
                            <div class="modal-body">
                                <div class="input-group well well-sm text-center" style="width: 100%">
                                    <div class="col-xs-2 text-center">
                                        <p class="relation-icon">
                                            {% if data.entityType.term == "person" %}
                                            <i class="fa fa-user" aria-hidden="true"></i><br/>
                                            {% elseif data.entityType.term == "corporateBody" %}
                                            <i class="fa fa-building" aria-hidden="true"></i><br/>
                                            {% elseif data.entityType.term == "family" %}
                                            <i class="fa fa-users" aria-hidden="true"></i><br/>
                                            {% endif %}
                                        </p>
                                        <p> {{ data.nameEntries.0.original }} </p>
                                    </div>
                                    <div class="col-xs-2 text-center">
                                        <p class="relation-icon">
                                            <i class="fa fa-long-arrow-right" aria-hidden="true"></i><br/>
                                        </p>
                                    </div>
                                    <div class="col-xs-2 text-center">
                                        <p class="relation-icon">
                                            <i class="fa fa-book" aria-hidden="true"></i><br/>
                                        </p>
                                    </div>
                                    <div class="col-xs-2 text-center">
                                        <p class="relation-icon">
                                            <i class="fa fa-long-arrow-left" aria-hidden="true"></i><br/>
                                        </p>
                                    </div>
                                    <div class="col-xs-2 text-center">
                                        <p class="relation-icon">
                                            <i id="compared-constellation-icon" aria-hidden="true"></i><br/>
                                        </p>
                                        <p class="compared-constellation-name">
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table id="shared-resources-table" class="table table-striped table-hover dataTable no-footer" style="width:100%;">
                                            <thead>
                                                <tr>
                                                    <th> {{ data.nameEntries.0.original }} </th>
                                                    <th> Title </th>
                                                    <th class="compared-constellation-name"></th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                               <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Constellation Information -->
    <input id="constellationid" name="constellationid" type="hidden" value="{{ data.id }}"/>
    <input id="version" name="version" type="hidden" value="{{ data.version }}"/>
    <input id="ark" name="ark" type="hidden" value="{{ data.ark }}"/>
    <input id="page_type" name="page_type" type="hidden" value="view_page_full"/>
    {% for sameas in data.sameAsRelations %}
        {% if sameas.type.term == 'sameAs' and (('wikipedia' in sameas.uri) or ('wikidata' in sameas.uri)) %}
            <input id="has_wiki_link" type="hidden" value="true"/>
        {% endif %}
    {% endfor %}
{{ footer(X, user, permissions, control) }}
</body>
</html>
